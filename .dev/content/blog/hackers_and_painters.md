Title: Хакеры и художники
Slug: hackers_and_painters
Date: 2016-05-11
Category: library
Status: draft
Tags: перевод, lisp, python
Summary: Генерация строк из случайной последовательности символов (соли и т.п.)




**Пол Грэм** - известный специалист по языку Lisp, автор классических учебников On Lisp и ANSI Common Lisp. В 1995 году он стал одним из создателей Viaweb - первого в истории веб-приложения. В 2002 году Грэм предложил статистический метод фильтрации спама, сейчас используемый в большинстве противоспамовых систем.




## За что не любят ботанов?


Когда я учился в старших классах школы, мы с моим другом Ричем сделали карту школьных обеденных столов, на которой ранжировали их по популярности. Это было несложно сделать, так как дети обедали только с теми детьми, у которых был тот же уровень популярности. Мы ранжировали столы от A до E. За столами класса А сидели футболисты, девушки-чирлидеры
и так далее. Столами класса E довольствовались дети с синдромом Дауна лёгкой степени, которых мы на тогдашнем жаргоне называли тормозами.

Мы с другом сидели за столом класса D, ниже которого можно было упасть только имея физические недостатки. От нас не требовалось особой объективности, чтобы классифицировать себя как «D». Мы не могли отнести себя к другому классу – каждый школьник, включая нас, отлично знал, кто и насколько популярен.

Мои акции потихоньку росли в процессе обучения в институте. Наконец-то пришла половая зрелость; я стал неплохим игроком в футбол; я начал издавать скандальную подпольную газету. Так что я увидел значительную часть ландшафта популярности.

Я знаю много людей, которые были ботанами в школе, и они все рассказывают одну историю: есть сильная корреляция между «быть сообразительным» и «быть ботаном», и есть ещё более сильная обратная корреляция между «быть ботаном» и «быть популярным». Похоже на то, что сообразительность делает тебя непопулярным.

Почему так происходит? Для тех, кто учится сейчас в школе, этот вопрос может выглядеть нелепым. Голые факты настолько убедительны, что может показаться странным вообразить, что может быть по-другому. Однако же может. Сообразительность не делает Вас изгоем в начальной школе. Точно так же сообразительность не приносит Вам вреда в реальной жизни. Кроме того, насколько я знаю, проблема не является настолько острой в других странах. Но в типичной американской школе, жизнь умного старшеклассника весьма тяжела. Почему?



Ключ к этой загадке можно найти, если слегка перефразировать вопрос. Почему умные школьники не делают себя популярными? Если они такие умные, почему они не могут понять, как устроена популярность, и справиться с системой также просто, как они справляются с контрольными?

Распространено мнение, что это невозможно, так как другие дети завидуют своим умным одноклассникам. То есть, причина непопулярности ботанов кроется в зависти одноклассников к их уму. Следовательно, они никак не могут сделаться популярными. Хотел бы я чтобы было так! Если другие старшеклассники и завидовали мне, они это тщательно скрывали. И, в любом случае, если бы они завидовали моему уму, то я бы нравился девочкам. Девочки любят парней, которым завидуют другие парни.

В школах, в которых я учился, ум не являлся чем-то важным. Дети не восхищались им и не презирали его. При прочих равных, школьники предпочли бы быть скорее с умными, чем с глупыми, но интеллект котировался гораздо ниже чем, например, внешний вид, обаяние или физическая сила.

Но если интеллект сам по себе не является значащим фактором в вопросе популярности, почему же умные школьники так последовательно непопулярны? Ответ, я думаю, заключается в том, что они на самом деле не хотят становиться популярными.

Если бы кто-нибудь сказал мне это в то время, я бы рассмеялся ему в лицо. Школьная непопулярность делает детей несчастными, и некоторые из них настолько несчастны, что даже решаются на самоубийство. Сказать мне тогда, что я не хочу быть популярным – это было бы как сказать умирающему от жажды в пустыне, что он не хочет выпить стакан воды. Разумеется, я хотел быть популярным.

Но на самом деле я не хотел этого, недостаточно хотел. Было кое-что ещё, чего я хотел сильнее, чем быть популярным. Я хотел быть умным. Не просто хорошо учиться в школе, хотя и это имело значение, а проектировать красивые ракеты, или хорошо писать, или разбираться в программировании. В общем, делать большие вещи.

За всё время учёбы я ни разу не пытался отделить мои желания друг от друга, и взвесить – что для меня важнее. Если бы я так сделал, я бы понял, что желание быть умным было для меня важнее всего. Если бы кто-нибудь предложил мне сделку – стать самым популярным ребёнком в школе, но за это получить средний ум (можете смеяться надо мной), я бы не согласился.

Как бы ни страдали ботаны от своей непопулярности, я не думаю, что многие из них согласились бы на такой обмен. Для ботана тяжело даже думать о том, чтобы получить обыкновенные мозги. А вот большинство других детей согласились бы. Для половины из них это был бы шаг наверх. Даже для тех, кто находился в восьмидесятом процентиле (предполагая, как принято делать, что ум – это скаляр), кто бы не отдал тридцать пунктов в обмен на всеобщую любовь и восхищение?

И это, я думаю, корень проблемы. Ботаны гонятся за двумя кроликами. Они, несомненно, хотят быть популярными, но еще сильнее они хотят быть умными. А популярность – это не та вещь, которой ты можешь достичь, не прикладывая усилий, особенно в атмосфере яростного соперничества американской средней школы.



Альберти, которого можно считать архетипом Человека Ренессанса, писал, что «любое искусство, каким бы оно ни было незначительным, требовало абсолютного посвящения от того, кто хотел достичь в нём высот». Я удивлюсь, если узнаю, что кто-то в мире добивается чего-то сильнее, чем американские старшеклассники добиваются популярности. Морские десантники и врачи-нейрохирурги просто лентяи по сравнению с ними. Они изредка берут отпуска, кое-кто даже заводит хобби. Американский тинэйджер добивается популярности каждый час бодрствования, 365 дней в году.

Я не хочу сказать, что они делают это сознательно. Конечно, некоторые из них – настоящие маленькие Маккиавели, но большинство искренне пытается соответствовать обществу.

Например, подростки придают огромное значение одежде. Они не думают, что одеваются для того, чтобы стать популярными. Они одеваются, чтобы хорошо выглядеть. Но для кого? Для других детей. Мнение других детей является определяющим, и не только в том, что касается одежды, но и практически в любых вещах, вплоть до походки. И каждое усилие, которое они предпринимают, чтобы поступать «правильно», это также, сознательно или нет, и усилие, чтобы стать более популярным.

Ботаны этого не понимают. Они не понимают, что достижение популярности требует усилий. В общем, люди, которые находятся за пределами этого круга, не осознают степень, в которой успех зависит от постоянных (пусть часто и неосознаваемых) усилий. Например, принято считать, что способность рисовать – это своего рода врождённое свойство, вроде высокого роста. На самом деле, большинство людей, которые «могут рисовать», любят рисовать, и провели много часов, делая это; вот почему они хорошо рисуют. Так и популярность – это не просто качество, которым ты обладаешь или не обладаешь, а нечто, чего ты самостоятельно добиваешься упорным трудом.

Главная причина, по которой ботаны непопулярны, это то, что у них есть другие интересы. Им интересны книги и природа, а не мода и вечеринки. Они похожи на человека, который пытается играть в футбол, держа на голове наполненный стакан с водой. Другие игроки, которые могут сосредоточить своё внимание на футболе, легко у них выигрывают, и удивляются, почему ботаны такие неумелые.

Даже если бы ботаны старались стать популярными так же сильно, как и другие дети, это требовало бы от них больше усилий, чем от других. Популярные дети научились быть популярными, и хотеть быть популярными, также как ботаны научились быть умными и хотеть быть умными: от своих родителей. Пока ботаны тренировались находить верные ответы, популярные дети тренировались быть приятными.



До этого момента я уклонялся от обсуждения разницы между умными и ботанами, используя эти слова как синонимы. На самом деле, эти слова взаимозаменяемы только в школьном контексте. Ботан – это некто, кто недостаточно социально адаптирован. Но «недостаточно» зависит от того, где ты находишься. В типичной американской школе стандарты «крутости» настолько высоки (или, по крайней мере, настолько своеобразны), что тебе не нужно быть особенно неуклюжим, чтобы выглядеть неуклюжим в сравнении с другими.

Мало умных детей могут позволить себе не уделять достаточно внимания работе над популярностью. Если им не повезло быть хорошо физически развитыми от природы, либо иметь популярных братьев или сестёр, они имеют склонность к тому, чтобы стать ботанами. И в этом заключается причина, по которой жизнь умных людей наиболее тяжела между, скажем, одинадцатью и шестнадцатью годами. Жизнь в этом возрасте зависит от популярности гораздо сильнее, чем до или после него.

До этого возраста, главную роль в жизни детей играют их родители, а не другие дети. Конечно, детей волнует то, что думают их сверстники в начальной школе, но это не является для них настолько безумно важным, как в старших классах.

Около одинадцати дети начинают воспринимать свою семью, как дневную работу. Они создают новый мир вокруг себя, и их волнует положение в этом мире, а не положение в своей семье. На самом деле, неприятности в семье могут даже добавить им очков в том мире, которых их действительно волнует.

Проблема заключается в том, что мир, который создают вокруг себя эти дети, очень жесток. Если Вы предоставите стае одинадцатилетних детей полную свободу, в итоге Вы получите Повелителя Мух. Как и большинство американских детей, я читал эту книгу в школе. По-видимому, это не было случайностью. По-видимому, кто-то хотел указать нам, что мы были дикарями, и что мы создали сами себе жестокий и глупый мир. Но это было слишком сложным для меня. Хотя книга и выглядела совершенно правдоподобной, я не понял подтекста. Я бы хотел, чтобы мне сказали прямым текстом, что мы были дикарями, а наш мир был глупым.



Ботаны находят свою непопулярность терпимой, если она всего лишь приводит к их игнорированию. К сожалению, быть непопулярным в школе – это значит быть активно преследуемым.

Почему? Ещё раз, любой школьник найдёт этот вопрос нелепым. Как же может быть иначе? Однако может. Взрослые, как правило, не мучают ботанов. Почему же так поступают подростки?

Возможно по той причине, что подростки – ещё наполовину дети, а многие дети по своей сути жестоки. Некоторые пытают ботанов по той же причине, по которой отрывают ноги у пауков. Перед тем, как у тебя появится совесть, пытки – весьма занимательное дело.

Другая причина, по которой дети преследуют ботанов – это чтобы чувствовать себя лучше. Когда ты находишься в воде, ты можешь приподняться, опустив воду вниз. Так и в социальной иерархии, люди, которые не уверены в своей позиции, попытаются укрепить её, жестоко обращаясь с теми, кого они полагают стоящими ниже. Я читал, что это – причина, по которой бедные белые в США – это наиболее враждебная чёрным группа.

Но я думаю, что главная причина, по которой другие дети преследуют ботанов, заключается в том, что это часть механизма популярности. Популярность только частично зависит от личной привлекательности. Гораздо больше она зависит от альянсов. Чтобы быть популярным, тебе постоянно нужно совершать поступки, которые подвинут тебя ближе к другим популярным людям, а ничего не сплачивает людей лучше, чем общий враг.

Как политик, который хочет отвлечь внимание избирателей от плохих новостей дома, Вы можете создать врага, даже если его реально нет в наличии. Отделяя от стада ботана, и преследуя его, группа детей, которая стоит выше в иерархии, создаёт связи друг с другом. Атака чужого делает их всех своими. Это причина, по которой самые страшные издевательства – дело рук группы. Спросите любого ботана: гораздо хуже когда тебя мучает стайка подростков, чем когда тебя мучает один подросток, даже если он и садист.

Если это может служить утешением для ботанов, в этом нет ничего личного. Группа детей, которая собралась вместе, чтобы поиздеваться над Вами, делает то же самое, и по той же причине, что и группа людей, которая собралась, чтобы поохотиться. На самом деле они вовсе не ненавидят Вас. Просто им нужно кого-то преследовать.

Так как ботаны находятся внизу школьной иерархии, они являются безопасной мишенью для всей школы. Если я правильно помню, самые популярные ребята не мучают ботанов; им не нужно опускаться до этого. Большая часть мучений идёт от детей, которые стоят ниже, от нервных середнячков.

Проблема в том, что этих середнячков много. Популярность распределяется не как пирамида, а как два конуса, соединённых основаниями. Группа с наименьшей популярностью – довольно невелика. (Я полагаю, что мы были единственным столом D на карте нашей столовой). Так что людей, которые хотят поиздеваться над ботанами, больше, чем самих ботанов.

Отмежевание от непопулярных детей приносит очки, приближение к непопулярным детям убавляет очки. Одна моя знакомая сказала, что в старших классах ей нравились ботаны, но она боялась заговаривать с ними, так как другие девочки подняли бы её на смех. Непопулярность – это коммуникативная болезнь; дети, слишком хорошие для того, чтобы мучать ботанов, всё равно будут их игнорировать для самозащиты.

Неудивительно, что умные ребята, как правило, несчастливы в старших классах. Другие интересы оставляют им мало времени работать над популярностью, а пока популярность похожа на игру с нулевой суммой, это делает их мишенью для всей школы. Забавно, что кошмарный сценарий воспроизводится безо всякого сознательного злого умысла, а просто логически следует из ситуации.



Для меня худшим участком были старшие классы, когда культура подростков была новой и жестокой, а специализация, которая позже постепенно отделит умных, только началась. Почти каждый, с кем я говорил, соглашался – надир, самая низкая точка, где-то между одинадцатью и четырнадцатью.

В нашей школе это был восьмой класс, и мне тогда было двенадцать и тринадцать лет. В тот год была небольшая сенсация, когда одна из учительниц подслушала стайку школьниц, которые ждали школьного автобуса, и была шокирована услышанным. На следующий день учительница красноречиво убеждала весь класс не быть такими жестокими друг к другу.

Это не дало никакого заметного эффекта. Но что меня поразило, так это то, что учительница была удивлена. Вы хотите сказать, что она не знала, какие вещи дети говорят друг другу? Вы хотите сказать, что это не является чем-то нормальным?

Важно понимать, что взрослые не знают, как дети обращаются друг с другом. Теоретически взрослые знают, что дети очень жестоки по отношению друг к другу, также как мы теоретически знаем, что в странах третьего мира пытают людей. Но взрослые не любят думать об этом неприятном факте, и взрослые не видят доказательств жестокого обращения, пока не начинают их целенаправленно искать.

Учителя государственных общеобразовательных школ занимают примерно ту же позицию, что и тюремные надсмотрщики. Главная задача надсмотрщиков – это удержать заключённых на их местах. Им также нужно их кормить, и, по-возможности, следить, чтобы заключённые не убивали друг друга. Надсмотрщики могут сделать немногое сверх этого, поэтому они вынуждены разрешить заключённым создать ту социальную организацию, которую те хотят. Из того, что я читал, я понял, что общество, которое создают заключённые, извращённое, дикое и всюду проникающее, и мало радости быть на его дне.

В общих чертах, именно это и было в школах, в которые я ходил. Наиболее важной вещью была посещаемость. Пока Вы находились в школе, администрация кормила Вас, предотвращала публичные проявления жестокости и делала попытки Вас чему-нибудь научить. Но администрация могла сделать не слишком много сверх этого. Как и тюремные надзиратели, школьные учителя по большей части предоставляли нас самим себе. И, как и заключённые, мы создали себе варварскую культуру.



Почему реальный мир более гостеприимен к ботанам? Может показаться, что ответ прост, и заключается в том, что он населён совершеннолетними, которые слишком взрослые, чтобы издеваться друг над другом. Но я не думаю, что причина в этом. Взрослые в тюрьме постоянно мучают друг друга. И точно также, очевидно, поступают богатые домохозяйки – в некоторых районах Манхеттена жизнь для женщины является продолжением школы, со всеми её мелочными интригами.

Я думаю, что важное качество настоящего мира заключается не в том, что он населён взрослыми, а в том, что он очень большой, и в том, что вещи, которые ты делаешь, приносят настоящие результаты.

Это то, чего не хватает школе, тюрьме и домохозяйкам. Обитатели всех этих миров заперты в своих маленьких пузырях, где всё, что бы они ни делали, имеет не более чем локальный эффект. Естественно, эти сообщества деградируют в дикость. Им больше ничего не остаётся делать.

Когда поступки, которые ты совершаешь, приносят реальный результат, далеко не достаточно быть просто приятным. Становится важным находить верные ответы, и ботаны имеют тут значительное преимущество. Сразу же приходит на ум Билл Гейтс. Несмотря на то, что он знаменит своим неумением вести себя в обществе, он сумел найти верные ответы, по крайней мере, если измерять их в деньгах.

Другая вещь, которая отличает реальный мир, заключается в том, что он гораздо больше. В достаточно большом озере, даже самые маленьние меньшинства могут набрать критическую массу, если они соберутся вместе. В реальном мире ботаны собираются в определённых местах и формируют их собственное общество, где интеллект является самой важной вещью. Иногда поток даже меняет направление: иногда, в университетах, ботаны сознательно подчёркивают свою неуклюжесть, чтобы выглядеть умнее. Джон Нэш так восхищался Норбертом Винером, что перенял его привычку касаться рукой стены во время движения по коридору.



Как тринадцатилетний подросток, я имел опыт общения только с тем миром, который меня окружал. Я думал, что извращённый маленький мирок, в котором мы жили, это и есть мир. Мир казался жестоким и скучным, и я не был уверен, что из этого хуже.

Так как я не соотвествовал этому миру, я думал, что какая-то проблема во мне. Я не понимал, что ботаны не соответствуют этому миру по той причине, что они находятся на шаг впереди. Мы уже думали о вещах, которые имеют значение в реальном мире, вместо того, чтобы проводить наше время, играя в обременительную и бессмысленную игру, как другие.

Мы были немного похожи на взрослого, которого внезапно засунули обратно в старшие классы школы. Он не знал бы, какую одежду надо носить, какую музыку слушать и какой жаргон использовать. Он бы выглядел среди детей как полный чужак. Но этот взрослый знал бы достаточно, чтобы не заботиться о том, что думают другие дети. У нас же не было такой самоуверенности.

Много людей, похоже, думают, что для умных детей полезно побыть среди «нормальных» в течение этого периода их жизни. Возможно. Но есть как минимум несколько случаев, когда причина несоответствия ботанов детскому мирку заключается в том, что остальные ведут себя как сумасшедшие. Я помню, как сидел среди публики во время выступления девочек-чирлидеров, наблюдая как девочки бросают изображения команды-противника на трибуны, чтобы там их порвали в клочья. Я чуствовал себя как естествоиспытатель во время эксцентричного ритуала какого-то дикого племени.


Если бы я мог вернуться в прошлое, и дать несколько советов себе тринадцатилетнему, главное, чтобы я ему сказал – это поднять голову и оглядеться. В то время я не осознавал, что весь мир, в котором мы жили, был так же фальшив, как китаец, переодевшийся грузином. Не просто школа, но и всё предместье. Зачем люди едут в предместья? Чтобы заводить детей! Так что неудивительно, что всё вокруг казалось скучным и стерильным. Целый город был гигантским детским садом – искуственный город, созданный для разведения детей.

Там где я вырос, у меня было чувство, что нечего делать и некуда идти. Ничего не случалось. Предместья сознательно проектируют так, чтобы свести к минимуму влияние внешнего мира, так как внешний мир содержит вещи, которые могут подвергнуть опасности детей.

Ну а школы представляли собой небольшие загоны внутри этого фальшивого мира. Официальное предназначение школ – учить детей. На самом деле, их основное предназначение – это держать детей запертыми в одном месте в течение значительной части дня, чтобы взрослые могли заниматься своими делами. И я это понимаю – в современном индустриальном обществе дети, бегающие по офисам, были бы стихийным бедствием.

Что раздражает меня на самом деле – это не то, что детей держат в тюрьмах, а то, что (а) детям не говорят об этом, и (б) в этих тюрьмах, как правило, устанавливают порядки сами заключённые. Детей посылают на шесть лет запоминать бессмысленные факты в мир, которым правит каста гигантов, бегающая за продолговатым коричневым мячом, как если бы это было самой естественной вещью в мире. А если дети пытаются уклониться от этого сюрреалистичного коктейля, их называют плохо приспособленными.




Жизнь в этом искривлённом мире полна стресса для детей. И не только для ботанов. Как и на любой войне, здесь получают раны даже победители.

Взрослые не могут не понимать, что детей мучают в школах. Почему же они ничего с этим не делают? Потому что они возлагают вину на переходный возраст. Причина, по которой дети так несчастны, говорят себе взрослые, заключается в том, что ужасные новые химикалии, гормоны, бурлят в крови подростков и всё портят. С самой системой всё в порядке – подростки неминуемо будут несчастными в этом возрасте.

Эта идея настолько распространена, что даже дети верят в неё, что, надо полагать, не особо им помогает. Тот, кто думает, что у него больные ноги, не будет останавливаться, чтобы проверить – а не надел ли он ботинки слишком маленького размера.

У меня не вызывает доверия теория, что с тринадцатилетними подростками действительно что-то не в порядке. Если причина в физиологии – так должно было быть всегда и везде. Но являлись ли все монгольские кочевники нигилистами в 13 лет? Я прочёл немало книг по истории, но я нигде не видел ссылки на этот «универсальный» факт до двадцатого столетия. Подростки-подмастерья в эпоху Ренессанса выглядят радостными и энергичными. Разумеется, они подшучивают друг над другом и дерутся (Микеланджело сломал себе нос в драке), но они не выглядят сумасшедшими.

Насколько я могу судить, концепция гормонального безумия подростков – ровесник предместий. Я не думаю, что это – совпадение. Я думаю, что тинейджеров доводит до безумия жизнь, которую их заставляют вести. Подростки-подмастерья в эпоху Ренессанса были служебными собаками. Современные тинейджеры – невротичные болонки. Их безумие – это безумие полной бессмысленности.



Когда я учился в школе, самоубийство было постоянной темой разговоров среди умных детей. Никто из тех, кого я знал, не покончил жизнь самоубийством, но некоторые собирались, а кое-кто, возможно, и попытался. Как и другие подростки, мы любили всё драматичное, а суицид казался очень драматичным. Но главной причиной было то, что наша жизнь в то время была действительно жалкой.

Издевательство сверстников было только частью проблемы. Другая проблема, и, возможно, даже ещё худшая, заключалась в том, что мы не могли делать ничего настоящего. Люди любят работать, и в большей части мира твоя работа – это твоя отличительная черта. А вся работа, которую мы делали или была бессмысленной, или казалась таковой в то время.

В лучшем случае, это была практика перед настоящей работой, который мы могли заняться в далёком будущем, хотя мы даже и не знали в то время, в чём именно мы тренируемся. Но чаще это был просто случайный набор обручей, через которые нужно было прыгнуть, слова без контекста, придуманные специально для тестирования. (Тремя главными причинами Гражданской Войны были... Тест: Перечислите три главных причины Гражданской Войны).

И не было никакого способа выбрать. Взрослые договорились между собой, что школа – это дорога в колледж. Единственным способом выбраться из этой пустой жизни было подчиниться этому решению.



Раньше подростки играли гораздо более важную роль в обществе. В доиндустриальные времена, они все были подмастерьями того или иного сорта, в магазинах, или на фермах, или на военных судах. Их не собирали вместе, чтобы они создавали собственные сообщества. Они были младшими членами взрослых сообществ.

Тинейджеры сильнее уважали взрослых, так как взрослые были экспертами в умениях, которыми подростки пытались овладеть. Сейчас большинство детей слабо представляют, чем занимаются их родители в своих офисах, и не видят связи (на самом деле, есть небольшая) между учёбой в школе и работой, которую они будут выполнять, когда станут взрослыми.

И, так как подростки больше уважали взрослых, взрослые, в свою очередь, могли найти применение подросткам. После тренировки в течение нескольких лет, подмастерье становился реальным помощником. Даже самый юный подмастерье мог носить письма или чистить мастерскую.

Сейчас взрослые не могут найти применения подросткам. Подростки были бы некстати в офисе или на заводе. Так что взрослые сдают подростков в школу по пути на работу, примерно так же, как собаку сажают на цепь, уезжая на выходные.

Почему так произошло? Причина та же, что и у многих других проблем – специализация. По мере того, как работа становилась всё более специализированной, нам приходилось всё дольше и дольше к ней готовиться. Дети в доиндустриальные времена начинали работать самое позднее в 14 лет; дети на фермах, где жила основная масса людей, начинали гораздо раньше. Сейчас дети, которые идут в колледж, не начинают работать на полный рабочий день до 21 или 22. Вы можете видеть, как кандидаты наук учатся до тридцати лет.

Труд подростков сейчас бесполезен, если не считать дешёвого труда в отраслях типа фастфуда, который, кстати, эксплуатирует этот факт. Практически в любой другой работе подростки будут только мешать. Но они также и слишком юны, чтобы оставлять их без присмотра. Кто-то должен присматривать за ними, и проще всего сделать это, собрав их в одно место. Тогда несколько взрослых смогут присматривать сразу за всеми.

Если остановиться на этом, мы получим натуральную тюрьму, хотя и не на полный день. Проблема в том, что множество школ на этом и останавливается. Изначальное предназначение школ – обучение детей. Но у школ нет механизма обратной связи, чтобы делать это хорошо. И большинство школ учат детей настолько плохо, что даже умные дети не воспринимают учёбу серьёзно. Большую часть времени и учителя и ученики просто имитируют полезную деятельность.

В моей школе на уроках французского предполагалось, что мы будем читать «Отверженных» Гюго. Я не думаю, чтобы хоть один из нас знал французский достаточно хорошо, чтобы продраться сквозь эту гигантскую книгу. Как и другие мои одноклассники, я просто ознакомился с кратким содержанием «Отверженных» в Cliff's Notes – специальной книжке для школьников, где кратко пересказывается содержание книг, входящих в школьную программу. Когда нам дали тест на «Отверженных», я заметил, что вопросы звучат странно. Они были полны длинных слов, которые наш учитель никогда не использовал. Откуда пришли эти вопросы? Как выяснилось, из тех же Cliff's Notes. Учитель тоже не читал оригинала. Мы все только делали вид, что учим французский.

Разумеется, в государственных школах иногда встречаются великолепные учителя. Энергия и воображение моего учителя в четвёртом классе, мистера Михалко, до сих пор, спустя тридцать лет, заставляют его учеников вспоминать этот год. Но такие учителя как он – это единичные энтузиасты, плывущие против течения. Они не могут исправить систему.



Почти в любой группе людей Вы найдёте иерархию. Когда группа взрослых собирается в реальном мире, она, как правило, собирается для каких-то целей, и лидерами становятся те, кто лучше всех этим целям соответствуют. Проблема в том, что у большинства школ нет никакой цели. Но иерархия быть должна. И дети создают себе иерархию из ничего.

У нас есть выражение, чтобы описать, что случается, когда ранжирование создаётся без какого-либо значащего критерия. В таких случаях мы говорим, что ситуация вырождается в состязание за популярность. Именно это и происходит в большинстве американских школ. Вместо того, чтобы зависеть от какого-нибудь реального критерия, ранг особи зависит, в основном, только от способности этой особи увеличивать свой ранг. Примерно как при дворе Людовика XIV. Внешнего врага нет, так что дети становятся врагами друг другу.

Когда же есть какой-нибудь внешний критерий умения, нахождение внизу иерархии не является болезненным. Новичок в футбольной команде не возмущается мастерством ветерана; он надеется однажды стать таким же как он, и рад шансу поучиться у него. Ветеран может, в свою очередь, испытывать чувство noblesse oblige (положение обязывает). И, самое главное, статус ветерана зависит от того, насколько он хорош в стражении с оппонентами, а не от того, насколько хорошо он умеет задвигать вниз своих товарищей.

Дворовая иерархия устроена совершенно по-другому. Этот тип общества унижает любого, кто входит в него. Здесь нет ни восхищения снизу, ни noblesse oblige на вершине. Убивай или будь убитым.

Это тот сорт общества, который создаётся в старших классах американских школ. И это происходит, так как у этих школ нет реального предназначения, кроме как содержать детей в одном месте на протяжении определённого числа часов ежедневно. Чего я не понимал тогда, и что я понял совсем недавно, так это то, что оба близнеца-кошмара школьной жизни, жестокость и скука, имеют одну и ту же причину.



Бездарность американских государственных средних школ влечёт за собой худшие последствия, чем просто превращение шести школьных лет в несчастные годы. Эта бездарность порождает непокорность, которая отвращает школьников от предметов, которые они, как предполагается, должны учить.

Как, вероятно, и многим другим ботанам мне пришлось прожить много лет после окончания института, прежде чем я сумел заставить себя прочесть что-нибудь из школьной программы. И я потерял больше, чем книги. Я потерял веру в такие слова как «личность» и «честность», так как я подвергся в школе обману со стороны взрослых. Взрослые использовали эти слова в единственном смысле – покорность. Дети, которых хвалили за эти качества, были в лучшем случае упорными тупицами, а в худшем – поверхностными болтунами. Если это называлось «личностью» и «честностью» – я не хотел иметь с этими понятиями ничего общего.

Словом, которое вызывало во мне больше всего непонимания, было слово «такт». Взрослые использовали его как аналог слов «держи свой рот закрытым». Я полагал, что это слово означает что-то вроде «немой» или «молчаливый». Я поклялся себе, что никогда не буду тактичным; им не удастся меня заткнуть. На самом деле, слово такт имеет тот же корень, что и слово «тактильный», и его значение – «делать ловкое прикосновение». Тактичный – это противоположный застенчивому. Я не думаю, что я понимал это до того времени, как пошёл в колледж.



Ботаны не единственные неудачники в этих крысиных бегах на популярность. Ботаны непопулярны, так как они застенчивы. Но есть и другие дети, которые сознательно отказываются от участия в этих бегах, так как сам процесс вызывает у них отвращение.

Подростки, даже бунтари, не любят быть одни, поэтому когда дети выбирают выход из системы, они стараются сделать это в группе. В школах, в которые я ходил, бунт заключался в использовании наркотиков, особенно марихуанны. Дети из этих групп носили чёрные футболки с изображениями популярных певцов, и назывались «фриками».

Фрики и ботаны были союзниками, и между ними было много общего. Фрики были, как правило, умнее других детей, хотя демонстративное пренебрежение учёбой было важной составляющей их культуры. Я был скорее ботаном, но у меня было много друзей фриков.

Они использовали наркотики, чтобы создавать свои социальные связи, по крайней мере, когда начинали их употреблять. Наркотики – это было то, что можно делать вместе, и, так как наркотики были нелегальными, их употребление было общим символом бунта.

Я не хочу сказать, что плохие школы – это единственная причина, по которой подростки имеют проблемы с наркотиками. Через какое-то время после начала употребления, наркотики вызывают тягу сами по себе. Нет сомнений, что некоторые фрики использовали наркотики, чтобы уйти от проблем, не связанных со школой – домашних проблем, например. Но, по крайней мере, в моей школе, причиной, по которой большинство детей начинали использовать наркотики, был бунт. Четырнадцатилетние не начинают курить травку в надежде, что она поможет им забыть их проблемы. Они начинают курить травку чтобы присоединиться к другой компании.

Плохое руководство порождает бунт; это не новая идея. Но власти ведут себя так, как будто наркотики являются причиной всех проблем сами по себе.



Настоящая проблема – это пустота школьной жизни. Мы не найдём решения, пока взрослые не осознают этого. Взрослые, которые могут понять это первыми – это те, кто сами были ботанами в школах. Вы хотите, чтобы Ваши дети были также несчастны в восьмом классе как Вы? Я не хочу. Но можем ли мы что-нибудь сделать, чтобы исправить положение? Почти наверняка. В текущей системе нет ничего, что нельзя было бы поменять. Эта система сложилась под влиянием случайных обстоятельств.

Взрослые, однако, занятые люди. Показать информацию о школьных «играх» – это одно. Бороться с образовательной бюрократией – совсем другое. Возможно, совсем немногие обладают достаточной энергией, чтобы попытаться что-то изменить. Я полагаю, что самое сложное – это осознать, что ты можешь это сделать.

Ботанам в школах по-прежнему тяжело дышать. Может быть однажды армия тяжеловооружённых взрослых прилетит на вертолётах, чтобы спасти тебя, но они, надо полагать, не прилетят в этом месяце. Если ботаны хотят улучшить свою жизнь прямо сейчас, они должны заняться этим сами.

Простое понимание ситуации, в которой они находятся, должно сделать её менее болезненной. Ботаны – не неудачники. Они просто играют в другую игру, и эта игра гораздо ближе к той, в которую играют в большом мире. Взрослые знают это. Сейчас тяжело найти успешных взрослых, которые не заявляли бы, что в школе были ботанами.

Для ботанов также важно понять, что школа – это не жизнь. Школа – это странная, искусственная вещь, наполовину стерильная и наполовину дикая. Она всеобъемлюща, как жизнь, но она – не настоящая. Школа – это временно, и если Вы посмотрите, Вы сможете заглянуть за неё, даже если Вы по-прежнему находитесь в ней.

Если жизнь кажется ужасной для подростков, это не потому, что Ваши гормоны превратились в монстров (как думают родители), и не потому, что жизнь и в самом деле ужасна (как думаете Вы). Это потому что взрослые, которые не могут использовать Вас в экономике, оставили вас, чтобы вы провели несколько лет собранные вместе, безо всяких реальных дел. Любое общество такого типа ужасно. И Вам не надо смотреть глубже, чтобы понять, почему тинейджеры несчастны.

Я сказал несколько жестоких вещей в этом эссе, но главный тезис оптимистичен – проблемы, которые перед нами стоят, не являются неразрешимыми. Подростки не являются несчастными чудовищами по своей сути. И это должно быть ободряющей новостью и для детей, и для взрослых.

Спасибо: to Sarah Harlin, Trevor Blackwell, Robert Morris, Eric Raymond, and Jackie Weicker за чтение черновиков этой статьи, и Maria Daniels за сканирование фотографий.




## Хакеры и художники

Закончив аспирантуру по информатике, я пошел на художественный факультет изучать живопись. Многие удивились, что компьютерщик вдруг заинтересовался живописью. Эти люди, видимо, считали, что хакерство и художество - очень разные занятия: хакерство - холодное, точное и методичное, а художество - яростное выражение некого первобытного порыва.

Оба представления неверны. У хакерства и художества масса общего. Из множества различных типов людей хакеры и художники - едва ли не самые похожие.

Общее у них вот в чем - и те, и другие творцы. И те, и другие пытаются делать нечто качественное. Как композиторы, архитекторы и писатели. И те, и другие проводят исследования не ради исследований (хотя если в процессе создания чего-то качественного открываются новые методы - тем лучше).

Мне никогда не нравился термин "наука "информатика"". Главным образом потому, что такой науки не бывает. "Информатика" - мешок старьевщика, куда история капризно свалила кучу слабо связанных областей науки - получилась какая-то Югославия. На одном полюсе математики, которые зовут свою работу информатикой, чтобы получать гранты DARPA. На экваторе - какое-нибудь компьютерным естествознание: скажем, поведение алгоритмов при передаче данных по сетям. А на другом полюсе - хакеры; они пишут интересное ПО, и компьютеры для них - только среда самовыражения, как бетон для архитектора или краска для художника. Все равно что математиков, физиков и архитекторов согнать на один факультет.

Иногда работу хакеров называют "программной инженерией". Этот термин тоже сбивает с толку. С тем же успехом можно назвать инженером архитектора. Между архитектурой и инженерией граница нечеткая, однако она есть. Проходит она между "что" и "как": архитектор решает, что делать, инженер вычисляет, каким образом.

"Что" и "как" разделять не следует. Пытаясь решить, что делать и не понимая, как, просто напрашиваешься на неприятности. Но безусловно, хакеры не просто умеют решать, как воплотить спецификацию. В своем апогее хакерство спецификации создает - правда, как выясняется, чтобы создать спецификацию, лучше всего ее воплотить.

Не исключено, что однажды "информатика" развалится на составляющие, подобно Югославии. Может, оно и к лучшему. Особенно если в итоге моя родина - хакерство - станет суверенной.

Наверное, с административной точки зрения удобно упаковать все эти разнообразные занятия в один факультет. Только это очень запутывает. Вот еще одна причина моей нелюбви к термину "наука "информатика"". Допустим, те, кто на экваторе, занимаются примерно экспериментальной наукой. Но те, что на полюсах, математики и хакеры, к науке вообще-то отношения не имеют.

Математиков это вроде бы не тревожит. Они с радостью ограничиваются теоремами, как и прочие математики с матфака, и вскоре, я думаю, перестают замечать, что на доме, куда они ходят на работу, снаружи висит вывеска "информатика". Но хакерам от этой вывески - одна головная боль. Если хакеры занимаются наукой, значит, им и действовать надо по-научному. И хакеры из университетов и научно-исследовательских лабораторий считают, что должны писать научные труды, а не делать, что хочется - создавать прекрасные программы.

Их научные труды в лучшем случае - формальность. Хакеры пишут крутое ПО, а потом - отчет об этом ПО, и отчет удостоверяет успех, выраженный программным продуктом. Но зачастую дело усложняется. Слишком легко предпочесть уродские вещи прекрасным: уродские лучше смотрятся в исследовательских отчетах.

К сожалению, прекрасные вещи - далеко не всегда идеальная тема для отчета. Во-первых, научная работа должна быть оригинальной - и, как знает всякий, кто защищал кандидатскую, на девственную территорию есть лишь одна тропа: нужно застолбить участок, на который никто по доброй воле не покусится. Во-вторых, научная работа должна быть солидной: с кривоватыми системами доклады выходят содержательнее, - можно писать о препятствиях, которые автор преодолел, прежде чем все получилось. Для содержательного труда нет ничего лучше ошибочных выводов в начале. Тому примером большинство работ по искусственному интеллекту; если заключить, что знание можно представить рядом утвердительных логических выражений, где аргументы - абстрактные концепции, можно тонну диссертаций написать о том, как сделать, чтобы это заработало. Как говаривал Рики Рикардо, "Люси, ты должна многое объяснить".

А чтобы создать прекрасное, зачастую нужно лишь слегка повернуть нечто уже существующее, чуть иначе связать старые идеи. Подобную деятельность непросто описать в диссертации.

Так почему же университеты и научно-исследовательские лаборатории по-прежнему судят хакеров по научным публикациям? А почему "способность к обучению" измеряется незатейливыми тестами, а продуктивность программиста - количеством строк кода. Причина одна и та же. Тесты легко проводить, и нет ничего соблазнительнее теста, который вроде как работает.

Оценить то, что на самом деле пытаются делать хакеры, - прекрасные программы, - гораздо сложнее. Чтобы судить о хорошей разработке, требуется тонко разработку чувствовать. А способность распознать хорошую разработку и уверенность, что ты можешь ее распознать, не коррелируют - разве что негативно.

Лучший критерий - время. Со временем прекрасные вещи расцветают, а уродские - теряются в забвении. Увы, времени может потребоваться больше, чем длится человеческая жизнь. Сэмюэл Джонсон говорил, что для формирования писательской репутации требуется сто лет: пока не умрут влиятельные друзья писателя, а затем и их поклонники.

В репутации хакеров большую роль играет случайность - по-моему, с этим надо смириться. В этом смысле хакеры мало чем отличаются от других творцов. По сравнению со многими хакеры - просто везунчики. В живописи влияние моды гораздо сильнее.

Люди не понимают твою работу - плохо, но есть вещи и похуже. Хуже, если ты сам своей работы не понимаешь. В поиске идей углубляешься в смежные области. На факультете информатики, например, весьма соблазнительно убедить себя, что хакерство - прикладная версия того, о чем теоретизирует теоретическая наука "информатика". В аспирантуре меня постоянно терзала смутная мысль, что следует больше внимания уделять теории, и весьма беспечно с моей стороны забывать ее целиком через три недели после выпускных экзаменов.

Теперь я понимаю, что ошибался. Хакерам теория вычислений нужна не больше, чем художникам - химия красок. Надо знать, как высчитывать время и пространственную сложность, еще - про Тьюрингову полноту. Ну, еще не помешает помнить хотя бы концепцию конечного автомата - на случай, если пишешь синтаксический анализатор или библиотеку регулярных выражений. Вообще-то художникам приходится помнить о химическом составе красок гораздо больше.

Я обнаружил, что лучшие источники идей - не области, в названии которых фигурирует слово "компьютер", но те, что населены творцами. Живопись - источник существенно богаче, нежели теория вычислений.

К примеру, меня в колледже учили: прежде, чем приблизиться к компьютеру, программу следует целиком записать на бумаге. Оказывается, я программировал не так. Мне нравилось программировать перед компьютером, а не над листом бумаги. Хуже того, я не писал терпеливо всю программу, проверяя, нет ли ошибок, я извергал безнадежно кривой код и постепенно приводил его в норму. Отладка, учили меня, - это последний заход, когда вылавливаешь опечатки и упущения. Я же работал так, что программирование походило на бесконечную отладку.

Я долго из-за этого переживал - как из-за того, что карандаш держу не так, как учили в начальной школе. Посмотри я на других творцов, - на художников, архитекторов, - я бы понял, что у моих методов есть имя: эскизы. Насколько я понимаю, в колледже программированию меня учили совершенно неправильно. Программу создаешь в процессе написания, как делают художники, архитекторы и писатели.

Осознание этого факта реально влияет на разработку ПО. Язык программирования прежде всего должен быть гибким. Язык программирования - чтобы думать о программах, а не формулировать программы, которые уже обдуманы. Карандаш, а не ручка. Статический контроль типов - неплохая штука, если б программировали и впрямь так, как учат в колледже. Но ни один известный мне хакер так не работает. Нам требуется язык, что позволит карябать, сажать кляксы и стирать, а не вроде как сидишь с чашкой типов данных и вежливо беседуешь со строгой престарелой тетушкой-компилятором.

Раз уж мы заговорили о статическом контроле, то вот что. Назвавшись творцами, мы избавимся еще от одной проблемы, что терзает науки: от зависти к математике. Любой ученый втайне верит, что математики всех умнее. Кажется, математики в это верят не меньше остальных. А в итоге ученые стараются, чтобы их работа на вид получалась математической до предела. Может, в какой-нибудь физике это и не беда, но чем дальше от естественных наук, тем больше усугубляется проблема.

Ну, разумеется - страница формул впечатляет. (Совет: для особой выразительности вводите греческие переменные.) И потому так соблазнительно заняться проблемами, к которым можно подойти формально, а не над теми, что, скажем так, важны.

Если бы хакеры видели в себе творцов - писателей или художников, - такого соблазна бы не возникало. Писатели и художники математикам не завидуют. Они считают, что занимаются чем-то совершенно не связанным с математикой. Как и хакеры, я полагаю.

Университеты и научно-исследовательские лаборатории не позволяют хакерам делать, что нравится, - может, хакерам место в корпорациях? Увы, большинство корпораций этого тоже не позволяет. Университеты и лаборатории заставляют хакеров быть учеными, а корпорации - инженерами.

Я сам обнаружил это совсем недавно. Когда Yahoo купила Viaweb, меня спросили, чем я хочу заниматься. Мне бизнес-аспекты никогда особо не нравились, и я сказал, что хочу заниматься одним хакерством. Попав в Yahoo, я обнаружил, что для них это означает воплощать программные продукты, а не создавать. Программисты для них - это такие технологи, которые переводят видения (ну, назовем их так) менеджеров на язык кода.

Похоже, в больших компаниях только так и происходит. Корпорации так поступают, чтобы в итоге снизить средний уровень отклонений. Лишь немногие хакеры умеют по-настоящему создавать ПО, и вычислить их нелегко. Поэтому компании не вручают будущее программного продукта гениальному одиночке, а устраивают все так, чтобы продукт создавала группа, а хакеры его лишь воплощали.

Если хотите заработать денег, все время помните об этом, - вот одна из причин успеха стартапов. Большие компании снижают средние отклонения итогового продукта, ибо не хотят катастроф. Но выравнивая колебания, теряешь не только нижние экстремумы - верхние тоже. Крупным корпорациям от этого ни холодно, ни жарко, потому что они побеждают не за счет гениальных продуктов. Они побеждают, потому что не так кошмарны, как другие крупные корпорации.

Так что если вы придумаете, как ввязаться в войну разработок с достаточно крупной компанией, чье ПО создают менеджеры по продукции, компания за вами никогда не угонится. Только возможностей - кот наплакал. Крупную корпорацию трудно втянуть в войну разработок: трудно же втянуть противника, что окопался в крепости, в рукопашную битву. Написать текстовый процессор лучше, чем Microsoft Word, например, нетрудно, однако Microsoft в неприступном замке своей монополии на операционные системы вас с вашим процессором, вероятно, и не заметит.

Войны разработок на новых рынках следует вести там, где еще никто не возвел укреплений. Там можно выиграть по-крупному, создав смелый продукт и устроив так, чтобы его созданием и воплощением занимались одни и те же люди. Microsoft в начале сама так работала. И Apple. И Hewlett Packard. Я подозреваю, так делали все успешные стартапы.

Итак, один из способов создавать прекрасные программы - открыть собственный стартап. Однако тут имеются две проблемы. Во-первых, в стартапе приходится заниматься кучей всего, помимо написания программ. В Viaweb мне, считай, повезло, что я хакерствовал четверть времени. В оставшиеся три четверти времени я делал кучу вещей - от занудных до ужасных. У меня была точка отсчета: однажды мне пришлось уйти с заседания совета директоров, чтобы поставить пломбы. Помню, сижу я в стоматологическом кресле, предвкушая сверло, и ощущение у меня - будто я в отпуске.

Другая проблема в том, что ПО, приносящее деньги, и ПО, которое интересно писать, особо не пересекаются. Языки программирования писать интересно, и первый продукт Microsoft, в сущности, им и был, но теперь за языки программирования не платят. Если хочешь денег, надо браться за проблемы, которые бесплатно никто не решит, настолько они чудовищны.

Это проблема любого творца. Цена определяется спросом и предложением, а штуки, над которыми интересно работать, пользуются меньшим спросом, чем решение земных проблем, с которыми сталкивается каждый потребитель. За игру в небродвейских пьесах платят меньше, чем за беготню на ярмарке в шкуре гориллы. За написание романов - меньше, чем за рекламу вывоза мусора. А за хакерские языки программирования - меньше, чем за ПО, цепляющее корпоративную базу данных к веб-серверу.

Думаю, в сфере программного обеспечения проблема решается концепцией, известной почти любому творцу: дневной работой. Фразу ввели музыканты, которые играют по ночам. А вообще это означает, что одна работа за деньги, другая - по любви.

Дневная работа в начале карьеры имелась почти у всех творцов. Этим знамениты художники и писатели. Если повезет, найдешь работу, связанную с твоим настоящим делом. Музыканты нередко работают в музыкальных магазинах. Хакер, работающий над языком программирования или операционной системой, вполне может найти работу, где все это пригодится.

Разумеется, идея не нова. На этом строится все программирование с открытыми исходниками. Я, собственно, хочу сказать, что, может, open source - верная модель: ее правильность независимо подтверждают и все остальные творцы.

Я бы удивился, если б работодатель с неохотой позволял хакерам работать на проектами с открытыми исходниками. В Viaweb мы с неохотой нанимали тех, кто этого не делал. На собеседованиях нас больше всего интересовало, какое ПО программист пишет в свободное время. Если не любишь работу, по-настоящему хорошо работать не сможешь, а если любишь хакерство, неизбежно станешь работать над собственными проектами.


Хакеры - творцы, а не ученые, следовательно, метафору следует искать не в науках, но среди других творцов. Чему еще учит нас живопись?

Во-первых, на примере живописи мы узнаем - проверяем, во всяком случае, - как учиться хакерству. Рисовать учишься, главным образом рисуя. С хакерством - то же самое. Большинство хакеров постигает ремесло вовсе не изучением курсов программирования в колледже, но созданием собственных программ - начиная лет с тринадцати.

Художник оставляет полотна, по которым можно проследить, как он учился. Если рассмотреть работы художника в хронологическом порядке, станет видно, что каждая последующая картина содержит опыт предыдущих. Как правило, в ранних работах обнаруживается зародыш позднейших творческих удач.

Думаю, так работает большинство творцов. Писатели и архитекторы, видимо, тоже. Может, хакерам полезнее действовать как художники, постоянно начинать с нуля, а не трудиться годами над одним проектом, пытаясь вписать в него свои позднейшие идеи.

Тот факт, что хакеры учатся в процессе работы, еще раз демонстрирует, как различны хакерство и наука. Ученые не учатся науке в процессе, они проводят лабораторные исследования и формулируют задачи. Ученые начинают с идеальной работы - в том смысле, что пытаются воспроизвести труд, который кто-то сделал за них. А затем они наконец могут делать нечто оригинальное. Хакеры же с самого начала делают нечто оригинальное; просто оно еще плохое. Поэтому хакеры начинают с оригинального и доводят его до совершенства, а ученые начинают с совершенства и доводят до оригинальности.

Еще творцы учатся на примерах. Для художника музей - справочная по художественным техникам. Сотни лет элементом традиционного обучения художников являлось копирование работ великих мастеров, потому что копирование заставляет пристальнее вглядываться, как сделано полотно.

Писатели тоже так делают. Бенджамин Франклин учился писать, резюмируя основные пункты эссе Эддисона и Стила, а затем пытаясь их воспроизвести. Рэймонд Чандлер то же самое проделывал с детективными рассказами.

И хакеры могут учиться программировать, изучая качественные программы, - не только снаружи, исходники тоже. Один из наименее известных плюсов программирования с открытыми исходниками в том, что оно сильно упростило обучение программированию. Когда я учился, нам приходилось в основном изучать примеры из книг. Единственный тогдашний большой кус кода - Unix, но даже он не был открытым исходником. Большинство тех, кто его читал, изучали незаконные фотокопии в книге Джона Лайонза, написанной в 1977 году, но разрешенной к публикации лишь в 1996-м.

И вот еще чему учит нас живопись: картины создаются путем пошагового совершенствования. Обычно картина начинается с наброска. Постепенно добавляются детали. Но не просто добавляются. Иногда первоначальный план оказывается ошибочным. На множестве картин, если рассмотреть их под рентгеном, обнаруживаются передвинутые руки и ноги или перекроенные черты лица.

Этому мы могли бы у живописи поучиться. По-моему, хакерам следует действовать именно так. Глупо рассчитывать, что спецификации программы окажутся идеальными. Уж лучше признать это сразу и писать программы так, чтобы менять спецификации на лету.

(Структура крупных корпораций этого не позволяет, так что и здесь у стартапов преимущество.)

Теперь вроде бы всем известно об опасности преждевременной оптимизации. Я думаю, есть основания тревожиться из-за преждевременной разработки - из-за того, что слишком рано будет решено, что именно программа должна делать.

Избежать этой опасности помогут правильные инструменты. Хороший язык программирования, как масляные краски, без проблем позволяет с легкостью передумать. Динамический контроль типов - большой плюс: не надо сразу подписываться на конкретное представление данных. Но ключ к гибкости в том, чтобы сделать язык очень абстрактным. Короткие программы переписывать легче.

Звучит парадоксом, но великое полотно должно быть лучше, чем должно быть. . Создавая портрет Джиневры де Бенчи (Национальная галерея), Леонардо поместил за ее головой можжевеловый куст. В нем он тщательно прописал каждый листик. Многие художники полагали, что это просто фон, обрамление для головы. Кто станет пристально изучать куст?

Не таков Леонардо. Он тщательно работал над каждым фрагментом - все равно, будут его тщательно разглядывать или нет. Он был как Майкл Джордан. Неумолим.

Неумолимость - ключ к победе: невидимые детали все вместе становятся видимы. Проходя мимо портрета Джиневры де Бенчи, люди нередко обращают на него внимание, даже не взглянув на табличку с подписью "Леонардо да Винчи". Все невидимые детали вместе образуют нечто потрясающее, словно тысяча едва слышимых голосов, что поют в унисон.

Прекрасные программы тоже требуют фанатичной преданности красоте. Если заглянуть внутрь хорошей программы, видно, что в ней красивы даже те фрагменты, которые вроде бы никто не увидит. Я не утверждаю, что пишу прекрасное ПО. Однако веди я себя в повседневной жизни так же, как над кодом, мне бы лекарства прописывали. Я бешусь, если код плохо сформатирован, или если в нем некрасивые переменные.

Будь хакер простым исполнителем, превращающим спецификацию в код, он бы работал с начала до конца, будто канаву копал. Но если хакер - творец, следует учитывать вдохновение.

В хакерстве, как и в живописи, работа происходит циклами. Иногда новый проект захватывает так, что готов работать по шестнадцать часов в сутки. А иногда ничего особо не цепляет.

Чтобы качественно работать, не следует забывать об этих циклах: они зависят от того, как их воспринимаешь. Когда едешь в гору на машине с ручной коробкой передач, порой нужно притормаживать, чтобы не заглохнуть. Отступление спасает замыслы, и они не глохнут. И в живописи, и в хакерстве одни задачи ужасающе честолюбивы, а другие -- утешительно обычны. Разумно придерживать простые задачи до моментов, когда без них просто заглохнешь.

В хакерстве это буквально значит оставлять баги. Мне нравится отладка: во время отладки хакерство получается прямолинейным, каким его все и считают. Есть конкретная проблема, и нужно ее решить. Программа должна делать X. А она делает Y. Что не так? Ты понимаешь, что в итоге победишь. Расслабляет, как стену красить.

Живопись учит нас не только справляться с собственной работой, но и работать вместе. Многие великие работы прошлого - плод трудов десятков рук, хотя на табличке в музее, быть может, значится лишь одно имя. Леонардо учился в мастерской дель Вероккио и написал ангела в "Крещении Христа". Подобные случаи были правилом, а не исключением. Микеланджело считали особо рьяным, поскольку он настаивал на том, чтобы самому написать все фигуры на потолке Сикстинской капеллы.

Насколько мне известно, художники, вместе работая над полотном, никогда не писали одни и те же фрагменты. Обычно мастер писал основные фигуры, а помощники - остальные и фон. Но ни один не писал поверх чужой работы.

По-моему, это и в программировании удачная модель сотрудничества. Не перегибайте палку. Когда один фрагмент кода пишется тремя или четырьмя людьми, и никому по-настоящему не принадлежит, в итоге он превращается в какой-то общий зал. Безрадостный, заброшенный, пыль собирает. По-моему, правильнее делить проекты на жестко очерченные модули, каждому выдавать по модулю, а интерфейсы между модулями разрабатывать столь же аккуратные и, в идеале, столь же ясные, как языки программирования.

Программы, как и живопись, в основном предназначены для людей. И поэтому для создания великих работ хакеры, как и художники должны уметь сопереживать. Смотреть на продукт глазами пользователя.

В детстве мне все время советовали посмотреть на что-нибудь с чужой точки зрения. В действительности это всегда означало, что надо поступать, как хочет кто-то, а не как хочу я. От этого сопереживание приобрело дурную репутацию, и я нарочно не уделял ему внимания.

Господи, как я ошибался. Выяснилось, что умение смотреть чужими глазами - практически ключ к успеху. Сопереживание - совершенно не обязательно самопожертвование. Вовсе нет. Если понимаешь чужую точку зрения, совсем не значит, что станешь действовать в чужих интересах. В некоторых ситуациях - на войне, к примеру, - действуешь ровно наоборот [^4].

Большинство творцов творят для людей. А чтобы привлечь аудиторию, требуется понять, что ей нужно. Почти на любом живописном полотне - люди, потому что люди интересуют людей.

Быть может, сопереживание - единственное важнейшее различие между хорошим хакером и великим. Некоторые хакеры очень умны, но с точки зрения сопереживания - просто солипсисты. Таким людям трудно создавать великое ПО [^5]: они не видят продукт глазами пользователя.

Чтобы проверить, насколько людям дается сопереживание, понаблюдайте, как они разъясняют технические вопросы собеседнику, ничего не смыслящему в технологиях. У всех есть знакомые, вообще-то умные, но комически не способные решить эту задачу. Если спросить их за ужином, что такое язык программирования, они отвечают примерно так: "Ну, высокоуровневый язык - то, что использует компилятор на входе для генерирования объектного кода". Высокоуровневый язык? Компилятор? Объектный код? Человек, не знающий, что такое язык программирования, этих слов уж точно не знает.

Программное обеспечение отчасти само себя объясняет. Поэтому, чтобы написать хорошее ПО, следует понимать, как мало понимает пользователь. Он обратится к ПО без малейшей подготовки, и лучше пусть ПО не обманет пользовательских ожиданий и сделает, что должно, потому что пользователь инструкций читать не станет. Лучшая известная мне система с этой точки зрения - "макинтош" 1985 года. Он делал то, что обычно ПО не делает: просто работал [^6].

Исходники тоже должны себя объяснять. Если бы мне требовалось научить людей единственной фразе о программировании, я бы научил их цитате, приведенной в начале "Структуры и интерпретации компьютерных программ":

> Программы пишутся, чтобы люди их читали, и лишь иногда - чтобы машины их выполняли.

Сопереживать надо не только пользователям, но и читателям. Это в ваших интересах - вы сами окажетесь одним из них. Немало хакеров сначала писали программы, а спустя полгода выясняли, что понятия не имеют, как эти программы работают. Несколько моих знакомы после таких случаев поклялись никогда больше не писать на perl-е [^7].

Недостаток умения сопереживать связывается с интеллектом - до такой степени, что в определенных кругах он даже моден в некотором роде. Не думаю, что они как-то коррелируют. В математике и естественных науках можно обойтись и без сопереживания; в таких областях люди обычно умны, поэтому два этих качества образовали связку. Но есть куча тупиц, которым сопереживание тоже не дается. Вы послушайте людей, которые звонят с вопросами на ток-шоу. Они задают эти свои вопросы настолько криво, что ведущему нередко приходится переформулировать за них.

Итак, механизм хакерства - тот же, что у живописи и литературы, - но так ли оно круто? В конце концов, жизнь всего одна. Может, лучше посвятить ее чему-нибудь великому?

К сожалению, простого ответа нет. Слава всегда сильно запаздывает. Как свет далекой звезды. Живопись пользуется признанием из-за великих полотен, созданных пятьсот лет назад. Тогда этим полотнам придавали гораздо меньше значения, нежели сегодня. В те времена людям показалось бы крайне странным, что когда-нибудь Федерико да Монтефельтро, герцог Урбино, будет известен в основном как парень со странным носом на картине Пьеро делла Франческо.

Да, я признаю, что сейчас хакерство - не так круто, как живопись, однако следует помнить, что и живопись во времена расцвета не казалось такой уж крутой.

С некоторой долей уверенности можно утверждать: сейчас - дни расцвета хакерства. В большинстве других областей великие работы были созданы раньше. Живопись, созданная в период между 1430 и 1500 гг., остается непревзойденной по сей день. Шекспир появился, когда только возник профессиональный театр; Шекспир вознес его на такие вершины, что любой драматург по сей день живет в его тени. Альбрехт Дюрер сделал то же самое с гравюрами, а Джейн Остин - с романистикой.

Это повторяется снова и снова. Новая среда возникает и захватывает людей так, что те за первую пару поколений выжимают из ее возможностей почти все. Судя по всему, хакерство сейчас находится как раз в этой фазе.

Во времена Леонардо живопись не была такой классной, какой ее сделали его работы. Насколько крутым окажется хакерство, зависит от того, что нам удастся сделать с этой новой средой. Если вдуматься, временная задержка с признанием - достоинство. Общаясь с человеком, который пишет компилятор или ядро Unix, знаешь, по крайней мере, что он это делает не ради того, чтобы девчонок снимать.

[^4]: Вот пример прикладного сопереживания. Если мы в Viaweb не могли выбрать из двух вариантов, мы спрашивали себя, какой из них больше расстроит конкурентов. Однажды конкурент добавил в свой продукт опцию - в сущности, бесполезную, но то была одна из немногих опций, которые не добавили мы, и в профессиональной прессе о конкуренте много писали. Можно было объяснять, что опция бесполезна, но мы решили, что конкурент больше расстроится, если мы сами ее внедрим. В общем, мы написали свою версию в тот же вечер.

[^5]: Кроме текстовых редакторов и компиляторов. Для них хакерам сопереживание не требуется, потому что типичные пользователи - сами хакеры.

[^6]: Ну, почти. Они немного переборщили с памятью, отчего получался неудобный свопинг, но это легко исправлялось за несколько месяцев путем покупки дополнительного жесткого диска.

[^7]: Упростить чтение программ не означает забить их комментариями. Я бы развил мысль Эбелсона и Сассмена: языки программирования должны создаваться для выражения алгоритмов и лишь изредка - чтобы сообщать компьютерам, как их выполнять. Хороший язык программирования объясняет ПО лучше английского. Комментарии нужны лишь в том случае, если в программе какой-то ляп, про который нужно читателю сообщить, - как на дороге, где стрелки висят лишь на резких поворотах.





## То, что Вы не можете сказать

Видели ли Вы Ваше старое фото и не были ли обескуражены тем, что видите? Одевались ли мы таким образом? В действительности, да. И мы не имели представления, как глупо выглядим. Истинная природа моды и стиля — быть невидимыми, как невидимо движение Земли для тех, кто живет на ней.

Пугает меня тот факт, что существует множество моральных мод. Они столь же деспотичны, сколько и невидимы для глаз большинства людей. Но они куда более опасны. Мода ошибочно принимается за хороший дизайн, моды морали — за благо. Одеваясь странно, Вы выставляете себя на посмешище. Нарушая моральные устои, Вы рискуете быть уволенным, подвергнутым остракизму, тюремному заключению или даже быть убитым.

Если бы Вы могли совершить путешествие на машине времени назад в прошлое, единственная вещь оставалась бы неизменной: вам следовало бы следить за своими словами. Мнения, считающиеся безвредными сейчас, могли бы доставить множество неприятностей. Я уже упомянул одну из них, которая могла бы доставить большие неприятности почти во всей Европе в середине 17 века, и доставила Галилею, когда он сказал, что Земля вращается. [^3-1]

Похоже, что одна вещь остается неизменной в истории человечества: в каждом периоде люди верили вещам невероятно глупым, но верили так сильно, что инакомыслие вызывало бы ужасные последствия.

Отличается ли настоящее от прошлого? Для того, кто посвятил достаточное время изучению исторических фактов, ответом будет однозначное «нет». Было бы чистейшим совпадением, если бы в наше время все думали, что всё происходящее с нами сегодня совершенно правильно и законно.

Мучительно осознавать, что мы верим в то, что люди в будущем сочтут глупым. О чем бы предпочли умалчивать те, кто пришел бы к нам из будущего? Именно это я и хочу выяснить. Но я хочу большего, нежели просто шокировать очередной «ересью дня», я хочу найти универсальный рецепт того, чего не стоит говорить в какой-либо из эпох.

### Тест на конформизм

Давайте начнем с теста: есть ли у Вас на уме то, что Вы бы высказали группе своих собеседников с большой неохотой? Если Ваш ответ — «нет», то хорошо бы остановиться и обдумать это. Если все, во что Вы верите, это то, во что Вы должны верить, то не является ли это совпадением? Возможно, что нет. Вполне возможно, что Вы верите тому, что Вам говорят.

Другим возможным вариантом может быть то, что Вы независимо обдумали каждую проблему и пришли точно к таким же заключениям, которые в настоящее время считаются приемлемыми. Это маловероятно, так как Вам пришлось бы сделать те же ошибки, что и другим. Картографы намеренно делают небольшие ошибки в своих картах и могут с уверенностью сказать, что результаты их трудов скопированы. Если другая карта содержит те же ошибки, данный факт является убедительным доказательством.

Как и любая другая эра в истории, наша «моральная карта» почти наверняка содержит какое-то количество ошибок. И любой, кто совершает те же ошибки, вряд ли совершает их случайно. Это было бы равноценно тому, что если бы кто-то заявлял о том, что расклешенные брюки были придуманы и им также.

Если Вы верите всему, были ли бы Вы уверены, что Ваше мнение отличалось бы от мнения плантаторов довоенного Юга, жителей германии 1930-х годов или монголов 1200-х? Очевидно, нет.

В прошлом, во времени появления термина «приспособленец» было в ходу убеждение о ненормальности субъекта, который не осмеливается высказать свои идеи. Это кажется ошибочным. Без малого очевидно, что что-то не то с Вами, если Вы не думаете то, чего не можете высказать вслух.

### Проблема

Чего мы не можем сказать? Один из способов выяснить это — обратить внимание на людей, которые попадают в неприятные ситуации из-за своих слов. [^3-2]

Безусловно, мы не только выискиваем табуированные вещи. Мы пытаемся найти то, что запрещено, ибо является правдой, либо, по крайней мере, имеет достаточно оснований, чтобы считаться не до конца разрешенным вопросом. Но многие утверждения, из-за произнесения которых люди попадают в передрягу, возможно, переступают через второй, более низкий, порог. Никто не попадает в передрягу из-за утверждений, что дважды два — пять, или россказней о том, что в Питтсбурге живут люди трехметрового роста. Такое очевидно ложное утверждение будет воспринято как шутку или, в худшем случае, свидетельство сумасшествия высказывающего, но вряд ли сведут кого-то с ума. Сводит с ума то, во что можно поверить. Предполагаю, что сводят с ума те вещи, которые могут показаться правдивыми.

Если бы Галилей сказал, что в Падуе живут люди трех метров роста, его бы посчитали тихо помешанным. А вот говорить о том, что Земля вращается вокруг Солнца — совсем другое дело. Церковь знала, что эти вещи заставили бы людей задумываться.

Конечно, когда мы смотрим в прошлое, «правило большого пальца» работает отлично. Многие вещи, из-за которые люди наживали себе неприятности, сейчас кажутся безобидными. Похоже, что пришельцы из будущего согласились бы с некоторыми вещами, являющимися предметом спора сейчас. У нас нет Галилеев? Непохоже.

Чтобы отыскать их, следите за мнениями, являющимися источником проблем, и задайте вопрос, являются ли они истинными. Ладно, они могут быть еретическими (или как это называется ныне), но могут ли они быть и истиной также?

### Ересь

Впрочем, это не даст нам всех ответов. Что, если никто до сих пор не попал впросак из-за какой-либо идеи? Если какая-то идея является настолько спорной, что никто не осмелился высказать ее публично? Как найти такие?

Другой подход — следовать за словом «ересь». В каждом историческом периоде, кажется, существуют ярлыки, которые навешиваются на высказывания, чтобы уничтожить их до того, как кто-либо заинтересуется их истинностью. «Богохульство», «святотатство» и «ересь» были такими ярлыками для большой части Западной истории, так же, как и «неприличный», «неподобающий» или «неамериканский» в недавнее время. В настоящее время они утратили свое убийственное значение. Как и обычно, теперь они употребляются с оттенком иронии. Но в свое время они имели солидный вес.

Слово «капитулянт», например, теперь не имеет политического оттенка. Но в Германии 1917 года это слово было оружием, используемым Людендорфом для уничтожения тех, кто был согласен на договорной мир. В начале Второй мировой войны оно было использовано Черчиллем и его сторонниками для заглушения своих оппонентов. В 1940 любимым контраргументом Черчилля в борьбе с противниками собственной агрессивной политики было слово «капитулянт». Было ли оно верным или нет? В действительности, никто не осмеливался выяснить это.

Есть такие ярлыки и сейчас, конечно же, довольно много их, от общеупотребимого «неприемлемого» до ужасающего «раскольнического». Всегда можно с легкостью найти их, просто слушая, что говорят люди об идеях, ошибочно считая неверным. Когда политик говорит, что его оппонент неправ, это прямая критика, если же он употребляет термины «вызывающий разногласия» или «расово нетерпимый» вместо аргументов, на это следует обратить внимание.

Итак, еще одним способом выяснить наши табу, над которыми будут смеяться будущие поколения, является определение ярлыков. Возьмем клеймо «сексист», например, и подумаем над тем, что является причиной называть сексиста сексистом. Далее, мы размышляем, спрашивая себя на каждом шаге, является ли данный шаг верным.

Просто начать с произвольных вопросов? Да, потому что они, в действительности, не будут случайными. То, что придет в голову первым, будет тем, что у всех на слуху. Они будут тем, что Вы слышали, но о чем не задумывались.

В 1989 году было проведено исследование движений глаз рентгенологов, изучающих снимки пациентов на предмет рака легких. [^3-3] Они выяснили, что, пропуская признаки поражения, врач останавливался в непосредственной близости от них. Каким-то образом, несознательно, он определял, что там что-то есть. Полагаю, что некоторые еретические вещи уже назрели у Вас на уме. Если мы временно выключим внутреннюю цензуру, появится первая из них.

### Время и пространство

Если бы мы могли заглянуть в будущее, стало бы понятно, какие из наших табу были бы высмеяны. Мы этого не можем, но мы можем сделать по чти то же: мы можем заглянуть в прошлое. Другим способом выяснить, что делается не так, является взгляд на то, что было приемлемым, сейчас же считается немыслимым.

Изменения между прошлым и настоящим иногда представляют собой прогресс. В области знаний, такой как физика, если мы не согласны с прошлыми поколениями, то только лишь потому, что мы правы, а они — нет. Но убежденность в этом стремительно уменьшается по мере отдаления от точных наук. Рассуждая о социальных вопросах, приходим к выводу, что многие изменения — это просто мода. Брачный возраст меняется как подол платья.

Мы можем представить, что являемся умнее и добрее предшественников, но чем больше мы изучаем прошлое, тем менее мы в этом убеждаемся. Люди в прошлые времена были во многом похожи на нас. Ни герои, ни варвары. Какими бы ни были их идеи, разумные люди верили в них.

Вот еще один источник интересных ересей. Сравните (diff) между собой идеи настоящего и культуру прошлого и посмотрите, что получилось в итоге. [^3-4] Что-то, по сегодняшним меркам, будет выглядеть шокирующе. Отлично, но что из этого может быть истинным?

Не требуется вглядываться в прошлое, пытаясь увидеть существенную разницу. В наше время многие общества людей имеют собственные представления о добре и зле. Так что, Вы можете сравнить их культуру с вашей собственной (лучший способ сделать это — посетить их).

Вы, вероятно, сможете найти противоречащие табу. В одной культуре будет шокирующим думать про одно, в другой же будет ужасом не думать об этом. Но я думаю, что шок всегда будет только на стороне одних. В одной культуре это что-то будет допустимым, ужасом эе это будет у других. Моя гипотеза такова, что та сторона, которая шокирована, вероятнее всего и является заблуждающейся. [^3-5]

Я предполагаю, что единственные табу, которые даже больше, чем просто запреты, это всемирные табу, или близкие к ним. Например, убийство. Но любая идея, воспринимаемая как безобидная в большинстве случаев в разные времена и в различных местах, но еще находящаяся под запретом у нас, является хорошим кандидатом на доказательство того, что мы в чем-то ошибаемся.

Например, на пике политической корректности в начале 90-х, на одном из факультетов Гарварда и среди преподавателей распространялась брошюра, в которой, помимо прочего, заявлялось о недопустимости комплиментов в адрес одежды коллег или студентов. Более никаких «классная рубашка!». Думаю, что этот принцип довольно редок среди мировых культур настоящего или прошлого. Вероятно, что в большем количестве мест данный комплимент будет сочтен особенно приятным, чем наоборот. Очевидно, это и есть мягкая форма табу, которую должен будет избежать пришелец из будущего, попади он в Кембридж, Массачусеттс, в 1992 году.

### Педанты

Конечно же, если у них есть машины времени, то, безусловно, у них найдется и отдельныое руковдство по Кембриджу. Оно всегда было местом средоточия приверед, город придир и буквоедов, где, очень вероятно, исправят не только Ваши идеи, но и речь. И это является еще одним способом найти табу. Взгляните на придир и узрите, что у них в головах.

Головы наших детей — хранилища всех наших табу. Мы думаем о том, что детские мысли должны быть чистыми и светлыми. Картину мира, которую мы им преподносим, не просто доведена до предельной простоты, но и очищена от всего дурного, чтобы соответствовать нашим представлениям о детских мыслях. [^3-6]

Вы можете увидеть это на примере шкалы ругательств. Большинство моих друзей заводят детей в настоящее время, и они избегают использования слов вроде «fuck» и «shit» в присутствии детей, чтобы ребенок не стал употреблять их в своей речи. Но эти слова — часть языка, и взрослые используют постоянно. Так родители подают дурной пример использования языка своим детям путем его неправильного применения. Почему они это делают? Очевидно, их устраивает мысль о том, что дети не должны использовать весь язык без ограничений. Нам нравится, когда дети кажутся невинными. [^3-7]

Большинство взрослых, более того, умышленно преподносят искаженную картину мира. Один из очевидных примеров — Санта-Клаус. Мы думаем, что для детей было бы здорово верить в него. Но рассказываем ли мы им эту ерунду для их блага или своего собственного?

Я не оспариваю все «за» и «против» этой идеи. Вероятно, неизбежно, если родители захотят держать умы детей в младенческих одежках. Вероятно, я и сам сделаю это. Важно то, что в результате наших усилий разум содержащегося в тепличных условиях подростка является сборищем всех наших табу, не бывших в употреблении из-за отсутствия опыта. Все, что мы позже сочтем нелепым, безусловно, находится в их головах.

Как мы приходим к этим идеям? В результате следующего эксперимента. Представьте современного человека, работавшего какое-то время наемником в Африке, доктором в Непале и менеджером ночного клуба в Майами. Детали неважны, только то, что человек повидал многое на своем веку. Теперь попробуйте сравнить содержимое головы этого парня и шестнадцатилетней девушки с хорошими манерами из пригорода. Шокирует ли ее его мысли? Он знает мир, а она «знает», ну или по крайней мере заключает в себе, нынешние табу. Вычтите одно из другого, и результатом будет то, о чем нельзя говорить.

### Механизм

На ум приходит еще один способ выяснить запретные вещи, а именно, как появляются табу. Как возникают моральные нормы и как они приспосабливаются к действительности? Если мы поймем этот механизм, возможно, мы выясним, как он работает в наши дни.

Похоже, что моральные нормы не появляются так же, как обычные модные тренды. Последние, видимо, возникают из-за имитации кем-то прихотей какой-либо влиятельной персоны. Мода на обувь с широким носком в конце XV века возникла в Европе из-за того, что на одной из ступней ног Карл VIII было 6 пальцев. Мода на имя Гэри появилась после того, как актер Фрэнк Купер сделал название этого сурового промышленного города Индианы своим именем. Моральные же нормы, похоже, создаются умышленно. Когда есть то, о чем нельзя говорить, зачастую только потому, что некая группа людей не хочет, чтобы об этом рассуждали вслух.

Запрет будет наиболее сильным, если группа нервозна. Ирония судьбы Галилея заключалась в том, что он озвучивал идеи Коперника. Коперник же сам этого не говорил. В действительности, Коперник был соборным священником и посвятил книгу Папе. Во времена же Галилея церковь находилась в агонии Контрреформации и была сильно озабочена борьбой с неортодоксальными идеями.

Чтобы дать запрету ход, группа должна быть ни достаточной сильной, ни ослабленной. Уверенной группе не нужно защищать запреты. Не считается зазорным отпускать пренебрежительные колкости в адрес американцев или англичан. И, конечно же, группа должна быть достаточно сильной, чтобы продвигать запреты, давать им жизнь. Копрофилы, на момент написания данной статьи, не имеют ни достаточной численности, ни веса в обществе, чтобы продвигать в обществе свои интересы.

Думаю, что наиболее вероятным источником моральных норм будет являться борьба за власть, при которой одна сторона будет ненамного сильнее других. Она и будет группой, достаточно сильной, чтобы устанавливать запреты, и достаточно слабой, чтобы нуждаться в них.

Большинство видов борьбы, за что бы они не велись, будут иметь форму диалектики идей. Английская Реформация изначально добивалась власти и богатства, но впоследствии заботилась о сохранении англичан от тлетворного влияния Рима. Всегда проще поднять народ на борьбу за идею. И какова бы сторона ни выиграла, их идея будет считаться главенствующей, как если бы Господь ниспослал свою волю через победителей.

Нам зачастую нравится думать о том, что Вторая Мировая война закончилась победой над тоталитаризмом. И мы благостно забываем, что Советский Союз был одним из победителей.

Не утверждаю, что битвы ведутся не за идеи на самом деле, утверждаю только лишь то, что любой битве придается вид идейной борьбы, являются ли они таковыми на самом деле или же нет. И так как нет ничего более отвратительного, чем последняя отвергнутая мода, нет ничего более неверного, чем принцип последнего побежденного противника. Изобразительное искусство только сейчас пытается отойти от набивших оскомину образов Гитлера и Сталина. [^3-8]

Несмотря на то, что происхождение морали несколько отлично от происхождению модный тенденций в одежде, механизмы их приспособления кажутся во многом сходными. Первыми, кто будет стремиться привнести новое, будут движимы амбициями: уверенные, спокойные люди, стремящиеся отойти от общей массы. Когда новые веяния станут нормой, они смешаются с еще большей группой, движимой страхом. [^3-9] Ибо вторые примут новое из-за боязни оказаться в стороне и стать чужими.

Итак, чтобы выяснить, чего мы говорить не можем, посмотрите на то, как мода сменяет другую, и постарайтесь предсказать, что именно станет запретом. Какие группы людей являются власть предержащими и нетерпимыми, что они хотят запретить или уничтожить? Какие идеи были дискредетированы в недавней борьбе? Если уверенный человек хочет отойти от предыдущих норм и запретов (например, от своих родителей), что из их наследия он отвергнет? О чем боятся говорить люди, подверженные конвенционализму?

Данная техника не позволит отыскать все запрещенное. На ум приходит и то, что не является результатом каких-либо столкновений. Многие наши запреты коренятся в глубоком прошлом. Но данный подход, соединенный предыдущими четырьмя, позволит обнаружить немалое количество подсудных идей.

### Почему

Кто-то может спросить, зачем это может понадобиться. Зачем намеренно копаться в грязных, дурных идеях, заглядывая под камни?

Я делаю это, прежде всего, по причине, заставлявшей меня ребенком искать под камнями: из-за простого любопытства.
И я особенно любопытен до всего, что не запрещено явно. Позвольте мне самому решать.

Во-вторых, я делаю это из-за нежелания пребывать в заблуждении. Если бы, как и в других эпохах, мы верим в то, что в будущем будет нелепым, я хочу знать, что именно будет таковым, или, по крайней мере, смогу избежать веры в них.

В-третьих, это хорошо для развития мозга. Для выполнения хорошей работы требуется живой ум. И, в особенности, требуется сохранить беспристрастность и избегать ненужных отклонений.

Замечательные результаты получаются из просмотренных идей, пропущенных другими, и нет более скрытой идеи, нежели та, что подсудна. Например, естественный отбор. Это очень просто. Почему никто не додумался о нем? Ну что ж, это слишком очевидно. Дарвин не спешил делать выводы из своей теории. Он хотел заниматься биологией, а не бесконечными спорами с теми, кто упрекал его в атеизме.

В научной деятельности, где это проявляется в большей степени, большим преимуществом является возможность делать предположения. Образ действия ученых или, по крайней мере, хороших ученых, проявляется следующим образом: поиск мест, где нарушаются незыблемые истины, удалить шелуху и взглянуть внутрь. Так появляются новые теории.

Хороший ученый, иными словами, не просто игнорирует устоявшиеся истины, но и пытается нарушить их. Ученые ищут проблемы. Это и должно быть образцом поведения любого схоласта, но, видимо, именно ученые-естественники более всех стремятся «заглянуть под камни». [^3-10]

Зачем? Возможно, потому, что ученым присущ развитый интеллект; большинство физиков, при необходимости, могли бы получить ученую степень в области французской литературы, но лишь немногие специалисты-филологи могли бы иметь степень по физике. Или же это могло бы произойти по той причине, что в естественных науках теории истинны или ложны, и это добавляет ученым смелости (или же из-за деления теорий на истинные или ложные в естественных науках для выполнения тех или иных работ требуется более развитый интеллект, чем для работы просто хорошего политика).

Какой бы ни была причина, похоже, что существует видимая корреляция между интеллектом и стремлением к необычным идеям. Это происходит не только потому, что умными людьми движет желание найти изъян в обыденном мышлении. Думается, что условности и обыденность не представляют интереса и не удерживают их в каких-либо рамках. Это можно наблюдать, например, в их манере одеваться.

Ересь оправдывается не только в науках. При любом соперничестве Вы можете добиться большего только лишь потому, что обратили внимание на то, о чем соперники и не посмели подумать. В любом деле, вероятно, найдутся необычные вещи, позволить себе говорить о которых смогут лишь немногие. Снижение доли рынка, занимаемой автомобильными компаниями США, имеет множество объяснений. Тем не менее, причина настолько очевидна, что любой сторонний наблюдатель сможет назвать ее: они делают плохие автомобили. И они делали их плохими так долго, что теперь бренды американских автокомпаний стали антибрендами, покупая американскую машину, Вы покупаете вопреки, а не из-за ее хорошего качества. «Кадиллак» перестал быть «Кадиллаком» в 1970-м, и, насколько я вижу, никто не хочет говорить об этом. [^3-11] Иначе эти компании предприняли бы что-либо для улучшения текущей ситуации.

Тренировка своего ума думать о немыслимом имеет своей целью нечто большее, чем просто мышление. Это похоже на растяжку. Когда Вы выполняете растяжку, то ставите себя в такие экстремальные условия, какие никогда не потребуются при беге. Если Вы можете думать о вещах, от которых у людей волосы встают дыбом, то не составит никакого труда думать о том, что люди назовут инновациями.

### Сокровенные мысли

Когда возникают мысли, которые не хочется высказывать, что Вы делаете с ними? Мой совет: не делитесь ими. Или, по крайней мере, взвешивайте все «за» и «против».

Предположим, в будущем образуется движется по запрету желтого цвета. Предложение выкрасить что-то в желтый цвет сделает Вас «желтистом», как и любого, кому нравится этот цвет. Любителей оранжевого терпят, но смотрят искоса. Предположим, Вы понимаете, что в желтом нет ничего плохого. Если Вы будете рассказывать об этом, Вас объявят «желтистом» и задавят массой аргументов «анти-желтисты». Если цель Вашей жизни — реабилитация желтого цвета, то это, возможно, и есть то, что Вы хотите. Но если Вы интересуетесь и другими вопросами, то статус «желтиста» не пойдет Вам впрок. Споря с идиотами, Вы становитесь идиотом сами.

Самая важная вещь — возможность думать о чем угодно, но не говорить что угодно. И если Вам кажется, что необходимо высказать все, что Вы думаете, это может удержать Вас от неподобающих мыслей. Думаю, стоит придерживаться обратной политики. Мысленно начертите четкую линию между мыслями и речью. В пределах Вашего разума дозволено все, я могу думать о самых непристойных вещах, какие только можно вообразить. Но, как и в любом секретном обществе, ничто, сказанное среди участников, не должно распространиться куда-либо еще. Первой правило бойцовского клуба — не говорить о бойцовском клубе.

Когда Мильтон собирался посетить Италию в 1630-х, сэр Генри Вуттон, бывший послом в Венеции, сообщил Мильтону, что его девизом должны быть слова «i pensieri stretti & il viso sciolto» («сокрытые мысли и открытое лицо»). Улыбайтесь всем и не говорите, что у Вас на уме. Это было мудрым советом. Мильтон любил поспорить, а Инквизиция был присущ норов. Но, думаю, разница между ситуацией Мильтона и нынешними временами — всего лишь вопрос степени сравнения. В каждом времени есть свои ереси, и если Вас не заключили под замок, у Вас есть достаточно причин для волнения.

Я принимаю то, что мысль о молчании звучит трусовато. Когда я читаю о преследованиях Сайентологами своих оппонентов,[^3-12] или о сборах досье сторонниками Израиля на несогласных с нарушениями прав человека, [^3-13] или же о судебном преследовании нарушителей DMCA,[^3-14] часть меня хочется сказать: «Ну что ж, подонки, попробуйте». Проблема в том, что существует очень много вещей, о которых нельзя говорить вслух. Если Вы произнесете их, то не останется времени для дела. Лучше бы Вам стать Ноамом Хомским.[^3-15]

Проблема с невысказанными мыслями заключается в том, что Вы теряете возможность обсуждения. Обсуждении идеи приводит к появлению большего количества идей. Вот оптимальный план: если Вы можете, обсуждайте мысли в кругу проверенных лиц. Это не только способ развивать мысли, но и способ выбирать друзей. Люди, которые спокойно и без критики выслушивают странные мысли, как правило, самые интересные, которых приходится знать.

### Viso Sciolto?

Не думаю, что открытый взгляд требуется так же, как и умение скрывать мысли. Возможно, лучший способ спастись от фанатиков своего времени — сделать его как можно проще, но не показывать явное несогласие. Вас попытаются вывести на чистую воду, но Вы не обязаны отвечать им. Если Вас принуждают к ответу на вопрос «Ты с нами или против нас?», возможен ответ: «Ни то, ни другое».

Еще лучшим ответом будет «Я еще не решил». Именно это и произошло с Ларри Саммерсом в схожей ситуации. Объясняясь позже, он сказал: «Я не признаю лакмусовую проверку». [^3-16] Лишь немногие вопросы, задаваемые людям, касаются нетривиальных вещей. Нет ничего удивительного, что ответ дают немедленно.

Если «антижелтисты» одерживают верх и требуется нанести ответный удар, существуют способы сделать это не будучи обвиненным в «желтизме». Как и стрелок в древней армии, можно избежать непосредственного контакта с врагом. Куда лучше поразить его стрелами с дистанции.

Одним из способов осуществить это является попытка поднять обсуждение на один уровень абстракции вверх. Если Вы оспариваете цензуру вообще, Вы можете избежать обвинения в любой ереси, содержащейся в книге или фильме, являющихся предметом цензуры. Вы можете контратаковать ярлыки с помощью «мета-ярлыков»: ярлыки, ссылающиеся на ярлыки, необходимые для предотвращения дискуссии. Растяженность термина «политическая корректность» означало начало конца этой корректности, так как позволяло критиковать что угодно без боязни быть обвиненным.

Другим способом провести контратаку является метафора. Артур Миллер подколол Комиссию по расследованию антиамериканской деятельности пьесой «Суровое испытание» о салемских ведьмах. Он не обращался напрямую к Комитету и потому не дал им возможности ответить. Комиссия не могла открыто заявить о поддержке описанных в пьесе испытаний. Метафора Миллера так прочно прилипла, что до недавнего времени деятельность этого комитета зачастую именовалась «охотой на ведьм».

Но лучшим из всех, вероятно, является юмор. Фанатики, чем бы ни руководствовались, не обладали чувством юмора. Попадая впросак, они чувствовали себя как корова на льду. Викторианская мораль была уничтожена, в основном, тем, что к ней относились как к шутке. Подобное ей отношение получила и политическая корректность. Миллер писал: «Я рад, что мне удалось создать „Суровое испытание“, но, оглядываясь назад, очень часто желал обладать достаточным темпераментом, чтобы создать комедию абсурда, которой, безусловно, заслуживала ситуация». [^3-17]

### ABQ

Мой приятель-голландец как-то сказал, что мне следует считать Голландию образцом толерантного общества. Во многом это верно: у них давняя традиция свободы высказывать свои убеждения. На протяжение многих веков Нидерланды были страной, где можно было сказать то, что не принимали где-либо еще, что сделало государство центром схоластики и промышленности (связь которых настолько длительная, какую не может осознать большинство людей). Декарт, обвиняемый во Франции, плодотворно работал в Голландии.

И тем не менее, я удивляюсь. Голландцы живут по горло в правилах и установках. Здесь все еще многого нельзя, что же можно?

Конечно, высокая оценка либеральности и открытости — не гарантия чего-либо. Кто сомневается в их открытости? Наша гипотетическая мисс из пригорода думает то же самое и о себе. Учили ли ее этому? Кого бы ни спроси, мы услышим то же, тем не менее люди отчетливо дистанцируются от вещей, по-настоящему дурных. (Кто-то может оспорить термин «дурной» как оценочный, заменив его более нейтрально звучащим эвфемизмом «негативный» или «разрушительный»)

Когда люди не в ладах с арифметикой, им это известно, так как они проваливаются при проверке. Но когда люди закрыты и стеснены, им это неизвестно. Фактически, они думают совсем обратное. Вспомните, суть моды — быть невидимой.

В ином случае этого бы не произошло. Она не выглядит как что-то осязаемое, скорее, как естественное поведение. Это только со стороны видны колебания установок, норм и правил как руководства к действию и мы можем опознать в них моду.

Время предоставляет нам такую возможность. В самом деле, появление новой моды делает ясно различимой старую, ибо она начинает выглядеть смехотворно. С одного крайнего положения маятника другое выглядит особенно далеко.

Впрочем, чтобы заметить какую-то моду в наше время, требуется серьезное усилие. Не обладая достаточным временем для соблюдения дистанции, придется дистанцироваться самому. Вместо того, чтобы быть частью толпы, встаньте на достаточном удалении от нее и наблюдайте, что происходит. И проявите особое внимание тогда, когда требуется подавление какой-либо идеи. Веб-фильтры для детей и работников зачастую блокируют сайты с порнографией, насилием и распространением ненависти (hate speech). Что определяет порнографию и насилие? И что такое «распространение ненависти»? Похоже на фразу из «1984».

Ярлыки, подобные им, вероятно, являются важнейшими внешними признаками. Если утверждение ложно, то это наихудшая из вещей, которую Вы можете сказать про него. Не требуется утверждать, что оно еретическое. И если оно не является ложным, оно не должно быть подавлено или уничтожено. Так что, когда Вы видите термины, описываемые как "...-ист" или "...-ый", неважно, в 1630 или в 2030, это будет нездоровым признаком. Когда Вы слышите, как употребляют эти термины, спросите, почему их употребляют.

Особенно, если их употребляете Вы. Необязательно, если это будет толпа, которую Вы изучаете с отдаления, необходимо наблюдать и свои мысли с расстояния. Это не какая-то радикальная идея, по сути своей; это основное различие между ребенком и взрослым. Когда ребенок сердится из-за усталости, он не понимает, что происходит. Взрослый может осознать это и принять мысль «не бери в голову, я просто устал». Я не могу взять в толк, почему невозможно, подобно этому, учиться распознавать и не принимать на веру эффект моральных норм.

Вам придется еще шаг сверх того, чтобы научиться мыслить четко и ясно. Это труднее, ибо теперь Вы действуете наперекор социальным устоям, а не с ними заодно. Ваше стремление дорасти до того, чтобы держать свое дурное настроение при себе, поощряется. Лишь немногие помогают Вам дойти до того, чтобы не принимать во внимания дурные настроения общества.

Как вы увидите волну, будучи водной гладью? Всегда задавайте вопросы, это — единственная защита. Чего Вы не можете сказать? И почему?


[^3-1]: Вероятно, инквизиция никогда и не собиралась претворять свои угрозы пытки в жизнь. Но это только потому, что Галилео ясно дал понять, что сделал бы все, о чем бы они ни попросили. Если бы он отказался, они бы так просто не отступили. Незадолго до этого инквизиторы сожгли философа Джордано Бруно, когда он не пошел на компромисс.

[^3-2]: Многие организации любезно публикуют списки запрещенных тем в стенах их офисов. К сожалению, эти списки обычно неполные, потому что есть такие шокирующие вещи, что никто даже и не ожидает их услышать. И в то же время, есть настолько общие, что, в любом случае невозможно буквально уследить за их употреблением. Редко какой университетский речевой кодекс не запрещал бы, в прямом смысле слова, Шекспира.

[^3-3]: [Kundel H. L., C.F. Nodine, E.A. Krupinski. “Searching for lung nodules: Visual dwell indicates locations of false-positive and false-negative decisions”. Investigative Radiology, 1989, 24, 472-478](https://arizona.pure.elsevier.com/en/publications/searching-for-lung-nodules-visual-dwell-indicates-locations-of-fa).

[^3-4]: Глагол «diff» происходит из компьютерного жаргона, но это именно то слово, отражающее смысл, который мне хотелось передать. Происходит от названия утилиты diff в операционных системах семейства Unix, возвращающая список всех различий между двумя файлами. В более широком смысле оно означает неизбирательное и подробное всестороннее сравнение двух версий чего-либо.

[^3-5]: Может показаться, что я какой-то духовный релятивист. Но это далеко не так. Я полагаю, что понятие «категоричный» является одним из ярлыков, используемым в наше время для того, чтобы подавлять любые разговоры, а наши попытки быть «некатегоричными» покажутся в будущем одной из наиболее забавных наших особенностей.

[^3-6]: Это делает мир еще более запутанным для детей, т.к. то, что они видят, идет в разрез с тем, что им говорят. Я никогда не мог понять почему, например, португальские «исследователи» начали прокладывать свой путь вдоль побережья Африки. На самом деле, они искали рабов. Bovill, Edward, The Golden Trade of the Moors, Oxford, 1963.

[^3-7]: Дети вскоре узнают эти слова от своих друзей, но они не знают о том, что не должны их использовать. Таким образом, на протяжении некоторого времени у Вас такое положение дел как какой-то в музыкальной комедии, где родители употребляют эти слова в своем кругу, но никогда произносят их при детях, а дети используют их в кругу своих друзей, но никогда не используют в речи при своих родителях.

[^3-8]: Несколько лет назад я работал в одном стартапе, чей логотип представлял собой закрашенный красный круг с белой буквой «V» по середине. После того, как мы с ним поработали, помнится, мне пришла в голову мысль, что красный круг — это довольно мощный символ. Красный, вероятно, самый базовый цвет, а круг – основная форма. Вместе они обладали такой визуальной пробивной силой! Почему не так много американских компаний использовали красный круг в качестве логотипа? А-а, ну да … (ссылка www.paulgraham.com/zero.html)

[^3-9]: Страх намного сильнее из этих двух сил. Иногда, когда я слышу, как кто-то произносит слово «gyp», я говорю им, с серьезным выражением лица, что это слово использовать нельзя, потому что оно считается унизительным по отношению к цыганам (англ. Gypsies). На самом деле словари расходятся во мнениях относительно этимологии данного слова. Но реакцией на эту шутку почти всегда бывает слегка напуганное согласие. Есть еще кое-что в моде, будь то в одежде или в убеждениях, что отнимает у людей уверенность. Когда они узнают что-то новое, они чувствуют, что это было что-то такое, о чем они уже должны были знать.

[^3-10]: *а)* Я не хочу сказать, что мнения ученых непоколебимо правильные. Я хочу сказать только то, что их готовность обдумывать нешаблонные убеждения позволяет им делать рывок вперед. В остальном это иногда и недостаток. Как и другие люди науки, многие ученые никогда напрямую не зарабатывали на жизнь, т.е. никогда не получали оплату за оказанные услуги. Большинство ученых живет в аномальном микромире, где деньги – это что-то такое, что скупо выдается комиссиями вместо того, чтобы представлять их работу. И для них кажется естественным, что национальные экономики следуют тому же сценарию. В итоге, множество умных, в кавычках, людей пошли по пути социализма в середине XX века.
*б)* В данном эссе это один из ярких примеров того, о чем мы не можем говорить. Это нарушает принцип запрета университетской жизни. Среди университетов негласной аксиомой является то, что все области науки интеллектуально равны. Нет сомнений в том, что эта аксиома помогает решать некоторые вопросы деликатнее. Но когда Вы думаете о том, какое же удивительное совпадение потребовалось бы, чтобы это было истиной, и как бы удобно было для всех воспринимать это как истину, даже если это не так, как же не поставить это под сомнение? Особенно, когда Вы приходите к каким-либо выводам, которые Вы вынуждены принять. Например, это означало бы, что в отдельно взятой области взлетов и падений могло бы и не быть. Если бы все научные сферы не были бы так синхронизированы друг с другом (Вам действительно придется напрячься, чтобы усвоить это). И что же делать с университетами, где есть факультеты по кулинарному искусству или менеджменту спорта? Если Вы принимаете эту аксиому, то как далеко она простирается? Вы правда хотите оказаться в положении, когда придется отстаивать свои идеи о том, что дифференциальная геометрия не сложнее готовки?

[^3-11]: По-видимому, в пределах отрасли, такие мысли рассматривались бы как «отрицающие». Еще один ярлык, прямо как «капитулянт». Не говоря уже о том, что следует задаться вопросом, а истинны ли они? В самом деле, мерой здоровой организации, вероятно, является степень, до которой позволены такие отрицающие мысли. Там, где выполняется важная работа, отношение обычно больше кажется критичным и саркастичным, чем «благоприятным» и «располагающим». Люди, которых я знаю, и которые выполняют важную работу, думают, что у них все из рук вон плохо, но при этом у всех остальных еще хуже.

[^3-12]: Behar, Richard, «The Thriving Cult of Greed and Power», Time, 6 May 1991.

[^3-13]: Healy, Patrick, «Summers hits 'anti-Semitic' actions,»Boston Globe, 20 September 2002.

[^3-14]: «Tinkerers' champion,» The Economist, 20 June 2002.

[^3-15]: Под этим я подразумеваю, что Вам пришлось бы стать профессиональным полемистом, а не то, что "мнение Ноама Хомского" = "то, что нельзя произносить". Если Вы даже и сказали то, чего не следует, Вы в шок повергнете как консерваторов, так и либералов. Прямо как если бы Вы отправились в прошлое на машине времени в Англию викторианской эпохи, Ваши убеждения шокировали бы и вигов, и тори.

[^3-16]: Traub, James, «Harvard Radical,» New York Times Magazine, 24 August 2003.

[^3-17]: Miller, Arthur, The Crucible in History and Other Essays,Methuen, 2000.

[^3-18]: Некоторые сообщества избегают слова «ошибочный» как слишком категоричное, а вместо этого используют более нейтрально звучащие эвфемизмы «несогласный» или «опровергающий».

Благодарность Саре Харлин (Sarah Harlin), Тревору Блеквеллу (Trevor Blackwell), Джессике Ливингстон (Jessica Livingston), Роберту Моррису (Robert Morris), Эрику Реймонду (Eric Raymond) И Бобу Ван Дер Звану (Bob van der Zwaan) за чтение черновиков этого эссе, и спасибо Лизе Рэндел (Lisa Randall), Джеки МакДоноу (Jackie McDonough), Райану Стэнли (Ryan Stanley) и Джоэлу Рейни (Joel Rainey) за обсуждения ересей. Разумеется, что они не несут никакой ответственности за мнения, высказанные в нём, и, в особенности, за мнения, которые в нём не высказаны.






## Слово «Хакер»

В СМИ слово «хакер» используют для описания того, кто взламывает компьютеры. В среде разработчиков программного обеспечения это слово означает искусного программиста. Но между этими двумя понятиями существует связь. Для программистов «хакер» ассоциируется с мастерством в самом буквальном смысле слова: некто, кто может заставить компьютер делать то, что ему заблагорассудится, хочет того сам компьютер или нет.

В дополнение к этой путанице укажем, что существительное «hack» (англ.) также имеет два значения. Это слово может быть как комплиментом, так и оскорблением. Слово «hack» используется для описания ужасного результата вашей деятельности. Но когда вы совершаете что-то так талантливо, что каким-то образом побеждаете систему, то это также называют «hack». Данное слово употребляется чаще всего в первом значении, а не во втором, вероятно, потому, что плохие решения преобладают над блестящими.

Хотите — верьте, хотите — нет, но эти два значения слова «hack» также связаны. У плохих и оригинальных решений есть нечто общее: они оба идут вразрез с правилами. И существует постепенный переход от нарушения правил, граничащего с безобразностью (использование клейкой ленты для присоединения чего-либо к вашему велосипеду), к такому нарушению правил, что сродни блестяще оригинальному (отказ от Евклидового пространства).

Хакинг зародился еще до появления компьютеров. Работая над «Манхэттенским проектом», Ричард Фейнман развлекался, бывало, тем, что взламывал сейфы с секретными документами. Эта тенденция продолжается и по сей день. Когда мы учились в магистратуре, у одного моего друга хакера, который слишком много времени провел около MIT, был свой собственный набор «отмычек» (сейчас он управляет хеджевым фондом, т.е. занимается деятельностью, которая не так уж и далека от его предыдущих увлечений).

Иногда, сложно объяснить властям, почему кому-то может захотеться совершать такие вещи. У еще одного моего друга были проблемы с правительством из-за взлома компьютеров. И только совсем недавно это объявили преступлением, а ФБР обнаружила, что их обычные методы ведения расследований не работают. Очевидно, что расследование полиции начинается с мотива. Типичных причин преступлений немного: наркотики, деньги, секс, месть. Любознательность не входила у ФБР в список мотивов. На самом деле, сама идея казалась им чуждой.

Приближенных к власти людей раздражает общий принцип неповиновения хакеров. Но это неповиновение является побочным продуктом синтеза тех качеств, которые делают их искусными программистами. Они могут посмеиваться над исполнительным директором, когда тот выражается универсальной корпоративной речью, и они также смеются над кем-то другим, кто утверждает, что у данной конкретной задачи нет решения. Станете подавлять одно, и вы будете сдерживать другое.

Иногда это относится и к самому принципу. Порой юные программисты замечают чудаковатости выдающихся хакеров и решают перенять некоторые из них, чтобы казаться умнее. Фальшивка вызывает не только раздражение; на самом деле обидчивость и вспыльчивость этих позеров может замедлить инновационный процесс.

Но даже учитывая их раздражающие эксцентричные качества, принцип неповиновения хакеров — это чистая победа. И хотелось бы, чтобы преимущества такого принципа находили бОльшую поддержку.

Я, например, полагаю, что в Голливуде люди просто напросто озадачены отношением хакеров к авторским правам. Это вечная тема горячих дискуссий на Slashdot. Но почему людям, которые программируют компьютеры, следует так переживать по поводу авторских прав, в конце-то концов?!

Частично потому, что некоторые компании используют механизмы для предотвращения копирования. Покажите любому хакеру замок, как первой его мыслью будет, а как его взломать. Но есть причина посерьезнее, почему хакеры встревожены такими инструментами как авторские права и патенты. Все более и более агрессивные меры для защиты «интеллектуальной собственности» они воспринимают как угрозу интеллектуальной свободе, которая нужна им для выполнения своей работы. И тут они правы.

Именно заглядывая в нутро действующих технологий, хакеры вырабатывают идеи для последующих поколений. «Нет уж, спасибо, — возможно, скажут интеллектуальные домовладельцы, — нам не нужна никакая посторонняя помощь». Но они ошибаются. Последующие поколения компьютерных технологий часто — возможно, даже чаще, чем наоборот — разрабатываются не профессионалами, а людьми со стороны.

В 1977 году никто не сомневался в том, что некая группа в IBM разрабатывает то, что, как они ожидали, будет следующим поколением компьютеров для бизнеса. Они ошиблись. Следующее поколение компьютеров для бизнеса разрабатывалось по совершенно другому пути двумя длинноволосыми парнями с одинаковым именем Стив в гараже в Лос Альтосе. В примерно это же время власть имущие объединились для разработки официальной версии операционной системы следующего поколения, Multics. Но двое парней, которые считали Multics чрезмерно сложной, затаились и написали свою. Они дали ей имя с шутливой отсылкой к Multics — Unix.

Недавние новые законы об интеллектуальной собственности налагают беспрецедентные ограничения на тот вид любопытства, который приводит к новым идеям. Раньше конкуренты могли воспользоваться патентом, чтобы предотвратить продажу вами копии того, что они создали, но им бы не удалось остановить вас от изучения какой-то одной части продукта с целью узнать, как там все работает. Новейшие законы объявили это преступлением. Как же мы должны разрабатывать новые технологии, если мы не можем изучать действующие, чтобы понять, как их улучшить?

По иронии судьбы, на себя это взяли хакеры. Всему виной компьютеры. Системы управления внутри машин обычно строятся на основе физических принципов работы: приводы, рычаги, кулачковые механизмы. Все в большей и большей степени принцип работы (а, следовательно, и ценность) продуктов заключается в их программах. И под этим я подразумеваю программы в общем смысле, т.е. данные. Песня на пластинке физически является углублениями в пластике. Песня на диске iPod всего лишь хранится на нем.

Данные по определению легко копировать. А Интернет позволяет их легко распространять. Поэтому не удивительно, что компании боятся. Но, как это часто случается, страх затуманил им разум. Правительство отреагировало суровыми законами защиты интеллектуальной собственности. Возможно, их задумали во благо. Но им и в голову может не прийти, что такие законы принесут больше вреда, чем пользы.

Почему программисты так неистово выступают против этих законов? Будь я на месте законодателя, я бы заинтересовался этим загадочным явлением — по той же самой причине, как если бы я был фермером и внезапно услышал бы однажды ночью громкое кудахтанье из курятника, я бы вышел посмотреть, что там такое. Хакеры не глупы, а единодушие — большая редкость в этом мире. Поэтому, если они все кудахчут, возможно, что-то идет не так.

Может ли быть так, что такие законы, даже направленные на защиту Америки, в действительности нанесут ей вред? Подумайте об этом. Есть что-то слишком американское во взломах сейфов Фейнманом во время его работы над проектом «Манхэттен». Сложно представить, чтобы власти отнеслись к такого рода вещам с юмором в те времена в Германии. И возможно, это не совпадение.

Хакеры непослушны. В этом вся суть хакинга. И это также является сутью «американности». Не случайно Кремниевая долина находится в Америке, а не во Франции, Германии, Англии или Японии. В тех странах люди не выходят за очерченные рамки.

Я прожил некоторое время во Флоренции. Но после нескольких месяцев пребывания там я понял, что то, что я неосознанно надеялся там найти, находилось в месте, которое я только что покинул. Причина, по которой знаменита Флоренция, заключается в том, что в 1450 году она была Нью-Йорком. В 1450 году ее наполняли непокорные и амбициозные люди, такие, каких сейчас вы встретите в Америке. (Поэтому я и вернулся в Америку).

Довольно существенным преимуществом Америки является то, что она обладает благоприятной средой для нужного вида непокорности, т.е. это родной дом не только для умных, но и для дерзких. А хакеры — это наглые всезнайки, без исключений. Если бы у нас был государственный праздник, это был бы день первого апреля. О нашей работе многое говорит тот факт, что мы используем одно и то же слово как для блестящих, так и для жутко убогих решений. Когда мы размышляем, мы не всегда уверены на 100% какого рода будет это решение. Но как только в нем появляется некоторая неправильность нужного характера, то это многообещающий знак. Странно, что люди воспринимают программирование как точную и систематическую деятельность. Это компьютеры точные и систематические, а хакинг — это то, чем вы занимаетесь непринужденно и с улыбкой.

В нашем мире некоторые из наиболее типичных решений не далеко ушли от предмета острых шуток. Несомненно, IBM довольно сильно удивилась последствиям дела о DOS лицензировании, прямо как и предполагаемый «конкурент», когда Михаэль Рабин разобрался с проблемой путем ее переопределения в такую, которая уже проще подавалась решению.

Циничные умники вынуждены развивать в себе четкое ощущение того, сколько они могут унести. И не так давно хакеры почувствовали изменение в окружающей среде, о чем на hackerlines отзывались довольно неодобрительно.

Для хакеров недавнее ограничение гражданских свобод показалось особенно угрожащим, что также введет в заблуждение людей несведущих. Почему нам следует так сильно переживать за гражданские свободы? Почему в большей степени это свойственно именно программистам, а не стоматологам, морякам или ландшафтным дизайнерам?

Позвольте описать ситуацияю в терминах, которые одобрил бы любой правительственный чиновник. Гражданские свободы — это не только повод для гордости и необычная американская традиция. Гражданские права обогощают страны. Если вы нарисуете график, отражающий зависимость ВВП на душу населения от гражданских свобод, то заметили бы четкую закономерность. Неужели гражданские свободы и есть причина, а не только следствие? Полагаю, что так оно и есть. Что общество, в котором люди могут делать и говорить, что хотят, также будет становиться и таким, где побеждают наиболее действенные решения, а не те, что спонсируются самыми влиятельными людьми. Авторитарные государства становятся коррумпированными; корумпированные страны превращаются в бедные, а те, в свою очередь, — в слабые. Такое ощущение, что наряду с налоговыми поступлениями кривая Лаффера существует и относительно правительственной власти. По крайней мере, это кажется вполне возможным, так что глупо было бы проводить эксперимент и проверять. В отличие от высоких налоговых ставок, вы не можете аннулировать тоталитаризм, если он окажется ошибкой.

Вот что беспокоит хакеров. Правительственный шпионаж за людьми не является прямой причиной того, что программисты пишут код хуже. В конечном итоге это просто приведет к такому миру, в котором будут преобладать плохие идеи. И потому, что для хакеров это так важно, они особенно чувствительны к таким вещам. Они ощущают приближение тоталитаризма издалека, словно животные, которые чувствуют приближение грозы.

Было бы нелепо если бы, как того боятся хакеры, недавние меры, направленные на защиту национальной безопасности и интеллектуальной собственности, оказались бы боевой ракетой, нацеленной прямо на причину успеха Америки. И это было бы не в первый раз, когда меры, принятые в панической обстановке, имели бы эффект, отличный от предполагаемого.

Существует такая вещь как «американность». Если вы захотите это усвоить, то ничто не заменит вам опыт проживания заграницей. А если вы захотите узнать, взрастит ли нечто это качество или подавит его, будет сложно найти фокус-группу лучше хакеров, потому что из тех, кого я знаю, они ближе всех приблизились к воплощению данного качества. Возможно, даже ближе, чем люди, управляющие нашей страной, которые за своими речами о патриотизме напоминают мне больше кардинала Ришелье или его последователя Мазарини, а не Томаса Джефферсона или Джорджа Вашингтона.

Когда вы читаете, что отцам-основателям приходится говорить в свое оправдание, то их речи больше похожи на то, как говорят хакеры. «Дух сопротивления правительству, — как писал Джефферсон, — так ценен в определенных случаях, что мне бы хотелось, чтобы ему никогда не давали погаснуть».

Представляете, если бы американский президент сказал бы такое сегодня. Как и замечания откровенной старой бабушки, афоризмы отцов-основателей приводили в замешательство поколения их менее уверенных наследников. Они напоминают нам о том, откуда мы родом. Они напоминают нам о том, что именно люди нарушают правила, которые являются источником богатства и власти Америки.

Люди, обладающие достаточными полномочиями для установки правил, обладают естественным желанием, чтобы этим правилам подчинялись. Но будьте поосторожнее со своими просьбами. Они могут быть удовлетворены.

Спасибо Кену Андерсену (Ken Anderson), Тревору Блеквелу (Trevor Blackwell), Даниеле Гиффин (Daniel Giffin), Саре Харлин (Sarah Harlin), Широ Каваи (Shiro Kawai), Джессике Ливингстон (Jessica Livingston), Мэтц (Matz), Джеки МакДоноу (Jackie McDonough), Роберту Моррису (Robert Morris), Эрику Реймонду (Eric Raymond), Гидо ванн Россуму (Guido van Rossum), Девиду Вайнбергеру (David Weinberger), и Стивену Вольфраму (Steven Wolfram) за прочтение черновика данной статьи. 







## Другая дорога в будущее

(Эта статья объясняет почему многое в ПО следующего поколения может быть реализовано на серверной стороне, что это будет значить для программистов, и почему этот новый вид ПО будет хорошей возможностью для стартапов. Источниками статьи были диалоги в BBN Labs.)

Летом 1995-го я со своим другом Робертом Моррисом (Robert Morris) решили запустить стартап. PR-кампания перед IPO Netscape тогда шла полным ходом, и в прессе было полно разговоров об электронной коммерции. На тот момент в сети уже было порядка тридцати реальных электронных магазинов, и все они были сделаны вручную. Если в скором времени в сети должно было появиться множество онлайн-магазинов, была потребность в ПО для их разработки, и мы решили такое написать.

Сначала, где-то около недели мы думали, что это будет обычное приложение для ПК. Но потом у нас возникла идея разработать приложение, которое будет исполняться на нашем веб-сервере, с использованием браузера в роли пользовательского интерфейса. Мы попробовали переписать приложение для работы в Вебе, и стало понятно, что это правильное направление. Если мы писали наше ПО для исполнения на сервере, это было удобнее как для пользователей, так и для нас.

Оказалось, что это был отличный план. Теперь, как Yahoo Store, это ПО является самым популярным конструктором онлайн-магазинов, с ним работает порядка 14 тысяч пользователей.

Когда мы начинали разработку Viaweb, почти никто не понимал что мы имеем в виду, когда говорим, что ПО будет работать на сервере. Так было до тех пор, пока через год не запустился Hotmail, и люди начали его использовать. Теперь все знают, что это разумный подход. Теперь есть название для того, чем мы тогда были: провайдер приложений (Application Service Provider или ASP).

Я думаю, что значительная часть ПО следующего поколения будет разрабатываться по этой модели. Даже Microsoft, кто больше всех может потерять, кажется видит неизбежность переноса приложений с десктопов на сервер. Если такой перенос происходит, это означает совершенно другой мир для программистов. В этой статье описываются неожиданности, с которыми мы сталкиваемся как первопроходцы этого мира. А раз софт перемещается на серверы, то, что я описываю здесь, есть наше будущее.

### Новое устройство?

Когда мы оглядываемся на эру программного обеспечения для десктопов, думаю, мы должны поражаться его неудобству, так же, как мы сейчас поражаемся трудностям, с которыми сталкивались владельцы первых автомобилей. В течение первых двадцати или тридцати лет вы должны были стать автоэкспертом, чтобы пользоваться автомобилем. Но автомобили имели столько плюсов, что многие из тех, кто не был автоэкспертами, тоже хотели иметь их.

Компьютеры сейчас на таком же этапе развития. Для того, чтобы пользоваться персональным компьютером, вы вынуждены изучить намного больше, чем вообще хотите знать что происходит внутри него. Однако компьютерами владеют более половины домохозяйств в Штатах. Моя мама пользуется компьютером для переписки по электронной почте и ведения счетов. Около года назад она была встревожена, когда получила от Apple письмо, в котором ей предлагали скидку при покупке новой версии операционной системы. Очевидно что-то не в порядке, если шестидесятипятилетняя женщина, которая хочет пользоваться только электронной почтой и счетами, вынуждена думать об установке новых версий операционной системы. Обычные пользователи не должны даже знать о терминах «операционная система», не говоря уж о «драйвер устройства» или «патч».

Теперь есть другой путь установки ПО, который не будет заставлять пользователей становиться системными администраторами. Веб-приложения — это программы, работающие на веб-серверах и использующие в роли пользовательского интерфейса веб-страницы. Для среднестатистического пользователя этот новый вид ПО будет проще, дешевле, более переносимым, более надёжным, и часто более мощным, чем приложение на персональном компьютере.

С веб-приложениями большинство пользователей не будут должны думать о чём-то ещё, кроме самих приложений. Все сложные и меняющиеся составляющие будут находиться где-то на сервере и обслуживаться специально обученными специалистами. И более того, вам вообще может быть не нужен компьютер, чтобы пользоваться приложением. Всё, что вам потребуется, это что-то с клавиатурой, экраном и веб-браузером. Возможно с беспроводным доступом в Интернет. Возможно этим будет ваш мобильный телефон. Чем бы это ни было, это будет бытовой техникой: будет стоить около $200, и выбирать будут, исходя из внешнего вида. Вы будете больше платить за доступ в Интернет, чем за оборудование, так же, как сейчас это происходит с телефонами [^5-1].

Время отклика сервера на действие пользователя составляет порядка десятой доли секунды, поэтому пользователи тяжёлого интерактивного ПО (например, Photoshop) по-прежнему будут хотеть, чтобы вычисления шли на локальной машине. Но если вы посмотрите для чего большинство людей использует компьютеры, то согласитесь, что время отклика в секунду не будет для них проблемой. Моей маме на самом деле персональный компьютер не нужен, и большинству людей тоже.

### Польза для пользователей

Недалеко от моего дома стоит машина с наклейкой «лучше смерть, чем неудобство». Большинство людей в большинстве случаев выбирают то, что требует меньше усилий. Если веб-приложения победят, то это будет потому что они более удобные. Причём как для пользователей, так и для разработчиков.

Чтобы использовать чистое веб-приложение, всё, что вам понадобится, это веб-браузер, имеющий доступ в Интернет. Поэтому вы можете использовать веб-приложение откуда угодно. Когда вы устанавливаете софт на свой ПК, вы можете пользоваться им только на этом ПК. Хуже того, ваши файлы заперты в этом ПК. Неудобство этой модели становиться всё более очевидным для людей, которые пользуются сетями.

Поворотной точкой стали веб-приложения электронной почты. Миллионы поняли, что должны иметь доступ к почте откуда угодно. А если вы читаете свою почту, то почему бы и не календарь тоже? Если вы обсуждаете с коллегами документ, то почему бы и не редактировать его? Почему вообще ваши данные должны быть привязаны к определенному компьютеру?

Сама идея «Вашего компьютера» исчезает и заменяется «Вашими данными». У вас должен быть доступ к своим данным с любого компьютера. Или даже с любого устройства, и устройство не обязательно должно быть компьютером.

Такие устройства не хранят данные, они должны быть как телефоны. На самом деле они могут стать телефонами, или наоборот, телефоны станут такими устройствами. А раз они становятся меньше, есть ещё один довод не хранить данные на них: то, что вы носите с собой, может быть потеряно или украдено. Оставить наладонник в такси — всё равно что авария диска, только в этом случае ваши данные попадают в чьи-то руки, а не просто стёрлись.

С программным обеспечением, полностью основанным на веб-технологиях, ни данные, ни приложения не хранятся на клиенте. Поэтому вам не нужно ничего устанавливать, чтобы использовать. А когда установка не нужна, то и не надо волноваться, что что-то установится не так. Не может быть несовместимости между приложением и операционной системой на вашем устройстве, поскольку приложение не исполняется в вашей операционной системе.

Посколько установка не требуется, попробовать софт перед покупкой станет легко и просто стандартным подходом. Должно стать возможно бесплатно потестировать приложение просто зайдя на сайт, где оно продаётся. Сайт Viaweb можно представить как один большой указатель на предложение пользователям тест-драйва.

После демо-версии подписка на сервис не должна потребовать ничего, кроме заполнения короткой формы (чем короче, тем лучше). И это должно быть последнее, что требуется от пользователя. Используя веб-приложения, вы должны получать обновления без доплаты, без каких-либо действий, или даже без уведомлений.

Апгрейды больше не будут такими шокирующими, как сейчас. С течением времени приложения будут незаметно становиться более мощными. Это потребует некоторых усилий со стороны программистов. Они будут должны проектировать приложения так, чтобы обновления не отражались на пользователях. Это новая задача, но пути её решения существуют.

С веб-приложениями все используют одну и ту же версию, и баги могут исправляться сразу после обнаружения. Поэтому веб-приложения должны иметь значительно меньшее количество багов по сравнению с приложениями на ПК. Сомневаюсь, что в Viaweb бывало больше, чем десять багов одновременно. Это на несколько порядков лучше, чем в случае приложений для ПК.

Веб-приложения могут совместно использоваться несколькими людьми. Это преимущество кооперативного ПО очевидно, но я могу поспорить пользователи захотят этого в большинстве приложений, как только поймут, что это возможно. Например, часто будет полезно позволять двум пользователям редактировать один документ. Viaweb позволяет нескольким пользователям редактировать сайт одновременно, в большей степени из-за того, что так проектировать правильно, чем потому что мы ожидали, что пользователи этого захотят, но оказалось, что многие хотели.

Когда вы будете пользоваться веб-приложением, ваши данные будут надежнее защищены. Аварии дисков не уйдут в прошлое, но пользователи больше не услышат об этом. Это будет происходить в серверных центрах. И компании, предлагающие веб-приложения, будут делать резервые копии — не только потому, что у них будут работать грамотные сисадмины, которые знают о чем надо беспокоиться, но и потому что сервис-провайдер, теряющий данные пользователей, будет иметь большие неприятности. Когда люди теряют своим данные из-за поломки диска, они не могут бешенно сходить с ума, потому что злиться они могут только на самих себя. Когда компания потеряет их данные, они будут значительно злее.

Ну и последнее, веб-приложения должны быть менее уязвимы для вирусов. Если на терминале не запускается ничего, кроме браузера, меньше шансов получить вирус, и локальных данных, которые можно повредить, тоже нет. А программа, атакующая сами серверы, обнаружит их очень хорошо защищенными [^5-2].

Веб-приложения будут меньше нервировать пользователей. Если заглянете в мысли среднестатистического пользователя Windows, вы найдете там огромную неудовлетворенную потребность в подобном софте. Если делать такой софт, это может стать мощным преимуществом.

### Город кода

Для разработчиков самое явное отличие веб-софта от «обычного» в том, что веб-софт не состоит из одного цельного куска кода. Он будет представлять собой набор программ различного типа, а не один большой бинарник. Так что проектирование веб-приложений будет похоже на проектирование города, а не проектирование здания: помимо зданий вам понадобятся дороги, дорожные указатели, ремонтные, полицейские и пожарные службы, а также планы развития и ликвидации катастроф.

В Viaweb программный пакет состояло из сравнительно больших приложений, с которыми непосредственно работают пользователи, из программ, которые используют эти приложения, из программ, которые постоянно работают в фоне для определения проблем, из программ, которые пытаются рестартовать то, что сбойнуло, из программ, которые запускаются время от времени, чтобы собрать статистику или построить поисковые индексы, из программ, которые запускаются вручную для сборки мусора или для перемещения/восстановления данных, из программ, которые имитируют пользователей (для измерения производительности или поиска ошибок), из программ для диагностики сетевых аварий, из программ, выполняющих резервное копирование, из интерфейсов к внешним сервисам, из программ, которые управляют впечатляющей коллекцией циферблатов, показывающих статистику сервера в реальном времени (необходимые не только не только пользователям, но и нам), изменения (в том числе багфиксы) в открытом ПО и из огромного количества конфигурационных файлов и настроек. После того, как мы были куплены Yahoo, Тревор Блекуэлл (Trevor Blackwell) написал эффектную программу для переноса магазинов на новые серверы, расположенные в другой точке страны, без их выключения. Программы посылают нам пейджинговые сообщения, посылают факсы и электронную почту пользователям, собирают транзакции процессинга кредитных карт, и взаимодействуют с другими программами через сокеты, пайпы, http-запросы, ssh, пакеты udp, разделяемую память и файлы. Часть Viaweb даже состоит из «отсутствия» программ, так как один из ключевых принципов безопасности Unix — не позволять запускать лишних утилит, которые можно использовать для взлома серверов.

И это не ограничивается софтом. Мы потратили много времени, разрабатывая серверную конфигурацию. Мы сами собрали свои серверы из компонентов — и для того, чтобы сэкономить деньги, и для того, чтобы получить точно то, что хотим. Мы должны были продумать достаточно ли у интернет-провайдера полосы пропускания. Мы последовательно обошли всех поставщиков RAID.

Но оборудование не только то, о чём нужно заботиться. Когда вы управляете им, вы можете больше предоставить пользователям. В случае персонального ПО вы можете определить минимальную конфигурацию оборудования, но вы не сможете потом дать больше. Если администрируете серверы, вы можете за один раз добавить всем пользователям функции пейджинговой связи, отправки факсов, управления по телефону или процессинга кредитных карт и т.д., просто установив соответствующее оборудование. Мы постоянно ищем новые возможности добавить различные функции на основе оборудования, не только для того, чтобы порадовать пользователей, но и чтобы выделиться по сравнению с конкурентами, которые не могут управлять техникой напрямую (потому что продают персональный софт или предоставляют свои веб-приложения через интернет-провайдеров).

Так как программное обеспечение в веб-приложениях будет представлять собой пакет программ, а не единый исполняемый файл, они могут быть написаны на нескольких языках программирования. Когда вы пишете персональный софт, вас практически заставляют писать на том же языке, на котором написана операционная система, то есть С или С++. Поэтому эти языки рассматриваются (особенно нетехническими сотрудниками, например, менеджерами или вице-президентами) как языки для «серьёзной» разработки. Но это является просто стереотипом, сложившимся в сфере разработки персонального софта. Для приложений, размещающихся на сервере, вы можете использовать любой язык какой захотите.[^5-3] Сейчас многие программисты высшего класса используют языки, очень далекие от С и С++: Perl, Python или даже Lisp.

Для серверного ПО никто не может вам указывать какой язык использовать, потому что вы управляете системой в целом, вплоть до уровня аппаратного обеспечения. Языки программирования по-разному пригодны для различных задач. Вы сможете использовать язык, который наилучшим образом подходит для вашей задачи. А когда у вас есть конкуренты, то «сможете» превращается в «обязаны», потому что если вы не воспользуетесь этим преимуществом, воспользуются они.

Большинство наших конкурентов используют С и С++, что делает их ПО заметно хуже, потому что (помимо других проблем) они не могут работать с отсутствием состояния CGI скриптов. Если вы собираетесь что-то изменить, все изменения должны происходить на одной странице с кнопкой «Изменить» внизу. Так как я использовал Lisp, который многие по-прежнему считают языком для исследований, мы смогли сделать редактор Viaweb похожим на десктопное приложение.

### Версии

Одним из наиболее важных изменений в этом новом мире будет порядок выпуска новых версий ПО. В мире персонального ПО выпуск версии — это большой шок, когда все в компании потеют и напрягаются, чтобы выдавить один гигантский кусок кода. Очевидные сравнения напрашиваются, как для процесса выпуска версий, так и для его результата.

С приложением на сервере вы можете делать доработки почти так же, как в программе, которую вы пишете для себя. Вы выпускаете версии как последовательность поэтапных изменений вместо внезапного большого взрыва. Обычно компания, производящая десктопное ПО, может выпустить одну или две версии за год. Для Viaweb мы часто делали три-пять версий в день.

Когда вы переходите к этой новой модели, то понимаете как много в процессе разработки ПО зависит от порядка выпуска версий. Множество отвратительнейших проблем, которые можно заметить в бизнесе разработки персонального ПО, связано с катастрофическим характером выпуска версий.

Когда вы выпускаете только одну новую версию в год, вы работаете с багами оптом. Некоторое время до даты релиза вы собираете новую версию, в которой половина кода уже вырвана и заменена, с кучей новых багов. После этого команда контроля качества приступает к их подсчету, а программисты начинают по списку их устранять. Обычно они не доходят до конца списка, и на самом деле никто не знает где этот конец. Это как чистить пруд от камней. Вы никогда точно не знаете что происходит внутри приложения. В лучшем случае вы заканчиваете с некоторой вероятностной характеристикой качества.

В случае приложения на сервере большинство изменений небольшие и последовательные. Так что сами по себе уменьшают возможность багов. Также это означает, что вы точно знаете что необходимо тестировать наиболее тщательно когда выпускаете новую версию: то, что делалось в последнюю очередь. Вы заканчиваете выпуск версии с намного более уверенным контролем ситуации. В целом вы точно знаете что происходит в коде. Вы не заучиваете наизусть исходники, но когда вы читаете их, то делаете это как пилот, считывающий показания приборов на панели, а не как детектив, пытающийся распутать клубок загадок.

Персональный софт воспитывает определенный фатализм по отношению к багам. Вы знаете, что поставляете его с багами, и даже определяете механизмы их устранения (например, патчи исправлений). Так чего ради беспокоиться, что их будет немного больше? И вскоре вы обнаруживаете, что все элементы, о которых вы знаете, не работоспособны. Apple в этом году столкнулась с такой ситуацией. Они чувствовали нажим по отношению к выпуску новой версии операционной системы, который уже четыре раза откладывался, но некоторые составляющие (поддержка CD и DVD) еще не были готовы. И решение? Они выпустили версию без этих составляющих, и пользователи будут устанавливать их позднее.

Приложения на веб-серверах вы не обязаны запускать, пока они не заработают, и вы можете опубликовать их сразу как только закончите работу.
Опытные коллеги могут подумать: да, это отлично звучит, если говорить, что вы не обязаны выпускать ПО, пока оно не будет работать, но что будет если вы пообещали выпустить новую версию к определенной дате? С веб-приложениями вы не обязаны давать таких обещаний, потому что версий как таковых нет. Ваше приложение изменяется постепенно и непрерывно. Некоторые изменения могут быть более значительны, чем другие, но подход с выпуском версий не гармоничен веб-приложениям.

Если кто помнит Viaweb, это может звучать странно, поскольку мы всегда анонсировали новые версии. Это делалось исключительно для целей PR. Деловая пресса, как мы поняли, оперирует номерами версий. Они выделяют вам разворот, если версия обновленная, то есть, если первая цифра в номере версии увеличилась, и только параграф, если версия для доработок, где изменения в номере после точки.

Некоторые из наших конкурентов предлагали персональное ПО с действительными номерами версий. Для таких версий само это, что кажется нам очевидным фактом их отсталости, позволяет получить всю возможную информационную поддержку. Мы не хотели упускать эту возможность, и тоже стали присваивать номера версий нашим приложениям. Когда мы хотели прорекламировать, мы собирали список всех разработок, которые были добавлены с прошлой «версии», лепили новый номер версии на приложение и выпускали пресс-релиз, информирующий о доступности новой версии. Поразительно, что никто не звонил нам по этому поводу.

К тому времени когда нас купили, мы проделали это три раза, и были на версии 4. Версии 4.1, если не подводит память. После того, как Viaweb стал Yahoo Store, острая необходимость в популяризации отпала, и хоть система и продолжала эволюционировать, сама идея с номерами версий была тихо похоронена.

### Баги

Еще одним сильным техническим преимуществом веб-приложений является то, что вы можете воспроизвести бОльшую часть багов. Данные пользователей лежат прямо у вас на диске. Если у кого-то происходит сбой в вашем приложении, вы не обязаны пытаться угадать что там произошло, как это было бы в случае персонального ПО: вы можете воспроизвести сбой прямо во время телефонного разговора с ними. Вы даже можете уже знать об этом, если ваше приложение имеет сервис оповещения о сбоях.

Веб-приложения работают круглосуточно, поэтому код, который вы дописали, немедленно попадает в мясорубку. Баги проявляются быстро.

Разработчиков часто упрекают в том, что они отлаживают свой софт на пользователях. И я хочу высказаться в защиту этого. Для веб-приложений это на самом деле хорошая идея, потому что багов меньше, и они лёгкие. Когда вы часто выпускаете новые версии, то получаете намного меньше багов. А когда вы можете немедленно воспроизвести ошибку и мгновенно выпустить ее исправление, вы можете найти и исправить большую часть багов как только они проявят себя. У нас никогда не было одновременно такого количества багов, которого было бы достаточно для того, чтобы мы задумались о полноценной системе баг-трекинга.

Конечно, вы обязаны тестировать доработки, прежде чем выпускать их в промышленную систему, поэтому серьезных багов в релизе появляться не должно. Те немногие, которые неминуемо проскользнут, будут проявляться только в нестандартных условиях у небольшой группы пользователей, которые успеют столкнуться с этими багами пока никто еще не успел пожаловаться. И если вы устраняете ошибки сразу, то в результате среднестатистический пользователь увидит намного меньше багов. Думаю, что среднестатистический пользователь Viaweb вообще никогда не видел ошибок.

Устранение свежих ошибок намного легче, чем устранение старых. Как правило, значительно легче искать ошибку в коде, который вы только что написали. Когда ошибка появляется, вы часто можете определить что не так даже до того, как полезете в код, потому что это еще находится в подсознании. Исправление бага в коде, который вы написали полгода назад (средний срок, если версия выпускается раз в год), потребует намного больше усилий. И так как вы уже не чувствуете код так же хорошо, скорее всего, вы сделаете исправление не лучшим образом, а то и добавите других багов. [^5-4]

Когда баги ловятся на ранних этапах, вы получаете меньше составных багов. Составные баги — это два отдельных бага, которые взаимодействуют друг с другом: вы спускаетесь вниз по лестнице, и когда вы цепляетесь за перила, то они остаются у вас в руке. В софте этот вид багов самый трудный для обнаружения, и кроме того, имеет свойство приносить худшие последствия. [^5-5] Традиционный подход «сломай все и баги отсеятся» сам по себе генерирует множество составных багов. Непрерывный выпуск мелких версий не приводит к этому. Полы все время чисто подметены от любых потерянных мелочей, которые впоследствии могут в чем-нибудь застрять.

В этом помогает техника функционального программирования. ФП значит избегать побочных эффектов. Это что-то, более подходящее для научных исследований, чем для коммерческого ПО, но в случае веб-приложений оно превращается в по-настоящему полезную идею. Целиком программу трудно написать в чисто функциональном коде, но вы можете писать в таком стиле отдельные блоки. Такие части вашего приложения легче тестировать, поскольку у них нет состояния, а это очень удобно в случае, когда вы постоянно делаете и тестируете небольшие изменения. Я написал большую часть редактора Viaweb в таком стиле, и мы создали собственный скриптовый язык RTML как чисто функциональный язык.

Тем, кто работает в бизнесе по производству персонального ПО, в это трудно будет поверить, но в Viaweb баги становятся почти игрой. Поскольку большая часть багов в промышленной версии выявляется в исключительных случаях, пользователи, которые находят их, продвинутые.

Продвинутые пользователи более терпеливы по отношению к багам, особенно если баги появляются в процессе добавления какого-либо нового свойства приложения, которое они попросили добавить. В самом деле поскольку баги возникают очень редко, и вы должны проделать какие-то сложные действия, чтобы увидеть их, продвинутые пользователи часто гордятся такими находками. Они звонят в поддержку скорее в настроении триумфатора, чем в гневе, как будто набирают очки.

### Поддержка

Когда вы можете воспроизвести ошибки, это меняет ваш подход к поддержке. В большинстве компаний-разработчиков поддержка предлагается как способ сделать ощущения пользователей получше. Или они звонят вам об известном баге, или просто делают что-то неправильно, и вы пытаетесь сообразить что именно. В этих случаях вы ничему особенному не учитесь. Так что вы начинаете рассматривать звонки в поддержку как занозы в заднице, и хотите оградить от них своих разработчиков насколько возможно.

Не так это устроено в Viaweb. В Viaweb поддержка бесплатна, потому что мы хотим слышать наших потребителей. Если у кого-то из них проблема, мы хотим знать об этом немедленно, чтобы воспроизвести ошибку и выпустить исправление.

Так что в Viaweb разработчики всегда были в тесном контакте с поддержкой. Сотрудники поддержки сидели в десяти метрах от программистов, и они знали, что могут в любой момент побеспокоить сообщением о новом баге. Мы могли прервать совещание совета директоров ради исправления серьёзной ошибки.

Наш подход к поддержке нравился всем. Покупатели были в восторге. Только представьте себе это чувство, когда вы звоните на горячую линию, и вас слушают как источника очень важных новостей. Сотрудникам поддержки нравилось это, потому что это означало, что они могут помочь пользователям, вместо того, чтобы зачитывать им сценарии. И программистам это нравилось, потому что они могли воспроизвести ошибки, вместо того чтобы получать об этом смутные отчеты из вторых рук.

Наша политика устранения ошибок на лету изменила отношения между сотрудниками поддержки и высококлассными программистами. В большинстве компаний в поддержке работают низкооплачиваемые «вахтеры», а программисты — это маленькие копии Бога-Отца, творцы Вселенной. Какова бы ни была процедура сообщения об ошибках, она, скорее всего, направлена в одну сторону: сотрудник поддержки, который получил сведения об ошибке, записывает их в какую-либо форму и через некоторое время пересылает (возможно через службу качества) программистам, которые ставят их в план работы. Это было совершенно не так в Viaweb. В течение минуты после получения сообщения об ошибке от пользователя сотрудник поддержки мог уже стоять рядом с программистом и слышать от него «Черт, ты прав, это баг». Сотруднику поддержки было очень приятно услышать «ты прав» от суперспециалиста. Они привыкли приносить нам баги с тем же выражением лица, которое бывает у кота, несущего вам только что убитую мышь. Это также делало их более осторожными в оценках важности ошибки, потому что их реноме ставилось на карту.

После того, как мы были куплены Yahoo, сотрудники поддержки переехали далеко от программистов. Только тогда мы почувствовали что они были фактически сотрудниками службы качества и в некоторой степени маркетинга. Помимо отлова багов они были хранителями знаний о неясных багоподобных штучках, которые путали пользователей. [^5-6] Еще они были в некотором роде фокус-группой представителей пользователей; мы могли спросить их какую из двух новых фич пользователи хотят больше, и они всегда оказывались правы.


[^5-1] Понимая, что бОльшая доля денег в предоставлении услуг, компании, разрабатывающие тонкие клиенты, обычно пытаются объединять аппаратные решения с онлайн-решениями. Этот подход не очень хорош, частично из-за того, что вам необходимы две различных фирмы, одна из которых будет разрабатывать аппаратную часть, а вторая предоставлять онлайн-услуги, и частично потому что пользователи ненавидят эту идею. Продавать дёшево бритвы и зарабатывать потом на продажах лезвий может себе позволить Gilette, но бритва — это намного меньшее вложение, чем веб-терминал. Компаниям, продающим мобильные телефоны, хватает выручки от продажи устройств, и они не пытаются получить весь доход от телефонной связи. Вероятно это должно быть моделью и для интернет-устройств. Если кто-то просто продаёт красивую маленькую коробочку с веб-браузером, которую вы можете использовать с любым интернет-провайдером, каждый обыватель купит себе такую.

[^5-2] Безопасность всегда боится ошибок, больше, чем любые другие проектные решения, но характер серверного ПО заставляет разработчиков уделять ещё больше внимания защите от взлома. Компрометация сервера может нанести такой значительный ущерб, что провайдеры приложений (которые не хотят прогореть) должны позаботиться о безопасности.

[^5-3] В 1995 году, когда мы начинали Viaweb, Java-апплеты рассматривались как технология, которую все будут использовать для разработки серверных приложений. Нам апплеты казались устаревшей идеей. Загружать для запуска программы на клиента? Проще дойти до логического конца и запускать программы на сервере. Мы немного потратили времени на апплеты, но исчезающе мало по сравнению с другими стартапами, которых заманили в эту смоляную яму. Немногие смогли оттуда выбраться живыми, или Microsoft не смогла сбежать, выбросив поддержку Java из своих последних версий IE.

[^5-4] Эта идея от Тревора Блекуэлла (Trevor Blackwell), который добавил «стоимость создания ПО растет быстрее, чем его размер. Воможно это главным образом по причине необходимости исправления старых багов, и рост стоимости будет ближе к линейному, если все баги будут отыскиваться немедленно.»

[^5-5] Баг, который найти труднее всего, может быть видом составного бага, когда действие одного бага компенсируется действием другого. Когда вы исправляете один баг, другой проявляет себя. Но кажется, что исправление является причиной ошибки, так как это последнее изменение, которое вы сделали только что.

[^5-6] В Viaweb однажды мы устроили соревнование на описание худшей проблемы в нашем софте. Два сотрудника поддержки разыграли между собой первый приз, указав на такие вещи, которые я до сих пор вспоминаю с содроганием. Мы тут же устранили эти ошибки.


### Подход к делу

Иметь возможность выпускать программу незамедлительно — существенный мотиватор. Часто по пути на работу я думал об изменениях, которые мне хотелось внести в приложение, и вносил их в тот же день. Это также работало и для более крупных фич. Даже если на написание чего-то требовалось две недели (а на некоторых проектах и того больше), я знал, что смогу увидеть результат как только все будет реализовано.

Если бы мне приходилось ждать год до следующего релиза, я бы большинство таких идей отложил в долгий ящик, по крайней мере, на некоторое время. Дело в том, что, все-таки, идеи приводят к другим идеям. Вы когда-нибудь замечали, что, как только вы садитесь что-то написать, половина воплощенных в работе идей — это те идеи, которые посетили вас в процессе? То же самое происходит и с программами. Работа над реализацией одной идеи дает вам еще больше идей. Поэтому за откладывание вы заплатите не только задержкой в реализации своей идеи, но также и всеми идеями, к которым вы придете на данном этапе. На самом деле, откладывание препятствует появлению новых идей: как только вы начинаете размышлять о каком-то новом функционале, вы вспоминаете про свой «ящик» и думаете: «Но у меня же уже куча фишек для реализации в следующем релизе».

Крупные компании вместо реализации фич планируют их. По этой причине мы в Viaweb иногда сталкивались с трудностями. Инвесторы и аналитики спрашивали нас о том, что мы запланировали на будущее. Нашим настоящим ответом было бы: «У нас вообще нет планов». У нас были общие представления о том, что бы мы хотели улучшить, но если бы мы знали как, то уже давно бы это сделали. Что мы собираемся делать с течении следующих шести месяцев? Все, что могло бы привести нас к максимально выигрышному положению. Не знаю, осмелился бы я когда-нибудь так ответить, но такова была правда. Планы — это всего лишь синоним к слову «идеи». Когда нас посещали хорошие идеи, мы реализовывали их.

В Viaweb, так же как и во многих других компаниях по разработке программного обеспечения, большинство кода имеет одного определенного владельца. Но если вам что-то принадлежит, то вы реально этим обладали: никто, за исключением владельца части программы, не может дать разрешение на ее релиз (или даже знать об этом). Как таковой защиты от поломок, кроме как страха выглядеть идиотом перед своими коллегами, не было, но и этого было более чем достаточно. Я, возможно, создал ложное представление о том, что мы просто безмятежно двигались вперед создавая код. Мы и правда быстро продвигались, но мы тщательно все продумывали перед тем, как выложить приложение на серверы. В плане надежности внимание важнее медленного продвижения. Именно благодаря повышенному вниманию к процессу военный летчик может ночью посадить 40 000 фунтовый самолет на скорости 140 миль в час на раскачивающуюся палубу авианосца, и при этом риска будет меньше, чем при разрезании хлеба среднестатистическим подростком.

Конечно, такой способ написания программ — это палка о двух концах. Он намного лучше работает в маленьких командах из хороших, надежных программистов, а не в больших фирмах с посредственными работниками, где плохие идеи отсеиваются на собраниях, а не людьми, к которым они приходят.

### Теория Брукса наоборот

К счастью, веб-приложения требуют меньшего количества программистов. Однажды, я работал в средних размеров фирме по разработке приложений для настольных компьютеров, в которой в техническом отделе, в целом, насчитывалось более ста человек. Лишь 13 из них были задействованы в разработке продукта. Все остальные работали над релизами, портированием и т. п. С веб-приложениями все, что вам нужно (по большей части), это 13 человек, потому что нет ни релизов, ни портирования, ничего такого.

Viaweb был написан всего тремя людьми. [^5-7] Я очень старался нанять еще, потому что нам хотелось, чтобы нас купили, а мы знали, что было бы нелегко убедить покупателей заплатить высокую цену за фирму с тремя программистами. (Решение: мы наняли еще людей, но создали для них новые проекты.)

Когда вы пишете программы, имея в штате меньшее количество программистов, то вы экономите больше, чем только деньги. Как заметил Фред Брукс в своей книге «Мистический человеко-месяц», увеличение числа людей в проекте ведет к его замедлению. Количество возможных связей между разработчиками растет экспоненциально с увеличением размера группы: чем она крупнее, тем больше времени будет потрачено на обсуждение того, как приложения будут совместно работать, и тем больше ошибок проявится из-за непредвиденных зависимостей. К счастью, этот процесс также работает и в обратном направлении: чем меньше группа, тем выше по экспоненте растет эффективность процесса разработки приложений. Я не могу припомнить, чтобы программисты в Viaweb организовывали настоящие собрания. Мы никогда за раз не говорили больше, чем могли сказать по пути на обед.

Если тут и есть какой-то недостаток, то он состоит в том, что все программисты в некоторой степени должны также быть и системными администраторами. Когда вы разворачиваете приложение, кто-то должен наблюдать за серверами и, практически, единственные люди, кто это может сделать правильно, это те, кто это приложение и написал. В Viaweb наша система содержала в себе так много компонентов и менялась так часто, что не было четкой границы между приложением и инфраструктурой. Своевольное утверждение такой границы ограничило бы нас в выборе проектных решений. И поэтому, хотя мы постоянно надеялись, что однажды («через пару месяцев») все будет достаточно стабильно работать, чтобы мы могли нанять кого-нибудь, в чьи обязанности входило бы только забота о серверах, но этого так и не произошло.

Не думаю, что тут есть другой выход, пока вы все еще активно разрабатываете продукт. Веб-приложения никогда не станут тем, что вы пишете, сохраняете в репозиторий и идете домой. Это нечто живое, выполняющееся на ваших серверах прямо сейчас. Жуткий баг может не только уничтожить один из пользовательских процессов, но также он может уничтожить их все. Если ошибка в вашем коде разрушает некоторые данные на диске, то вы должны это исправить. И т. д. Мы выяснили, что нет необходимости проверять серверы каждую минуту (после первого года или около того), но вам определенно захочется следить за тем, что вы недавно изменили. Нельзя выпустить код поздно ночью, а потом уйти домой.

### Наблюдение за пользователями

В серверном приложении вы находитесь в более тесном контакте со своим кодом. И вы также можете быть в более тесном контакте со своими пользователями. Intuit известен тем, что знакомит клиентов со своими решениями в розничных магазинах и просит зайти на их сайт из дома. Если вы когда-либо наблюдали за тем, как кто-то использует ваше приложение в первый раз, то вы знаете, какие сюрпризы, должно быть, его поджидали.

Приложение должно выполнять то, что, как думают пользователи, оно и должно делать. Но вам и в голову не придет то, что в голове у пользователей, уж поверьте, пока вы за ними не пронаблюдаете. А серверные приложения предоставляют вам информацию об их поведении без какой-либо конкретики. Вы не ограничены маленькими, искусственными фокус-группами. Вы можете увидеть каждый клик, сделанный каждым пользователем. Вам придется тщательно определить, на что вы собираетесь смотреть, потому что вы же не хотите нарушить частную жизнь людей, но даже наиболее общий статистический пример может быть довольно полезен.

Когда на вашем сервере есть пользователи, вам не нужно полагаться, например, на бенчмарки, которые являются эмуляцией пользователей. С серверными приложениями вы можете наблюдать за реальными пользователями. Чтобы решить, что оптимизировать, просто залогиньтесь на сервере и посмотрите, что потребляет все процессорное время. И вам также известно, когда завершить оптимизацию. Мы в итоге довели редактор Viaweb до такой точки, когда он стал больше зависеть от объема памяти, а не от быстродействия процессора, и, поскольку мы ничего не могли сделать для уменьшения размеров пользовательских данных (ну, ничего того, что считалось простым), мы знали, что надо бы на этом остановиться.

Для серверных приложений производительность имеет значение, потому что вы платите за оборудование. Число пользователей, которое вы можете поддерживать на одном сервере, является делителем ваших капитальных затрат, поэтому, если вы можете создать довольно производительное приложение, то вы сможете предоставлять его по цене ниже, чем у конкурентов, и получить прибыль. В Viaweb наши капитальные затраты в расчете на одного пользователя снизились до 5$. А сейчас они бы могли бы быть и еще меньше. Возможно, меньше, чем отправка счета за первый месяц. Сейчас оборудование вам ничего не стоит, если ваши приложения достаточно производительны.

Наблюдение за пользователями может привести вас к вопросам как проектирования, так и оптимизации. В Viaweb используется скриптовый язык RTML, который позволил продвинутым пользователям определять стиль их личных страниц. Мы выяснили, что RTML стал своего рода журналом отзывов и предложений, т.к. пользователи использовали его только тогда, когда готовые стили страниц не могли реализовать то, что им хотелось. Например, изначально редактор размещал панель с кнопками поперек страницы, но после того, как некоторое число пользователей воспользовались RTML для размещения кнопок внизу слева, мы реализовали такую опцию (по умолчанию) в готовых стилях страницы.

И, наконец, наблюдая за пользователями, часто можно определить, когда они испытывают трудности. И, т.к. клиент всегда прав, это является признаком того, что вам нужно исправить. В Viaweb ключевым моментов в понимании пользователей был пробный запуск онлайн. Это была не просто последовательность слайдов, составленных маркетологами. В нашем тестовом запуске пользователи реально использовали приложение. Это заняло около 5 минут, и в итоге они создали настоящий работающий магазин.

Именно через этот тестдрайв мы поняли, что нужно почти всем нашим новым пользователям. Полагаю, результат был бы таким же для большинства веб-приложений. Если пользователи могут успешно пройти тестовый запуск, то им понравится продукт. Если они запутаются или заскучают, то нет. Поэтому, все, что мы могли сделать для привлечения большего числа людей с помощью тестового запуска, увеличило бы наши темпы роста.

Я изучал историю переходов по ссылкам людей, участвующих в тестовом запуске и выяснил, что на определенном шаге они запутывались и кликали мышью на кнопку браузера «Назад». (Если вы попробуете написать веб-приложение, то обнаружите, что кнопка «Назад» переходит в разряд одной из самых интересных философских проблем.) Поэтому я добавил в этом месте сообщение, разъясняющее пользователям, что они практически закончили, и чтобы они не нажимали на кнопку «Назад». Еще одна замечательная вещь в веб-приложениях это то, что вы получаете мгновенную реакцию на изменения: число людей, завершивших тестовый запуск, тут же возросло с 60% до 90%. А поскольку число новых пользователей зависит от числа завершивших тестдрайв, наш доход вырос на 50% только из-за этих изменений.

### Оплата

В начале 90-х годов я прочел статью, в которой кто-то сказал, что программное обеспечение — это бизнес на основе подписки. Поначалу это утверждение показалось очень циничным. Но потом я осознал, что это отражает реальность: разработка программного обеспечения — это непрерывный процесс. Полагаю, что будет честнее, если вы открыто обозначите стоимость подписки вместо того, чтобы вынуждать людей покупать и устанавливать новые версии, чтобы они продолжали вам платить. И, к счастью, подписка — это естественный способ оплаты веб-приложений.

Хостинг приложений — это область, где фирмы будут играть роль в такой нише, которая вероятнее всего не будет заполнена бесплатным ПО. Хостинг приложений — это большой стресс, и тут придется потратиться. Никто не захочет делать это бесплатно.

Для компаний веб-приложения — это идеальный источник дохода. Вместо того, чтобы начинать каждый квартал с чистого листа, у вас будет периодический доход. Поскольку ваше приложение раскручивается постепенно, вам не нужно беспокоиться, что новая модель потерпит крах; новая модель, как таковая, и не будет нужна, и если вы внесете в приложение нечто, что пользователи воспримут в штыки, то вы тут же узнаете об этом. У вас нет проблем со счетами, неподлежащих оплате: если кто-то не будет платить, вы просто отключаете сервис. Тут также отсутствует возможность для пиратства.

Это последнее «преимущество» может вылиться и в проблему. Некоторая пиратская активность выгодна компаниям по разработке программного обеспечения. Если какой-то пользователь и вправду не купил бы ваше приложение ни за какую цену, вы бы ничего не потеряли от того, что он использует пиратскую копию. В действительности, вы даже выигрываете от этого, т. к. он является еще одним пользователем, помогающим сделать ваше приложение эталонным, или который сможет купить копию приложения позже, когда закончит университет.

Компании по возможности любят проводить ценовую дискриминацию, что означает назначить каждому клиенту как можно более высокую цену, какую только можно позволить. [^5-8] Программное обеспечение особенно подходит для ценовой дискриминации, т. к. предельные затраты близки к нулю. Вот почему некоторые приложения для запуска на компьютерах Suns стоят больше аналогов для Intel: фирма, использующая Suns, не заинтересована в экономии денег и может заплатить больше. Пиратство, в сущности, является низшим уровнем ценовой дискриминации. Думаю, что компании по разработке ПО это понимают и намеренно не замечают некоторые виды пиратства. [^5-9] Что касается серверных приложений, то для них придумают другое решение.

Веб-приложения хорошо продаются, особенно в сравнении с десктопным ПО, потому что его легко купить. Вы могли бы подумать, что решение людей что-то купить, и последующая покупка — это два отдельных шага. Так я думал раньше в Viaweb, по мере того, как размышлял на эту тему в принципе. На самом деле, второй шаг может перейти обратно в первый: если что-то сложно купить, люди начнут сомневаться, а надо ли им это. И наоборот: вы больше продадите, если это легко купить. Я покупаю больше книг, потому что существует Amazon. Веб-приложение просто самая простая в мире вещь, которую можно купить, особенно если вы только что сделали онлайн демо-версию. Пользователи не должны совершать много действий, а только вводить номер кредитной карты. (Вынуждайте совершать их больше действий на свой страх и риск.)

Иногда веб-приложения распространяются через интернет-провайдеров, выступающих в качестве реселлеров. Это плохая идея. Вам придется заниматься управлением серверов, потому что вам нужно постоянно улучшать как аппаратное, так и программное обеспечение. Если вы упустите непосредственный контроль над серверами, вы упустите большинство преимуществ разработки веб-приложений.

Некоторые из наших конкурентов таким образом зарубили сук, на котором сидели. Обычно, как я полагаю, это происходило потому, что у них был излишек членов правления, которые обрадовались такому огромному потенциально прибыльному каналу, и не осознали, что это уничтожит продукт, который они надеялись через него реализовать. Продавать веб-приложения через интернет-провайдеров — это как продавать суши посредством вендинговых автоматов.

### Клиенты

Кем будут ваши клиенты? Для Viaweb это изначально были частные лица и небольшие фирмы, и, как мне кажется, в веб-приложениях это станет устоявшимся правилом. Такие пользователи готовы попробовать что-то новое частично потому, что они более гибкие, и отчасти потому, что они хотят меньше тратиться на новые технологии.

Также веб-приложения часто будут рассматриваться как наилучший вариант для крупных компаний (хотя те будут медленно это осознавать). Лучшая компьютерная сеть предприятия – это Интернет. Если фирма использует настоящие веб-приложения, то приложения будут лучше работать, за серверами будут лучше следить, а работники будут иметь доступ к системе откуда угодно.

Аргументы против такого подхода обычно тесно связаны с безопасностью: если для работников доступ упрощен, то таковым он будет и для злоумышленников. Некоторые более крупные продавцы неохотно использовали Viaweb, потому что они полагали, что информация о кредитных картах клиентов будет в большей безопасности на их собственных серверах. Нелегко было это решить дипломатичным путем, но в действительности данные почти наверняка безопаснее было хранить на нашей стороне, а не на их. Кто может нанять лучших людей для управления безопасностью: технологичный стартап, чей бизнес полностью работает на серверах, или продавец одежды? У нас не только лучшие люди, отвечающие за безопасность, но и мы сами уделяем ей больше внимания. Если кто-то взломает серверы продавца одежды, то это повлияет в основном на одну торговую фирму, а это дело, возможно, замнут, и, в худшем случае, уволят одного человека. Если кто-то взломает наши сервера, то это повлияет на тысячи торговых фирм, и, возможно, все окажется в новостях по CNet, и мы потеряем свой бизнес.

Если вы хотите сохранить ваши деньги, то вы храните их под матрасом у себя дома, или отдаете в банк? Это применимо к любому аспекту управления серверами: не только к безопасности, но и ко времени безотказной работы, пропускной способности, управлению нагрузкой, резервному копированию, и т.д. Наше существование зависит от правильного выполнения перечисленных вещей. Наличие проблем с сервером были для нас абсолютно недопустимы, как для создателя игрушек недопустимы опасные игрушки, или вспышка сальмонеллеза для кухонного комбайна.

Крупные компании, которые используют веб-приложения, в некоторой степени передают часть IT-функций в аутсорс. Как бы резко это ни звучало, я считаю, что, в целом, это хорошая идея. Так у фирм больше шансов получить лучшее обслуживание, чем если бы они организовывали собственный штат системных администраторов, которые могут стать своенравными и невосприимчивыми, потому что они не подвергаются напрямую конкурентному давлению: продавец работает с клиентами, разработчик – с приложениями конкурентов, а у системного администратора, как у старого холостяка, в распоряжении всего несколько внешних факторов, удерживающих его на плаву. [^5-10] В Viaweb внешних факторов для удержания себя на плаву было в изобилии. Люди, звонящие нам, были клиентами, а не просто коллегами. Если сервер заклинивало, мы тут же подрывались; уже сама мысль об этом заставляет почувствовать всплеск адреналина, даже спустя годы.

Поэтому, обычно, веб-приложения будут верным решением и для крупных фирм. Однако до них это дойдет в последнюю очередь, как это было с настольными компьютерами. И частично по той же самой причине: убедить крупные компании в том, что им нужно кое-что более дорогое, будет стоить огромную кучу денег.

Всегда существует тенденция к тому, что богатые клиенты покупают дорогие решения, даже когда дешевые решения лучше, т. к. люди, предлагающие дорогие решения, могут потратиться даже больше, пытаясь их продать. Мы в Viaweb всегда были категорически против такого подхода. Мы потеряли нескольких торговых представителей высокого класса, которые ушли к компаниям по веб-консалтингу, убедивших их в том, что они будут в более выгодном положении, если они заплатят полмиллиона долларов за заказной онлайн-магазин на их собственном сервере. Как правило, в выгодное положение они так и не попадали, т. к. обнаружилось, что при наступлении сезона рождественских покупок на их сервер возрастала нагрузка. Viaweb представлял собой гораздо более сложный продукт, чем то, что было у большинства торговых представителей, но у нас не было возможности сообщить им об этом. Работая за $300 в месяц, мы не могли позволить себе направить к клиентам команду прилично одетых и влиятельных людей для презентации продукта.

Основную долю того, за что крупные фирмы платят повышенную цену, составляют затраты на продажу им дорогих вещей. (Если Министерство обороны платит 1000$ за сиденья для унитазов, то это отчасти из-за того, что требуется много средств для продажи сидений для унитазов за 1000$.) И это одна из причин, по которой интранет ПО продолжит процветать, даже если это и плохое решение. Оно просто дороже. И вы ничего не сможете с этим поделать, поэтому наилучшим планом действий будет обратить свое внимание сначала на более мелких клиентов. Все остальное приложится в нужное время.

### Сын сервера

Ничего нового в запуске приложение на сервере нет. В действительности, это устаревшая модель: все приложения для суперЭВМ являются серверными. Если серверные приложения — это такая хорошая идея, то почему она проиграла другим? Почему настольные компьютеры затмили суперЭВМ?

Поначалу настольные компьютеры не рассматривались как прямая угроза. Все первые пользователи были поголовно компьютерными специалистами или людьми увлеченными. Им нравились микроЭВМ, т. к. они были дешевле. Впервые у вас был свой собственный компьютер. Фраза «персональный компьютер» сейчас прочно вошла в обиход, но когда ее впервые использовали, она обладала намеренно ярким звучанием, как сегодня фраза «персональный спутник».

Почему настольные компьютеры победили? Полагаю потому, что их ПО было лучше. И считаю, что причина, по которой приложения для микрокомпьютеров были лучше, заключалась в том, что их могли написать маленькие фирмы.

Не думаю, что многие люди осознают, как хрупки и неуверены стартапы на ранней стадии. Многие стартапы начинаются почти случайно: пара молодых людей, либо с постоянной работой, либо школьники, пишут прототип чего-то, что могло, если это выглядело многообещающим, перерасти в фирму. В таком зачаточном состоянии любое значительное препятствие намертво заморозит стартап. Написание ПО для суперЭВМ требовало слишком много обязательств. Компьютеры для разработки ПО были дороги, и, т. к. клиентами были крупные фирмы, вам понадобился бы впечатляющий торговый персонал, чтобы им это продать. Начинать стартап по созданию ПО для суперЭВМ было бы гораздо более серьезным делом, чем просто совместное ковыряние программ на своем Apple II по вечерам. Поэтому и не было большого числа стартапов по созданию такого ПО.

Появление настольных компьютеров вдохновило на создание новых приложений, потому что разработка программ казалась достижимой целью для «зачаточных» стартапов. Разработка была дешевой, и клиентами были физические лица, с которыми можно было установить контакт через компьютерные магазины или даже торговлю по почте.

Приложение, которое перевело настольные компьютеры в господствующую тенденцию, называлось VisiCalc, первый редактор таблиц. Его написали на чердаке два парня, и оно творило такие вещи, которые ни одно приложение для суперЭВМ осуществить не могло. [^5-11] VisiCalc был в то время таким прорывом, что люди покупали Apple II только для того, чтобы запускать его. И это было началом нового тренда: настольные компьютеры победили потому, что стартапы создавали под них приложения.

Кажется, что серверные приложения были бы как нельзя кстати, т. к. стартапы их напишут. Сейчас компьютеры такие дешевые, что вы можете начать с того же, что и мы, т.е. использовать настольный компьютер в качестве сервера. Недорогие процессоры поглотили рынок рабочих станций (вы сейчас едва ли услышите это словосочетание) и по большей части через рынок серверов; серверы Yahoo, которые справляются с нагрузками, как и все прочие серверы в Интернет, все они оснащены недорогими процессорами Intel, что установлены в вашем настольном компьютере. И, когда вы написали приложение, все, что вам нужно продать, это веб-сайт. Почти все наши пользователи пришли напрямую на наш сайт посредством сарафанного радио и отсылками в прессе. [^5-12]

Viaweb был типичным «зачаточным» стартапом. Нам было страшно организовывать фирму, и, в течение первых нескольких месяцев успокаивали себя, воспринимая все это как эксперимент, который мы могли прервать в любой момент. К счастью, помимо технических были и другие проблемы. В ходе написания приложения наш веб-сервер играл роль настольного ПК, используемого в процессе разработки, и был соединен со всем остальным миром через телефонную линию связи. Единственными нашими тратами на данном этапе были еда и аренда.

Сейчас для стартапов еще больше причин для создания веб-приложений, потому что разработка ПО для настольных компьютеров уже не так интересна. Если сейчас вы хотите писать приложения для настольных компьютеров, то вы делаете это на условиях Microsoft, вызывая их API и работая с их глючной OS. И если вам удастся написать нечто такое, что выстрелит, вы, возможно, обнаружите, что вы просто занимались маркетинговыми исследованиями для Microsoft.

Если фирма хочет создать платформу, на основе которой будут реализовываться стартапы, то она должна быть такой, чтобы программисты сами захотели бы ее использовать. Что означает, что она должна быть недорогой и хорошо спроектированной. Когда Mac впервые появился, он был популярен среди компьютерных профессионалов, и многие из них писали под него приложения. [^5-13] В случае с Windows это было менее заметно, т. к. программисты ей не пользовались. Сейчас люди, которые хороши в разработке приложений, склонны к использованию Linux или FreeBSD.

Не думаю, что мы бы организовали стартап для создания ПО для настольных компьютеров, потому что такое ПО должно запускаться на Windows, а перед тем, как писать ПО под Windows, нам пришлось бы ей пользоваться. Веб позволяет обойти Windows, и предоставлять ПО, работающее на Unix, напрямую пользователям через браузер. Это отличный шанс, чтобы освободиться от зависимостей, что очень напоминает появление ПК 25 лет назад.

### Microsoft

Давным давно, когда появились настольные компьютеры, IBM был гигантом, которого все боялись. Сложно сейчас представить, но я очень хорошо помню это чувство. Сейчас же устрашающим гигантом выступает Microsoft, и я не думаю, что они не понимают угрозу, маячащей перед ними, как это делала фирма IBM. В конце концов, Microsoft намеренно начала вести свой бизнес в слепой зоне IBM.

Я как-то упоминал ранее, что, например, моей матери вообще не нужен настольный компьютер. И, вероятно, большинству пользователей это тоже не надо. Вот в чем проблема Microsoft, и они это знают. Если приложения запускаются на удаленных серверах, никому не нужна Windows. Что же будет делать Microsoft? Смогут ли они воспользоваться своим контролем над ПК, чтобы предотвратить появление или ограничить это новое поколение приложений?

Предположу, что Microsoft разработает некоторого сорта гибрид серверного и десктопного приложения, где операционная система работает совместно с серверами, которыми они управляют. Как минимум, файлы точно будут доступны пользователям, которым это надо. Не думаю, что Microsoft впадет в крайность и организует вычисления на сервере, где в качестве клиента будет выступать только браузер, если они могут этого избежать. Если в качестве клиента вам нужен только браузер, то на клиентской машине вам не нужен Microsoft, а если Microsoft не управляет клиентом, то они не смогут вынудить пользователей перейти на их серверные приложения.

Я считаю, что Microsoft будет сложно удерживать технологии в жестких рамках. Будет слишком много различных типов клиентов, чтобы обеспечивать контроль над ними всеми. А если приложения Microsoft работают только с некоторыми клиентами, конкурентам удастся их обскакать, предлагая приложения, работающие на любом клиенте. [^5-14]

В мире веб-приложений для Microsoft нет автоматически выделенного места. Они могут преуспеть в самостоятельном его создании, но не думаю, что они удержат лидирующие позиции в этом новом мире, как им это удалось в мире приложений для настольных ПК.

Дело не только в том, что их обставят конкуренты, но и в том, что они сами себе роют яму. По мере развития веб-приложений они столкнутся не только с техническими проблемами, но и со своим принятием желаемого за действительное. Им нужно поглотить свой текущий бизнес, и я представить не могу, что они пойдут на это. Та самая целеустремленность, которая их так далеко завела, теперь будет работать против них. IBM была в точно таком же положении, и ей не удалось с этим справиться. IBM сделала запоздалый и нерешительный выход на рынок микроЭВМ, потому что они испытывали двойственное чувство, ставя под угрозу свою дойную корову – использование суперЭВМ. Аналогично Microsoft будет стеснен в своих действиях, желая сохранить настольные решения. Надежный источник денег может превратиться в довольно тяжелую ношу.

Я не утверждаю, что никому не удастся доминировать в области серверных приложений. Вероятно, в конце концов, кто-то это сделает. Но я хочу сказать, что пройдет довольно много времени занятной неразберихи, прямо как на заре микроЭВМ. Это было хорошее время для стартапов. Многие мелкие фирмы расцвели, создавая крутые вещи.

### Больше, чем просто стартап

Классический стартап организуется быстро и без лишних формальностей, с малым штатом и бюджетом. Эти несколько человек упорно трудятся, а технологии усиливают эффект от принятых ими решений. Если они выигрывают, то выигрывают по крупному.

В стартапе по созданию веб-приложений все, что ассоциируется у вас со стартапами, доводится до крайности. Можно создавать и запускать продукт даже с меньшим количеством людей и даже с меньшим бюджетом. Только вам придется быть еще быстрее, и снизить уровень формальностей. Можно запускать продукт в буквальном смысле слова, с тремя людьми в гостиной чей-то квартиры, и сервером у интернет-провайдера. У нас все так и было.

Со временем команды стали меньше, быстрее, и более непринужденными. В 1960 под разработкой ПО подразумевалась комната, полная людей в очках с роговой оправой в узких черных галстуках, усердно пишущих по 10 строк кода в день в бланках для кодирования IBM. В 1980 это была команда из 8-10 человек, приходящих в офис в джинсах и печатающих в терминалах vt100. Теперь это пара парней, сидящих в гостиной с ноутбуками. (А джинсы оказались не самым последним пунктом в обеспечении атмосферы непринужденности и свободы.)

В стартапах много стресса, и, к сожалению, это также доводится до крайности в сфере веб-приложений. У многих компаний по разработке ПО, особенно в начале, были моменты, когда разработчики спали под столами и т.п. Тревожным сигналом может стать тот факт, что ничто не может препятствовать переходу этого явления в постоянную практику. Истории про то, как кто-то спит под столом, обычно заканчиваются так: и вот, наконец, мы сохранили все изменения и пошли домой, и отсыпались всю неделю. В веб-приложениях нельзя взять и внести все изменения. Вы можете работать по 16 часов в день так долго, как того захотите. А т.к. можете вы, и ваши конкуренты тоже, вы уже вынуждены это делать. Вы можете, поэтому вы должны. Закон Паркинсона наоборот.

Самое худшее это не количество отработанных часов, а ответственность. У программистов и системных администраторов традиционно разные заботы. Программисты должны думать о багах, а системные администраторы – об инфраструктуре. Программисты могут потратить ведь день, проведя его зарывшись в исходные коды, но в определенный момент им придется уйти домой и забыть обо всем этом. Системные администраторы никогда не оставляют работу на потом, но когда им приходит сообщение в 4 утра, им обычно не надо ничего довольно сложного делать. В мире веб-приложений эти два вида стресса комбинируются. Программисты становятся системными администраторами, но без четко определенных границ, которые обычно и делают работу терпимой.

В Viaweb мы провели первые 6 месяцев просто за написанием программы. Мы работали типичный удлиненный рабочий день стартапа на ранних стадиях развития. Будь мы в компании по разработке десктопных приложений, мы бы рассказывали, как усердно мы трудимся, но по ощущениям это сопоставимо с отпуском, если брать в сравнении со следующим этапом, где мы пустили пользователей на свой сервер. Вторым большим преимуществом (после денег) от продажи Viaweb компании Yahoo была возможность переложить всю ответственность за все это на плечи крупной фирмы.

Десктопные приложения вынуждают пользователей становиться системными администраторами. Веб-приложения вынуждают таковыми становиться программистов. В общей сумме стресса получается меньше, но его доля на программистов больше. Это не всегда плохо. Если вы затеяли стартап и конкурируете с крупной фирмой, то это хорошо. [^5-15] Веб-приложения предлагают прямой путь к тому, чтобы превзойти ваших конкурентов. А стартапы большего и не требуют.

### И так хорошо

Единственное, что может вас отпугнуть от создания веб-приложений, это убогость веб-страниц при использовании в качестве пользовательского интерфейса. Признаю, это проблема. Нам и правда хотелось добавить пару вещей в HTML и HTTP. Но на самом деле, важно то, что веб-страницы и так хороши.

Здесь прослеживается аналогия с первыми микроЭВМ. Процессоры в этих машинах на самом деле не были предназначены для использования в качестве центральных процессоров. Они были предназначены для использования в светофорах и т.п. Но люди вроде Эда Робертса, создателя Altair, поняли, что они хорошо подходили и для этих целей тоже. Можно было совмещать один из этих чипов с какой-нибудь памятью (в первом Altair было 256 байт памяти), добавить переднюю панель переключателей, и вот перед вами работающий компьютер. Возможность собрать свой собственный компьютер была такой захватывающей идеей, что появилась куча людей, которые хотели их купить, хотя их число и было ограничено.

Веб-страницы создавались не для того, чтобы служить интерфейсом веб-приложениям, но они и так хороши. А для значительного числа пользователей приложений, которыми можно воспользоваться из любого браузера, будет достаточно, чтобы действительно пересилить неприятие некоторой неповоротливости в UI. Может, у вас и не получается создать с помощью HTML самую красивую электронную таблицу, но вы можете создать такую таблицу, которой несколько людей могут пользоваться одновременно из различных мест без специального клиентского ПО, или которая может объединять реальные данные, или которая может присылать вам уведомление, когда срабатывают определенные условия. Что более важно, можно создавать новые виды приложений, у которых еще нет названий. VisiCalc был не просто приложением для суперЭВМ с версией для микроЭВМ, в конце концов, это был новый тип приложений.

Конечно, серверные приложения не обязаны быть веб-приложениями. У вас мог бы быть и какой-нибудь другой клиент. Но я уверен, что это плохая идея. Было бы очень удобно, если бы можно было допустить, что все установят ваш клиент. Так удобно, что вы могли бы легко себя убедить, что они все так и поступят, но если они не захотят, то вы будете повязаны по рукам и ногам. Поскольку веб-приложения не делают никаких предположений о клиентской стороне, она будут работать везде, где работает веб. А это уже большое преимущество, и оно будет только увеличиваться по мере распространения новых веб-устройств. Вы понравитесь пользователям, потому что ваше приложение просто работает, а ваша жизнь станет проще, потому что вам не придется настраивать его под каждого нового клиента. [^5-16]

У меня такое чувство, что я просмотрел эволюцию сферы веб также подробно, как и любой из нас, но я не могу предсказать, что произойдет с клиентским наполнением. Вероятно, грядет конвергенция, но в какой точке? Я не могу определить лидера. Единственное, что я могу предсказать, это разногласие между AOL и Microsoft. Чем бы в итоге ни оказалась технология Microsoft .NET, она, вероятнее всего, будет включать соединение ПК с сервером. Пока AOL не начнет качать права, их либо отодвинут в сторону, либо превратят в прослойку между клиентом Microsoft и серверным ПО. Если Microsoft и AOL затеют войну за клиента, единственное, что точно сработает для обоих, это просмотр веб-страниц, т.е. веб-приложения будут единственным ПО, которое работает везде.

Как это все разрешится? Я не знаю. А вам и не нужно знать, если вы сделаете ставку на веб-приложения. Никто не сможет сломать эту тенденцию без ограничения самой возможности просмотра веб-страниц. Вероятно, веб не единственный способ реализации приложений, но он сейчас единственный рабочий вариант, который продолжит работать еще долгое время. Веб-приложения дешевы в разработке и их просто распространять даже самому маленькому стартапу. Над ними нужно много работать, и испытать немало стресса, но это только повышает шансы стартапа.

### Почему бы и нет?

Э. Б. Уайта позабавил тот факт, что, как рассказал ему друг-фермер, многие изгороди с электрическим током на самом деле не находятся под напряжением. Когда коровы научились держаться от них подальше, уже не было необходимости пропускать ток через изгородь. «Вставайте, коровы! – писал он, – Идите на свободу, пока ваши тираны храпят!»

Если вы айтишник, который уже подумывал однажды начать стартап, то, вероятно, вас сдерживают две вещи. Первая – вы ничего не знаете о бизнесе. Вторая – вы боитесь конкуренции. Но ни одна из этих преград не подведена к электрическому току.

Вот две вещи, которые вы должны знать о бизнесе: сделать то, что пользователи полюбят, и зарабатывать больше, чем тратите. Если вы хорошо это усвоите, вы будете опережать большинство стартапов. Во всем остальном вы разберетесь по ходу дела.

Возможно, поначалу вы не сможете зарабатывать больше, чем тратите, но как только этот разрыв начнет достаточно быстро сокращаться, у вас все наладится. Если вы начнете с меньшим количеством денежных средств, то это, по крайней мере, поспособствует выработке привычки к бережливости. Чем меньше вы тратите, тем легче заработать больше своих трат. К счастью, запуск веб-приложения может очень дешево обойтись. Мы запустились с бюджетом меньше $10,000, а сегодня это еще дешевле. Нам пришлось потратить тысячи на сервер, и еще несколько тысяч на SSL. (Единственной фирмой, продающей SSL ПО в то время, была Netscape.) Сейчас вы можете арендовать гораздо более мощные серверы, уже с SSL, и заплатить за это меньше, чем пришлось заплатить нам только за полосу пропускания. Вы могли бы сейчас запустить веб-приложение за стоимость, меньшую стоимости хорошего офисного кресла.

Что касается создания того, что полюбят пользователи, тут есть несколько общих советов. Начните с создания чего-то понятного и простого, чем вы бы сами захотели воспользоваться. Быстро выпустите версию 1.0, и затем продолжайте улучшать приложение, внимательно прислушиваясь к пользователям по ходу дела. Клиент всегда прав, но разные клиенты правы насчет разных вещей; наименее опытные пользователи покажут, что нужно упростить и пояснить, а самые опытные укажут, какой функционал нужно добавить. Самое лучшее, что может делать приложение, это отличаться простотой, но чтобы этого добиться, нужно сразу верно определить все сценарии работы «по умолчанию», а не ограничивать пользователей в выборе. Не важничайте, если приложение конкурента вышло плохим; эталон, с которым нужно сравнивать свое приложение, это то, чем оно могло бы быть, а не то, что получилось у конкурентов. Все время пользуйтесь своим ПО. Viaweb был разработан как конструктор онлайн-магазинов, но мы также использовали его для создания и своего собственного сайта. Не слушайте маркетологов, дизайнеров и продуктовых менеджеров только из-за названия их должностей. Если у них есть хорошие идеи, воспользуйтесь ими, но это вам решать; приложения должны разрабатывать специалисты, которые понимают, что такое дизайн, а не дизайнеры, которые немного знают, что такое приложения. Если вы не можете ни спроектировать приложение, ни реализовать его, не надо запускать стартап.

А теперь давайте обсудим конкуренцию. То, чего вы боитесь, это не предполагаемые группы программистов как вы, а реальные фирмы, с офисами и бизнес-планами, продавцами и т.д., так ведь? Ну, они больше боятся вас, чем вы их, и правильно делают. Гораздо проще паре хакеров разобраться в том, как арендовать офисное помещение или нанять людей для ведения продаж, чем для фирмы любого размера написать приложение. Я побывал по обе стороны баррикад, и знаю, о чем говорю. Когда Viaweb был куплен фирмой Yahoo, я внезапно обнаружил, что я работаю на крупную компанию, и это было равносильно бегу по пояс в воде.

Я не хочу принижать Yahoo. У них было несколько хороших специалистов, менеджеры высшего звена были настоящими монстрами. Для крупной компании это редкость. Но все же, они продуктивны всего лишь на десятую долю маленького стартапа. И ни одна крупная фирма не сможет сделать лучше. Что в Microsoft пугает, так это то, что такая крупная компания вообще может разрабатывать приложения. Они как гора, которая может передвигаться.

Не давайте себя запугать. Вам под силу то, что не может Microsoft, и они могут сделать то, что у вас не получится. И никто вас не остановит. Вам не нужно спрашивать чье-либо разрешение на разработку веб-приложений. Вам не придется решать вопросы с лицензированием, или запрашивать место на полке розничных магазинов, или пресмыкаться перед владельцами ОС, чтобы ваше приложение вошло в ее состав. Вы можете предоставлять приложение напрямую через браузер, и никто не может встать между вами и потенциальными пользователями без закрытия веб сети.

Вы, может, и не поверите, но я гарантирую, что Microsoft боится вас. Самодовольные менеджеры среднего звена, может, и нет, но Билл точно, потому что он когда-то был на вашем месте, в далеком 1975 году, когда последний раз появился новый способ распространения ПО.


[^5-7]: Роберт Моррис написал систему заказов, которую покупатели использовали для размещения заказов. Тревор Блэквелл написал генератор изображений и менеджер, который продавцы использовали для просмотра заказов, статистики, настройки доменных имен, и т.д… Я написал редактор, которым пользовались продавцы для создания своих сайтов. Система заказов и генератор изображений были написаны на C и C++, менеджер — в основном на Perl, а редактор — на Lisp.

[^5-8]: Ценовая дискриминация так распространена (как часто вы слышали, чтобы розничный продавец заявлял, что их покупательская способность означала бы более низкие цены для вас?), что я был сильно удивлен, когда узнал, что в США законом Робинсона-Патмана 1936 года она объявлена незаконной деятельностью. К принятию такого закона, кажется, не особо-то и принуждали.

[^5-9]: Наоми Кляйн из No Logo говорит, что бренды одежды, пользующиеся популярностью у «городской молодежи», не особо-то и стараются предотвращать магазинные кражи, потому что в их целевом рынке магазинные воры также являются ведущими игроками в моде.

[^5-10]: Фирмы часто задаются вопросом, что отдать в аутсорс, а что нет. Один возможный ответ: отдавать в аутсорс любую работу, которая напрямую не подвергается конкурнтному давлению, потому что, таким образом, ее аутсорс подставит ее под это самое давление.

[^5-11]: Этими двумя парнями были Дэн Бриклин и Боб Фракстон. Дэн написал прототип на Basic за пару дней, затем в течении следующего года они работали вместе (в основном по ночам) над созданием более мощной версии, написанной на языке компьютера 6502. Дэн в то время учился в Гарвардской школе бизнеса, а Боб официально имел постоянную работу, где писал приложения. «В ведении своего бизнеса не было крупных рисков, – писал Боб, – Если не получится, то не получится. Ничего особенного».

[^5-12]: Это не совсем так просто, как я это озвучил. Потребуется много мучительного времени, чтобы сарафанное радио заработало, и у нас не было частых освещений в прессе, пока мы не наняли PR фирму (и правда лучшая в своем деле) за $16,000 в месяц. Однако, правда в том, что единственным значимым каналом был наш собственный сайт.

[^5-13]: Если Mac был такой крутой, почему он проиграл? Опять же, дело в цене. Microsoft сконцентрировался на создании ПО, и выпустила толпу поставщиков дешевых компонентов для оборудования Apple. Но это также не помогло, that suits took over during a critical period.

[^5-14]: Единственное, что помогло бы веб-приложениям, и удержало бы следующее поколение приложений от being overshadowed by Microsoft, это хороший open-source браузер. Mozilla является open-source браузером, но, кажется, пострадало от слишком длительного пребывания в амплуа корпоративного приложения. Маленький быстрый браузер, который активно бы поддерживали, уже само по себе было бы здорово, а также, возможно, вдохновило бы фирмы на реализацию небольших веб-устройств.
Кроме того, подходящий open-source браузер стал бы причиной дальнейшего развития HTTP и HTML (как, например, это было Perl). Это очень помогло бы веб-приложениям распознавать выделение ссылки и проход по ней; все, что для этого понадобится, будет банальным расширением HTTP, что позволит содержать несколько URL в запросе. Каскадное меню также было бы хорошо реализовать.
Если вы хотите изменить мир, напишите новую Mosaic. Думаете, слишком поздно? В 1998 многие люди думали, что слишком поздно запускать новый поисковый движок, но Google доказал обратное. Всегда есть место для чего-то нового, если текущие решения довольно убоги. Сначала убедитесь, что оно работает на всех бесплатных операционных системах, т.к. новое начинается с их пользователей.

[^5-15]: Тревор Блэквелл, который, возможно, из своего личного опыта знает об этом больше, чем кто-либо, пишет: «Я бы добавил, что, т.к. серверные приложения слишком суровы с программистами, это вызывает существенный экономический отток из крупных фирм. От программистов требуется некоторая энергия и преданность делу, которое они смогут проявить только тогда, когда это их собственная фирма. Фирмы по разработке ПО могут нанять опытных людей для работы в не особо требовательной среде, а могут нанять неопытных людей, чтобы они испытывали трудности, но они не могут нанять высококвалифицированных людей, чтобы те надрывались на работе. С тех пор как капитальные вложения перестали быть обязательным элементом, крупные фирмы мало чем могут заинтересовать.»

[^5-16]: В первоначальной версии этого эссе я советовал избегать Javascript. Такой план был хорош для 2001 года, но Javascript сейчас и правда работает. 






## Как стать богатым

(Это эссе было впервые опубликовано в книге Hackers & Painters, и в онлайне появилось только в декабре 2005 года.)

С чего бы вы начали, если бы вдруг решили разбогатеть? Я думаю, что самым лучшим решением было бы запустить новую компанию — стартап, или присоединиться к уже существующему. Этот способ показывает себя эффективным в течение сотен лет. Само слово “стартап” возникло в шестидесятые годы прошлого века, но то, что происходило в то время, было очень похоже на авантюрные торговые путешествия, которые предпринимались в средние века.

Обычно понятие стартап связано с высокими технологиями. Настолько сильно, что выражение “технологический стартап” — почти тавтология. Как правило, это небольшая компания, которая взялась за решение сложной технической проблемы.

Многие люди становятся богатыми, не зная ничего из того, о чем идет речь в этом эссе. Вам вовсе не нужно знать физику, чтобы быть хорошим торговцем. Однако, понимание некоторых основных принципов, может помочь. Почему стартапы должны быть маленькими компаниями? Обязательно ли они перестают быть стартапами, если вырастают? Почему они почти всегда занимаются разработкой новых технологий? Почему так много стартапов продают новые лекарства или программное обеспечение, и так мало подсолнечное масло или моющие средства?
Тезис

С экономической точки зрения к стартапу можно относиться, как к способу сжать всю вашу рабочую жизнь в несколько лет. Вместо того чтобы сорок лет работать не очень интенсивно, вы работаете четыре года настолько сильно, насколько это возможно. Это особенно важно в высоких технологиях, где успех зависит от скорости вашей работы.

Давайте порассуждаем. Предположим, что вы хороший хакер (в первоначальном, положительном смысле этого слова) 20-25 лет. Вы можете получить работу с зарплатой, например, около 80 000$ в год. Такой хакер должен выполнять работу, стоимость которой будет не меньше 80 000$ в год только для того, чтобы не быть своей компании в убыток. Положим теперь, что вы сможете работать в два раза больше, чем обычный служащий, и если вы будете работать достаточно сосредоточенно, то вы сможете сделать за час работы в три раза больше, чем обычно.[^6-1] Если избавиться от некомпетентного менеджера, стоящего над вами, то можно увеличить эффективность еще в два или три раза. Теперь подумайте, насколько вы на самом деле умнее и работоспособнее, чем это предполагается вашей должностью? Возможно, что в два или даже в три раза. Теперь сложите все эти множители, и я утверждаю, что вы можете быть в 36 раз продуктивнее, чем это ожидается на любой корпоративной работе.[^6-2] И если неплохой хакер в большой корпорации нарабатывает на 80 000$ в год, то отличный хакер, который работает очень интенсивно без всей этой корпоративной чуши, способен сделать работы на три миллиона.

Как и в других приблизительных расчетах, в моем тоже есть много места для маневра. Я не буду спорить, действительно ли цифры будут точно такими, как я сказал. Но я уверен, что схема вычислений верна. Я не утверждаю, что множитель равен именно 36, но он точно больше 10 и иногда даже приближается к 100.

Если три миллиона кажутся вам слишком большой суммой, то вспомните, что мы говорим о предельном случае: когда у вас не только нет свободного времени, но вы еще и работаете настолько интенсивно, что это может повредить вашему здоровью.

Стартапы — это не волшебство. Они не изменяют законов мироздания. Закон сохранения остается в силе: если вы хотите заработать миллион долларов, вам придется выдержать напряжение эквивалентное этой сумме. Например, одним из способов сделать миллион, является пожизненная работа в почтовом отделении, при которой вы будете вынуждены экономить каждый цент. Вообразите весь стресс пятидесятилетней работы на почте и сожмите его в четыре года. Разумеется, вы получите некоторую скидку, если купите весь этот стресс оптом. Но обмануть фундаментальный закон сохранения вы не сможете. Если бы начать стартап было легко, каждый бы делал это.

[^6-1]: Одна из самых замечательных вещей, которые присутствуют, по всей видимости, только в новых компаниях, это то, что вы можете работать ни на что не отвлекаясь. Если вы будете каждые пятнадцать минут отвелекать человека, который ищет ошибки в тексте, его производительность каждый раз будет немного уменьшаться. Но с программированием все еще хуже, часто нужно не меньше часа, чтобы только вникнуть в суть проблемы. Поэтому стоимость вызова вас в бухгалтерию для того, чтобы вы заполнили какую-нибудь форму, может быть очень высокой.

[^6-2]: Сталкиваясь лицом к лицу с идеей, что люди, работающие в молодых компаниях, могут быть в 20 или 30 раз производительнее тех, кто работает в больших корпорациях, менеджеры обычно интересуются, как можно сделать так, чтобы их сотрудники работали так же эффективно? Ответ простой: платите им.
Внутренее устройство многих компаний напоминает коммунистический режим. Если вы верите в свободный рынок, почему бы не сделать свою компанию похожей на него?
Гипотеза: компания будет максимально прибыльной, если будет оплачивать работу своих сотрудников пропорционально прибыли, которую они приносят.

### Миллионы — не миллиарды

Если для одних людей три миллиона могут показаться огромной суммой, для других это не так уж и много. Три миллиона? Скажите лучше, как мне стать миллиардером, таким как Билл Гейтс?

Ладно, оставим пока Билла Гейтса в покое. Не очень хорошо использовать знаменитостей в качестве примеров. В прессе обычно пишут о самых богатых, а они выбиваются из общей картины. Билл Гейтс умный, решительный и трудолюбивый человек, но быть таким недостаточно для того, чтобы заработать столько же денег, сколько есть у него. Кроме всего этого, вы еще должны быть очень удачливы.

В успехе любой компании присутствует большой элемент случайности. Парни, о которых читаешь в газетах, это умные и решительные люди, но кроме этого им удалось выиграть в лотерею. Билл Гейтс, несомненно, очень умный и очень целеустремленный товарищ, но Микрософт также посчастливилось извлечь пользу из одной из самых выдающихся ошибок в бизнесе: соглашения о лицензии DOS. Конечно, Билл сделал все, что было в его силах, чтобы IBM сделала эту ошибку, и он проделал отличную работу, однако, если бы на стороне IBM был хоть один человек с мозгами, будущее Микрософт могло бы быть совершенно другим. На этой стадии Микрософт имела лишь небольшое влияние на IBM. Фактически, они были поставщиками компонент. Если бы IBM потребовала эксклюзивную лицензию, как они и должны были бы сделать, Микрософт все равно бы заключила соглашение. Это бы все равно означало для них кучу денег, а IBM могла бы легко получить операционную систему где-нибудь в другом месте.

Вместо этого IBM использовала все свое влияние на рынке, чтобы позволить Микрософт контролировать стандарт PC. С этого момента Микрософт действовала как по намеченному плану. Им никогда не приходилось принимать рискованных решений. Они просто заняли жесткую позицию в отношении лицензий и производили инновационные продукты как можно быстрее.

Если бы IBM не сделала этой ошибки, Микрософт все равно была бы успешной компанией, но она бы не смогла вырасти так сильно и так быстро. Билл Гейтс был бы богатым, но он был бы где-нибудь внизу списка Forbes 400 вместе с другими богачами его возраста.

Есть много способов стать богатым, и это эссе только об одном из них. Это эссе о том, как делать деньги, создавая ценности. Есть куча других способов добыть денег, включая лотерею, спекуляцию, законный брак, наследство, воровство, вымогательство, мошенничество, взяточничество, подделку денежных знаков и так далее. Большинство величайших состояний, скорее всего, были сделаны с привлечением некоторых из этих методов.

Создание ценностей, как способ делать деньги, обладает преимуществом не только потому, что это более законно (множество других методов сейчас уже незаконны). Но и потому, что этот способ более прямой. Нужно просто делать то, что необходимо другим людям.
Деньги — не ценности

Если вы хотите создавать ценности, то нужно понимать что это такое. Ценности — это не то же самое, что деньги.[^6-3] Ценности существуют на протяжении всей человеческой истории. Деньги же были изобретены сравнительно недавно.

Ценности являются фундаментальным понятием. Это то, что нужно людям: еда, одежда, дома, машины, гаджеты, путешествия в интересные места и так далее. Вы можете быть богатым, даже если у вас нет денег. Если бы у вас было устройство, которое по вашему желанию могло сделать машину, или приготовить вам ужин, или постирать белье, или сделать что-нибудь еще, чтобы вы захотели, вам не нужны были бы деньги. Или, например, если бы вы были в Антарктиде, где нечего покупать, количество ваших денег тоже не имело бы значения.

Ценности — это то, что может удовлетворить ваши желания, это не деньги. Но почему, если ценности настолько важное понятие, все говорят о том, как делать деньги? Деньги — это способ обмена ценностями и на практике они взаимозаменяемы. Но это не одно и то же, и если вы не планируете стать фальшивомонетчиком, разговоры о том, как делать деньги могут только усложнить понимание того, как это сделать в действительности.

Деньги — это побочный эффект специализации. В специализированном обществе вы не сможете самостоятельно сделать большинство вещей, которые вам нужны. Если вам нужны картошка, карандаш, или жилье, вы получаете все это от других людей. А как можно заставить человека, который выращивает картошку, дать ее вам? Только дав ему то, в чем он нуждается в свою очередь. Однако, если мы будем напрямую обмениваться вещами с теми людьми, которые в них нуждаются, мы далеко не уйдем. Если вы делаете скрипки, и они не нужны ни одному из местных фермеров, что вы будете есть?

Решение, найденное обществом по мере того, как оно становилось все более специализированным, заключалось в том, чтобы разбить процесс торговли на два шага. Вместо того, чтобы напрямую обменивать скрипки на картофель, вы меняете их, скажем, на серебро, которое затем обмениваете на что-нибудь другое, в чем вы нуждаетесь. Промежуточное звено — посредник обмена — может быть чем угодно, что достаточно редко и что можно легко носить с собой. Исторически так сложилось, что для этой цели чаще всего использовались металлы, но сравнительно недавно они были заменены другим посредником, который называется доллар и в действительности физически не существует. Однако он может выступать в качестве посредника, потому что его ценность гарантированна правительством США.

Преимущество использования такого посредника в состоит в том, что он делает торговлю возможной. Недостаток же в том, что он часто заслоняет действительное значение торговли. Люди начинают думать, что бизнес — это делание денег. Но деньги — это всего лишь промежуточное звено, всего лишь эквивалент того, что на самом деле нужно людям. То, чем сейчас занимается большинство компаний – это производство ценностей. Они производят нечто, что нужно другим людям.[^6-4]

[^6-3]: До недавнего времени мне казалось, что даже правительство не понимает разницы между деньгами и ценностями. Адам Смит иногда говорил, что они пытаются сохранить богатство страны, запрещая экспорт серебра и золота. Но большое количество “посредника обмена” не сделает страну богаче. Если денег будет больше, чем материальных ценности, которые они представляют, то результатом будут только более высокие цены.

[^6-4]: У понятия “ценности” существует довольно много значений. Я не собираюсь сейчас выяснять какое из них более правильное. Здесь я обсуждаю несколько техническое значение этого слова. Ценности – это то, за что люди дают деньги. Это довольно интересный вид ценностей для изучения, потому что именно он позволяет вам не умереть от голода. И то, за что люди дают вам деньги, зависит от них, а не от вас.
Когда начинаешь свой бизнес, очень легко начать думать, что люди хотят то же, что и вы. Во время бума доткомов, мне довелось разговаривать с женщиной, которая очень любила гулять на свежем воздухе. И собиралась сделать портал, посвященный этой теме. Знаете, какой бизнес нужно открывать, если вы любите свежий воздух? Восстановление данных с поврежденных винчестеров.
Какая связь? Да никакой. Просто это моя точка зрения. Если хотите создавать ценности (или другими словами – не
голодать), будьте очень критичны к планам создать бизнес, связанный только с тем, что вам нравится делать.

### Миф Пирога

Удивительно большое количество людей еще с детства усваивают идею того, что в мире существует фиксированное количество богатства. Да, в любой нормальной семье в каждый момент есть какое-то определенное количество денег. Но это не одно и то же.

Когда о богатстве говорят в этом контексте, оно часто описывается в виде пирога. “Вы не можете сделать пирог больше, чем он есть”, говорят политики. Когда речь идет о деньгах в какой-то конкретной семье или о деньгах, собранных правительством с помощью налогов за год, это действительно так. Если один человек получает больше, кто-то другой должен получить меньше.

Я помню, когда я был маленьким, то верил, что если несколько богачей владеют кучей денег, то их меньше остается другим людям. Такое впечатление, что много людей продолжают верить во что-нибудь вроде этого, когда вырастают. Обычно этот пирог подразумевается всегда, когда вы слышите чьи-нибудь рассуждения о том, что X процентов людей владеет Y процентами богатств. Если вы планируете начать стартап, то хотите вы этого или нет, вы собираетесь разоблачить Миф Пирога.

Что заставляет людей заблуждаться, так это то, что деньги абстрактны. Деньги сами по себе не богатство. Они только то, что помогает обмениваться ценностями. И хотя в конкретный момент в определенном месте (например, в вашей семье за этот месяц) может быть фиксированное количество денег, доступное для торговли с другими людьми, количество богатства в мире непостоянно. Вы можете увеличить количество богатства в мире. Ценности создавались и уничтожались (а затем снова создавались) на протяжении всей человеческой истории.

Предположим, у вас есть сломанная машина. Вместо того, чтобы сидеть на диване следующим летом, вы можете потратить некоторое количество времени и отремонтировать ее. Делая это, вы создаете богатство. Мир, а в особенности вы, станет богаче на одну работоспособную машину. И не только в метафорическом смысле. Если вы продадите машину, то получите за нее больше, чем за сломанную.

Отремонтировав сломанную машину, вы сделали себя богаче. Никто не стал беднее. Следовательно, никакого Всемирного Пирога не существует. Когда смотришь на проблему с этой точки зрения, удивляешься, как вообще кто-то мог думать иначе?[^6-5]
Ремесленник

Люди, которые лучше всего понимают, что богатство в мире непостоянно, это те, у кого хорошо получается делать вещи своими руками, ремесленники. Их самодельные работы часто можно продавать в магазине. Но с ростом индустриализации количество таких людей уменьшается. Одна из наибольших оставшихся категорий ремесленников — это программисты.

Программист может сидеть перед компьютером и создавать ценности. Хорошая программа сама по себе является ценностью. Если кто-нибудь сядет и напишет супербраузер, который не будет глючить (отличная идея, кстати), мир станет намного богаче.[^6-6]

Люди в одной компании работают вместе для того, чтобы создавать богатство. Многие из них (например, менеджеры по персоналу или водители), на самом деле, напрямую не производят никаких вещей. Программисты же в буквальном смысле извлекают продукт прямо из своей головы, строчку за строчкой. Поэтому для них очевиднее, что богатство, это нечто, что производится, а не распределяется неким воображаемым дядей.

Очевидно также, что качество создаваемого богатства может очень сильно различаться. У нас в Viaweb был один программист, который был каким-то суперпроизводительным монстром. Я смотрел на то, что он делал за один рабочий день, и понимал, что он каждый день увеличивает рыночную стоимость компании на несколько сотен тысяч долларов. Подобный суперпрограммист может создать богатства на миллион долларов всего за несколько недель. Среднестатистический программист за тот же срок произведет, вероятно, нулевое, если не отрицательное (добавив несколько багов) количество богатства.

Вот почему большинство хороших программистов являются либералами. В этом мире ты либо плывешь, либо тонешь, смягчающие обстоятельства никого не волнуют. Когда люди, далекие от прямого производства ценностей — студенты, репортеры или политики — слышат, что 5% богатейших людей планеты владеют половиной всех денег в мире, они начинают думать, что это несправедливо! Опытный программист, скорее всего, подумает: “и это все?”. Лучшие 5% программистов мира, вероятно, пишут 99% хорошего программного обеспечения.

Ценности можно создавать не только для того, чтобы продать. Ученые, по крайней мере, до недавнего времени, фактически дарили свои знания миру. Мы все получаем выгоду от изобретения пенициллина, люди стали реже умирать от инфекций. Ценности — это то, что нужно людям, а сохранение жизни совершенно точно необходимая вещь. Программисты часто вносят свой вклад в общий котел, разрабатывая открытое ПО. Я стал гораздо богаче, получив операционную систему FreeBSD, которая работает на моем компьютере. Или Yahoo, которая использует ее на всех своих серверах.

[^6-5]: Строго говоря, вы все-таки могли сделать мир немного беднее, микроскопически загрязнив окружающую среду. Но это все равно не равно количеству созданного богатства. Кроме того, вы могли просто привинтить что-нибудь и ничего не загрязнять.

[^6-6]: Эссе было написано до того, как вышел Firefox.

### Что такое работа

В индустриальных странах люди обычно принадлежат какому-нибудь институту, по крайней мере, до тех пор, пока им не исполнится 20 лет. После долгих лет привыкаешь относить себя какой-нибудь группе людей, которые просыпаются утром примерно в одно время, ходят в одни и те же здания, что и вы, и, как правило, занимаются вещами, которые им не очень нравятся. Постепенно это становится частью вашей личности: имя, возраст, роль, институт. Если вы рассказываете о себе, или кто-нибудь другой представляет вас, то обычно это выглядит примерно так: Джон Смит, 20 лет, студент такого-то колледжа.

Предполагается, что когда Джон Смит закончит учебу, он пойдет работать. Для него это все равно, что присоединиться к другой группе людей. Если не вдаваться в подробности, то работа — это почти то же самое, что и колледж. Вы выбираете компании, в которых вы бы хотели работать и посылаете им резюме. Если они решают взять вас, то вы становитесь членом новой группы. Вы просыпаетесь утром и ходите уже в другие здания, и делаете вещи, которые обычно делать не любите. Есть несколько отличий: жить стало не так весело, и вам платят зарплату. Но отличий гораздо меньше, чем совпадений. Джон Смит превратился в Джона Смита, 22 года, разработчик в такой-то компании.

На самом деле, жизнь Джона Смита поменялась сильнее, чем он думает. С точки зрения общества, работа в компании очень похожа на учебу в колледже, но если присмотреться, то отличий гораздо больше.

Для того чтобы существовать, компания должна зарабатывать деньги. И большинство из них делает это, создавая ценности. Кстати говоря, создавать ценности могут не только те компании, которые занимаются производством. Вспомните ту волшебную машинку, которая производила бы для вас еду, одежду и прочее. От нее было бы мало пользы, если бы она отправляла создаваемые вещи куда-нибудь в Среднюю Азию. Если ценности — это то, в чем нуждаются люди, то компании, которые занимаются транспортировкой, тоже создают их. Тоже самое с остальными компаниями, которые не производят ничего материального. Почти все компании в мире существуют для того, что делать то, в чем нуждаются другие люди.

И это как раз то, чем, по идее, вы должны заниматься в компании. Есть, правда, один момент, который обычно сразу незаметен. Ваш личный вклад в работу компании усредняется другими сотрудниками. Иногда, вы можете вообще не думать насколько то, что вы делаете, нужно другим людям. Ваш вклад может быть косвенным. Но компания в целом должна производить необходимые другим людям вещи, иначе она не будет зарабатывать деньги. Если ваша зарплата равна X долларов в год, то, по крайней мере, ваша работа должна приносить эти деньги компании обратно, иначе она будет тратить больше, чем зарабатывает и, в конце концов, выйдет из бизнеса.

Выпускнику колледжа говорят, и он, в конце концов, сам начинает так думать, что ему нужно найти работу. Как будто это очень важно — присоединиться к какой-нибудь группе. Более прямо было бы говорить, что он должен начать делать то, что нужно другим. А для этого необязательно присоединяться к какой-нибудь компании. Компания — это всего лишь группа людей, которые работают вместе, чтобы в итоге сделать то, в чем нуждаются остальные.[^6-7]

Для большинства людей пойти работать в какую-нибудь существующую компанию будет хорошим решением. Нужно только понимать, что работа, это процесс производства ценностей, результаты которого усредняются остальными сотрудниками компании.
Работать больше

Усреднение несет с собой ряд проблем. Я думаю, что самая большая проблема состоит в том, что сложно оценить работу каждого сотрудника в отдельности. В большой компании вам платят за вашу работу какую-то фиксированную сумму. От вас ждут, что вы не будете некомпетентны или ленивы, но и не требуют посвящать работе всю вашу жизнь.

На самом деле, здесь тоже работает принцип экономии при увеличении масштаба производства. При правильно построенном бизнесе, тот, кто посвятит существенную часть своей жизни работе, будет в десять или больше раз производительнее обычного сотрудника. Например, программист, вместо того, чтобы сидеть и исправлять существующий софт, может написать новый и тем самым создать еще один источник прибыли.

Как правило, устройство компаний не позволяет вознаграждать подобных людей. Вы не можете подойти к начальнику и сказать, что хотите работать в десять раз больше, не могли бы они в десять раз увеличить вашу зарплату? Хотя бы потому, что считается, что вы уже и так работаете настолько хорошо, насколько можете. Но гораздо более серьезная причина состоит в том, что у компании нет инструмента, позволяющего измерить вашу производительность.

Продавцы — исключение из этого правила. Их вклад в прибыль можно легко измерить, и обычно они получают процент с продаж. Если продавец хочет зарабатывать больше, он просто начинает больше работать, и это происходит автоматически.

Есть еще одно исключение из правила — менеджеры высокого звена. И тоже по тем же причинам: их производительность можно измерить. Их работа состоит в том, чтобы увеличивать производительность компании в целом. А в этом случае мы имеем дело уже с конкретными цифрами, и если дела компании плохи, это касается топ-менеджеров напрямую.

Компания, которая смогла бы выплачивать всем своим сотрудникам вознаграждение пропорциональное их работе, была бы невероятно успешной. Большинство наемных работников работали бы лучше, если бы могли больше получать за это. Еще существеннее то, что такая компания привлекала бы тех людей, которые хотели бы работать особенно усердно. Такая компания легко разгромила бы своих конкурентов.

К сожалению, компании не могут платить всем так же, как продавцам или топ-менеджерам. Продавцы работают в одиночку, а обыкновенные служащие, как правило, связаны между собой. Представьте себе компанию, которая производит некоторые устройства. Инженеры разрабатывают функционал, дизайнеры внешний вид и упаковку, и затем маркетологи убеждают всех, что этот продукт как раз то, что им необходимо. Как можно вычислить, сколько процентов общей прибыли принадлежит той или иной группе? Или как определить, что именно повысило репутацию компании после выпуска устройства? Даже если бы вы могли читать мысли ваших потребителей, вы бы все равно обнаружили, что эти все факторы влияют друг на друга.

Если вы хотите быстро двигаться по карьерной лестнице, то столкнетесь с проблемой того, что ваша работа связана с работой других сотрудников. Невозможно измерить производительность отдельного человека в большой группе. И остальные участники будут вас тормозить.

[^6-7]: Многие люди испытывают депрессию в этом возрасте. Еще бы, в колледже жизнь казалась такой веселой. А теперь, вы из гостя превратились в обслуживающий персонал. На самом деле, в этом новом мире жизнь тоже может быть веселой. В конце концов, теперь вы можете свободно проходить в двери с надписью “Только для персонала”. Но в целом, подобное изменение — это шок.

### Измерение и рычаг

Для того чтобы стать богатым, вы должны сделать так, чтобы вашу производительность можно было измерять, иначе вы не сможете получать больше прибыли оттого, что качество вашей работы улучшилось. Еще одним условием является то, что в вашей работе должно быть место для приложения рычага, в том смысле, что решения, которые вы принимаете, должны иметь заметный эффект.

Одной только возможности измерять недостаточно. В качестве примера можно привести сдельную работу в кондитерском магазине. Ваша производительность может быть измерена и вашу работу оплачивают в соответствии с ней. Однако рычаг отсутствует. Единственное, что вы можете контролировать, это скорость вашей работы, а с помощь нее можно увеличить доходы максимум в два или три раза.

Примером работы, в которой присутствует и то и другое, может быть работа киноактера. Его производительность может быть измерена сборами от показа фильма. А качество его игры имеет значительное влияние на их величину, что и является рычагом в данном случае.

Я думаю, что все люди, у которых есть возможность влиять на уровень своих доходов, находятся в такой ситуации, в которой их производительность может быть измерена и им есть куда приложить рычаг. По-крайней мере, все те, кто приходят мне в голову: топ-менеджеры, киноактеры, менеджеры инвестиционных компаний, профессиональные спортсмены. Верным признаком того, что в работе есть рычаг, является возможность провала. Там, где есть возможность много выиграть, должна быть и возможность много проиграть. Актеры, торговцы на бирже, атлеты, все они живут под Дамокловым мечом. Как только они начинают работать слабо, они выходят из бизнеса. Если вы работаете на безопасной должности, вы никогда не разбогатеете, потому что там, где нет опасности, почти наверняка нет места для приложения рычага.

Для того чтобы попасть в такую ситуацию, необязательно становиться актером или топ-менеджером. Все что нужно, это присоединиться к маленькой группе людей, которая занимается решением сложной проблемы.

### Маленький = измеримый

И хотя невозможно точно измерить вклад каждого сотрудника в отдельности, это можно сделать приблизительно, если измерять работу небольшой группы.

Один из уровней, на котором можно измерять вклад каждого сотрудника, это уровень компании в целом. Чем компания меньше, тем ближе вы к точным результатам. Я считаю, что максимальный размер жизнеспособного стартапа — десять человек.

Работа в стартапе очень близка к такой, в которой вы можете подойти к начальнику и сказать, чтобы он платил вам в десять раз больше за то, что вы будете в десять раз лучше работать. Но с двумя отличиями: вы говорите это не боссу, а напрямую потребителям (в конце концов, начальник, это только посредник между вами и ими), и говорите это не самостоятельно, а вместе с другими вашими коллегами.

Как правило, стартап — это группа. За редким исключением, компания не может состоять из одного человека. Поэтому в ваших интересах, чтобы остальные участники были достаточно хороши, так как именно их работа будет усреднять вашу.

Большая компания похожа на огромную галеру с тысячей гребцов. Две вещи сохраняют скорость галеры постоянной. Первая — это то, что отдельный гребец не видит никаких изменений оттого, что гребет сильнее. Вторая — то, что средний гребец предпочитает оставаться средним.

Если вы наугад возьмете десять гребцов из этой галеры и поместите их в отдельную лодку, они, скорее всего, смогут плыть быстрее. Энергичного гребца будет подбадривать то, что он имеет существенное влияние на скорость лодки. А если кто-нибудь будет лениться, остальные это быстро заметят и смогут его урезонить.

Но еще большее преимущество десятиместной лодки проявляется тогда, когда вы сажаете туда десять лучших гребцов. Их будет дополнительно мотивировать то, что они работают в маленькой группе. Гораздо выгоднее, когда ваша работа усредняется трудолюбивыми людьми.

В этом и состоит действительное значение стартапа. В идеале, вы начинаете работать с людьми, которые тоже хотят получать за то, что работают лучше, гораздо больше, чем они могли бы получать в любой большой компании. И так как стартапы обычно создаются людьми, которые хорошо знают друг друга, то и точность измерения вклада каждого участника гораздо выше. Стартап — это не просто десять человек, это десять человек с похожими качествами.

Стив Джобс однажды сказал, что успех стартапа зависит от первых десяти сотрудников. Я с ним согласен. Но даже не столько величина стартапа делает его способным надрать задницу большим компаниям, сколько возможность выбрать первых сотрудников. Вы должны быть не просто маленькой компанией, вы должны быть маленькой компанией лучших.

Чем больше группа, тем больше ее средний участник предпочитает оставаться средним. При прочих равных условиях способный человек в большой компании будет находиться в худших условиях, чем в стартапе, так как его производительность будет снижаться меньшей производительностью остальных сотрудников. Конечно, для него деньги могут быть не так важны, как стабильность, но если они важны, то ему лучше уйти и работать среди равных.
Технология = рычаг

Стартапы дают возможность каждому человеку оказаться в ситуации, в которой их работа может быть измерена и к ней может быть приложен рычаг. Это возможно потому, что, во-первых, они маленькие, и, во-вторых, они занимаются разработкой новых технологий.

Что такое технология? Технология — это метод, способ, с помощью которого мы делаем разные вещи. И если вы изобретете новый способ делать что-нибудь, его стоимость будет умножена всеми людьми, которые будут им пользоваться. В этом и состоит разница между стартапом и, например, рестораном или парикмахерской. Вы жарите яичницу или стрижете волосы только одному человеку одновременно. Если же вы решаете техническую проблему, которая касается многих людей, вы помогаете им всем. Это и есть рычаг.

Если вы посмотрите на историю, то окажется, что большинство людей, которые стали богатыми, создавая ценности, сделали это, разработав новую технологию. Никто не разбогател с помощью того, что стал быстрее жарить яйца или стричь волосы. Флорентинцы стали богатой нацией после того, как в тринадцатом веке разработали способ делать высокотехнологичный продукт того времени — красивую тканую одежду. Голландцы — после того, как в шестнадцатом веке изобрели новый способ делать корабли и навигационные приборы, что позволило им доминировать на Дальнем Востоке.

К счастью, существует естественная связь между величиной стартапа и способностью решать сложные проблемы. Для того чтобы быть на пике технологий, нужно двигаться очень быстро. То, что сегодня считается высокими технологиями, через несколько лет не будет стоить и цента. Маленьким компаниям гораздо легче удержаться на этом острие, так как на них не давит груз бюрократии. Кроме того, новые технологии обычно появляются из нетрадиционных подходов, и маленькие компании меньше ограничены правилами.

Большие корпорации тоже способны изобретать новые технологии. Они просто не могут делать это быстро. Размер делает их медленными и не позволяет достойно вознаграждать сотрудников за те выдающиеся усилия, которые необходимы в таких разработках. Таким образом, на практике оказывается, что большие компании обычно берутся за разработку в тех областях, в которых нужен большой капитал, таких как производство микропроцессоров, электростанций или аэробусов. И даже здесь они сильно зависят от стартапов, занимающихся производством компонентов и идей.

Очевидно, что стартапы, занимающиеся разработкой биотехнологий или программного обеспечения, решают сложные технические задачи. Однако, я думаю, что иногда это может быть верно и для тех бизнесов, которые с первого взгляда не занимаются технологиями вообще. Например, McDonald’s, который разбогател, разработав систему и торговую марку, которые затем были скопированы по всему миру. Рестораны McDonald’s контролируются настолько строгими правилами, что к ним можно относиться почти как к компьютерной программе.

Выбирайте сложные проблемы не только в качестве основных целей компании, но и в ключевых моментах вашей работы. У нас в Viaweb одним из правил правой руки было бежать вверх по лестнице. Предположим, что вы маленький, приземистый парень и за вами гонится огромный, жирный толстяк. Вы открываете дверь и обнаруживаете за ней лестницу. Куда вы побежите, вверх или вниз? Я вам советую бежать вверх. Вниз толстяк, скорее всего, будет бежать с той же скоростью, что и вы. Если он будет бежать вверх, то его размер сразу станет для него недостатком. Вам бежать наверх трудно, но ему вдвойне труднее.

На практике это означало, что мы специально искали себе сложные задачи. Если нам приходилось выбирать между реализацией двух возможностей в нашей программе, и их стоимость была одинакова в отношении качества к сложности, мы выбирали более сложную. Не только потому, что она была лучше, но гораздо больше потому, что она была сложной. Тем самым, мы заставляли наших больших и неповоротливых конкурентов догонять нас по зыбкой почве. Я помню, что иногда мы были просто истощены борьбой с какой-нибудь сложной технической проблемой, но я получал от этого удовольствие, потому что, если это было сложно для нас, это будет невозможно для конкурентов.

На самом деле, это единственный способ работы стартапа. Инвесторы знают это и у них даже есть специальное выражение: барьеры для входа. Если вы придете к венчурному капиталисту и попросите его инвестировать в вашу идею, то первое о чем он вас спросит, это насколько сложно будет кому-нибудь другому разработать то же самое?[^6-8] И вам лучше подготовить что-нибудь поубедительнее, почему ваша технология не сможет быть скопирована конкурентами? Иначе, как только какая-нибудь большая компания поймет, что ваш продукт начинает ей угрожать, она сделает свой такой же, и их бренд, капитал и дистрибьюторская сеть помогут им выбросить вас из бизнеса.

Один из способов расставить барьеры — это патенты. Но, к сожалению, они не очень помогают. Как правило, конкуренты находят способы обойти ограничения, накладываемые патентами. А если не могут обойти, то они могут просто забить на них и заставить вас судиться с ними. Большая компания не боится судебных процессов, для них это обыкновенное дело. Они позаботятся о том, чтобы процесс был долгим и дорогостоящим. Когда-нибудь слышали о Фило Фарнсворте? Он изобрел телевидение. А не слышали вы о нем потому, что его компания не смогла сделать на этом деньги.[^6-9] Зато смогла другая — RCA, а все, что получил Фарнсворт — это десять лет судебной тяжбы.

Лучшая защита — это нападение. Если вы сможете разработать технологию, которую будет сложно повторить вашим конкурентам, вам не нужны будут другие барьеры. Начните решать сложную задачу, и затем, в каждый момент, когда нужно будет принимать решение, выбирайте более сложное.[^6-10]


[^6-8]: Когда они спрашивали об этом нас, мы обычно отвечали, что это вообще невозможно. Однако я думаю, что мы выглядели наивными или лгунами.

[^6-9]: Немного технологий изобретено одним человеком. Обычно если вы знаете изобретателя чего-либо (телефона, самолета, электрической лампочки), это означает, что его компания смогла сделать на этом деньги. Если не знаете, это означает, что деньги сделала другая компания.

[^6-10]: Это, кстати, вообще хороший способ принимать решения в жизни. Если вы стоите перед выбором, выбирайте более сложное решение. Если вы выбираете между пойти позаниматься спортом или посмотреть телевизор, идите заниматься. Думаю, что причина, по которой этот трюк очень хорошо работает, заключается в том, что когда у вас есть два пути, простой вы выбираете только из-за лени. Причем подсознательно, вы об этом знаете, выбор более сложного пути просто заставляет вас осознать это.

### Ловушки

Если бы проблема была только в том, как работать лучше обыкновенного служащего и получать за это больше, было бы очевидно, что нужно начинать стартап. До какого-то момента это было бы даже забавно. Я не думаю, что многим людям нравится медленная поступь больших компаний, а также все эти нескончаемые митинги и тупые менеджеры.

К сожалению, существует несколько неприятных моментов. Один их них состоит в том, что вы не можете, например, решить, что будете работать в два или три раза больше, получать за это больше денег и жить припеваючи. Когда вы запустите стартап, ваши конкуренты оценят, насколько сильно вы работаете, и решат работать так же как вы или еще сильнее.

Еще одна сложность в том, что ваша прибыль пропорциональна вашем усилиям только в среднем. Как я уже говорил, существует много случайных факторов, влияющих на ее величину. И на практике получается, что коэффициент умножения будет где-нибудь между нулем и тысячей. Большинство стартапов оказываются провальными, и не только пресловутые порталы собачьего питания, о которых мы все слышали, когда лопнул Интернет-пузырь. Это обыкновенная история, когда стартап разрабатывает новую супертехнологию, немного задерживается с ее выпуском, расходует все свои деньги и выходит из бизнеса.

Стартапы — как комары. Медведь может их раздавить, а краб защищен от них панцирем, но преимущество комаров как вида, в том, что их много. Хотя, конечно, для отдельного комара это маленькое утешение.

Стартапам, как и комарам приходится действовать по принципу все или ничего. Viaweb тоже приходилось иногда действовать напролом. Наша траектория напоминала синусоиду, но к счастью, нас купили на вершине цикла. Пока мы договаривались с Yahoo в Калифорнии о продаже им нашей компании, нам пришлось одолжить комнату для переговоров, чтобы убедить инвесторов не прекращать финансирование.

Конечно, никому не нравится этот аспект в стартапах. Разработчики в Viaweb были людьми, которые избегали риска во что бы то ни стало. Если бы существовал способ просто работать очень много и гарантированно получать за это деньги, было бы очень здорово. Мы предпочли бы 100% вероятность заработать миллион долларов, чем 20% вероятность заработать десять миллионов, несмотря на то, что теоретически второй вариант вдвое прибыльнее. К сожалению, в современном мире нет такого бизнеса, в котором вы могли бы получить первый вариант.

Можно получить почти гарантированную прибыль, продав стартап на ранней стадии, тем самым, отказавшись от большой (но рискованной) прибыли в пользу маленькой (но верной). У нас был такой шанс, но мы совершенно тупо, как мы тогда думали, упустили его. Сразу после этого мы до смешного страстно захотели продаться. В течение года или двух, если бы кто-нибудь проявил хоть небольшой интерес к Viaweb, мы бы попытались продать им компанию. Но так как никто не заинтересовался, нам пришлось работать дальше.

Мы тогда были бы очень удачной покупкой. Но компании, достаточно большие для того, чтобы кого-нибудь купить, также достаточно велики, чтобы быть довольно консервативными. А люди, которые принимают решения о таких приобретениях, еще более консервативны, потому что, как правило, они приходят в компанию из бизнес-школ уже на поздних стадиях. Они предпочитают переплачивать за более безопасные варианты. Таким образом, проще продать стартап, когда его будущее уже определилось, даже за огромную сумму.
Набирайте пользователей

Я думаю, что продажа компании — хорошая идея. Запустить бизнес это не то же самое, что управлять им. Кроме того, продажа компании позволит вам вложить деньги во что-нибудь другое. Что бы вы сказали о финансовом менеджере, который вкладывал бы все деньги в акции только одной молодой компании?

Что нужно делать для того, чтобы вас купили? На самом деле, почти то же самое, что бы вы делали, если бы не собирались продавать компанию. Например, получать прибыль. Однако, кроме этого есть еще много хитростей, и мы провели массу времени, пытаясь в них разобраться.

Потенциальные покупатели вашего бизнеса постоянно оттягивают покупку настолько, насколько это возможно. Самое сложное в деле продажи компании, это заставить их действовать. Для большинства людей наиболее сильным мотивом является не возможность заработать, а возможность потерять. Для потенциальных покупателей страх, что вас купят их конкуренты, является наиболее сильной мотивацией. Насколько мы поняли, этот страх лишает топ-менеджеров рассудка. Следующим по силе является страх, что вы начнете расти очень быстро и будете стоить дороже или даже станете их конкурентами.

Вы, наверное, думаете, что компания, которая собирается вас купить, будет глубоко изучать то, что вы делаете и на основании этого принимать решение о покупке? Абсолютно не так. Все, что они захотят знать, это то, сколько у вас пользователей.

Потенциальные покупатели думают, что потребители лучше знают, чьи технологии заслуживают внимания. И это умнее, чем выглядит на первый взгляд. Пользователи — это единственное доказательство того, что вы сделали что-то ценное. Ценности — это, что нужно людям, и если они не используют ваше программное обеспечение, то может быть это не потому, что вы плохие маркетологи, а потому, что вы не сделали того, что им было бы нужно?

У венчурных капиталистов есть список плохих признаков, на которые нужно обращать внимание. Один из главных следующий: компания управляется техниками глубоко поглощенными решением технических задач и не занимается своими пользователями. Работая в стартапе, вы не просто решаете сложные проблемы, вы решаете проблемы, которые беспокоят пользователей.

Я советую вам поступать также как и потенциальные покупатели вашего бизнеса. Для оптимизации вашей работы измеряйте производительность стартапа количеством пользователей. В оптимизации компьютерной программы ключевым моментом является измерение. Если вы пытаетесь просто угадать, где же она тормозит, и что может это исправить, то вы, скорее всего, ошибетесь.

Количество пользователей может быть не очень точным тестом, но достаточно близким к этому. Это то, что заботит потенциальных покупателей бизнеса в первую очередь. Это то, от чего зависит прибыль. Это то, что заставляет страдать конкурентов. Это то, что впечатляет журналистов и новых пользователей.

Помимо всего остального, такой тест позволит вам избежать еще одной проблемы, которая заботит венчурных капиталистов — слишком долгая разработка продукта. Избегайте постоянного улучшения программы. Выпустите версию 0.1 как можно скорее. До тех пор, пока у вас недостаточно пользователей, вы оптимизируете, полагаясь на догадки.

Всегда помните о том, что ценности – это то, что необходимо людям. Если вы собираетесь разбогатеть, создавая ценности, вы должны знать, что хотят люди. Так мало бизнесов действительно уделяют внимание тому, чтобы делать своих пользователей счастливыми. Как часто вы идете в магазин, или звоните в какую-нибудь компанию по телефону, испытывая при этом страх? Неужели, когда вы слышите: “Ваш звонок очень важен для нас, пожалуйста, оставайтесь на линии”, вы думаете: “О боже, наконец-то все будет в порядке”?

Ресторан может позволить себе иногда подать подгоревший обед. Но в технологиях любая разница между вашим продуктом и тем, что хотят пользователи, умножается во много раз. Можно сказать, что вы удовлетворяете или разочаровываете потребителей оптом. Чем ближе вы к тому, что им нужно, тем больше ценностей вы производите.
Богатство и власть

Производство ценностей — это не единственный способ разбогатеть. На протяжении почти всей человеческой истории этот способ был не очень распространенным. Всего несколько столетий назад основными источниками богатства были рудники, рабы, земли и крупный рогатый скот, и единственными способами добыть все это быстро были наследство, брак, завоевание и конфискация. У богатства была плохая репутация.

С тех пор изменилось две вещи. Первой была власть закона. Во все времена было так, что если кому-нибудь везло и у него появлялось богатство, правитель или его слуга находили способ отобрать его. Но в средневековой Европе произошло нечто новое. В городах появился новый класс торговцев и мануфактурщиков. Вместе они были способны противостоять властителю или местному феодальному лорду. Впервые в истории, хозяева перестали грабить своих подчиненных. Это было гигантским шагом, возможно именно это послужило причиной второго изменения — индустриализации.

Огромное количество литературы посвящено причинам Индустриальной Революции. Но совершенно точно, что необходимым ее условием было то, чтобы люди, которым посчастливилось сделать состояние, могли насладиться им в мире. Доказательством может служить то, что случилось со странами, которые пытались вернуться к старой модели, Советским Союзом и в меньшей степени Англией в 1960х и начале 1970х. Заберите у людей возможность разбогатеть и технический прогресс остановится.

Вспомните, что с экономической точки зрения стартап – это способ сказать, я хочу работать быстрее, платите мне больше. Вместо того чтобы медленно копить деньги и получать регулярную зарплату пятьдесят лет, я хочу получить все как можно быстрее. Правительство, которое не позволяет сделать это, заставляет людей работать медленно. Они не против того, чтобы вы заработали три миллиона долларов за пятьдесят лет, но они не хотят, чтобы сделали это за два года. Они как ваш босс, к которому вы не можете подойти и сказать, что вы хотите работать в десять раз лучше и получать за это в десять раз больше. Отличие в том, что вы не можете уйти и основать свою страну.

Медленная работа не означает, что технические инновации появляются медленно. Обычно она означает, что инноваций вообще нет. Вы начинаете отчаянно искать сложные задачи только тогда, когда хотите с помощью их решения ускорить получение прибыли. Разработка новых технологий — это гвоздь в вашей заднице. Это, как говорил Эдисон, один процент вдохновения и девяносто девять процентов потения. Без возможности разбогатеть никто не будет этим заниматься. В принципе, инженеры стали бы работать над такими вдохновляющими проектами, как истребитель или лунный модуль, но более приземленные технологии, такие, как электрическая лампочка или полупроводники изобретаются предпринимателями.

Стартапы — это не только то, что происходило в Силиконовой долине последние несколько десятилетий. С тех пор, как стало возможным разбогатеть, создавая ценности, каждый, кто сделал это, использовал одинаковый рецепт: измерение и рычаг. Этот рецепт был тем же самым во Флоренции в тринадцатом веке, он остается таким же и сейчас.

Понимание этого поможет ответить на вопрос: почему Европа столь сильна. Неужели это из-за ее географического положения? Или может европейская раса чем-то лучше? А может это из-за религии? Ответ в том, что европейцы поставили на новую великую идею: дайте тем, кто сумел разбогатеть, возможность сохранить свое богатство.

Как только вы сделаете это, люди, которые хотят разбогатеть, начнут создавать ценности, вместо того, чтобы воровать их. При этом технический прогресс будет трансформироваться не только в богатство, но и в военную мощь. Теория, с помощью которой был построен самолет-невидимка, была разработана советским математиком. Но так как у Советского Союза не было компьютерной индустрии, она так и осталась для них теорией.

В этом смысле Холодная война учит нас тому же уроку, что и Вторая Мировая, да и остальные войны человечества. Не позволяйте правящему классу давить предпринимателей. То, что делает личность богатой, делает страну могущественной. Позвольте людям сохранить свое богатство, и вы будете править миром.




## Осторожно, разрыв
Май 2004

Когда человек хочет что-то сделать на совесть, то тот, кто делает это лучше всех, добивается куда более серьезных результатов, чем все остальные. Разрыв между Леонардо да Винчи и второсортными современниками, вроде Боргоньоне, огромен. Тот же разрыв будет между Рэймондом Чандлером и средним автором детективов. Шахматист высокого уровня может провести десять тысяч игр против обычных любителей, и ни разу не проиграть.

Точно так же как шахматы или изобразительное искусство, делать деньги это довольно специализированное занятие. Но мы почему-то относимся к нему по-другому. Никто не ворчит, если небольшое число людей лучше всех играют в шахматы или пишут романы - но если какое-то небольшое число людей зарабатывают больше денег, чем все остальные, то в газетах сразу трагично пишут, что это очень плохо.

Но почему? Статистическое распределение ничем не отличается от любого другого умения. Почему же у людей такая сильная реакция в том случае, если речь идет об умении делать деньги?

Я думаю, есть три причины, из-за которых мы по особому смотрим на умение делать деньги: ошибочная модель богатства, которую мы получаем в детстве; несправедливость, которая до недавнего времени лежала в основе большинства крупных состояний; и обеспокоенность тем, будто ситуация, при которой у небольшого числа одних людей больше денег, чем у большого числа других, является чем-то вредным для общества. Насколько я могу судить, первое просто ошибочно, второе устарело, а третье эмпирически ложно. А что, если, в современных демократиях, вариация в уровне доходов это на самом деле признак здоровья?



### Папина Модель Богатства

Когда мне было пять лет, я думал, что электричество создается розетками. Я понятия не имел, что где-то стоят электростанции, которые эту энергию вырабатывают. Точно так же большинство детей понятия не имеют, что богатство это нечто, что можно создавать. Они думаю, что это такая штука, которая происходит от родителей.

Из-за тех обстоятельств, при которых дети знакомятся с материальными благами, они обычно неправильно их понимают; они путают блага и деньги. Они думают, что в мире ограниченное количество благ - и что это нечто, распределяемое властями (а значит, должно распределяться поровну), а не что-то, что можно создавать - а значит, может создаваться неравномерно.

На самом же деле блага это не деньги. Деньги это лишь удобный способ обмениваться благами. Блага это то, чем обмениваются - товары и услуги, которые мы покупаем. Когда ты приезжаешь в другую страну, богатую или бедную, тебе не надо заглядывать людям в банковские счета, чтобы понять, в какую именно ты попал. Ты видишь само богатство - в зданиях и дорогах, в одежде и здоровье людей.

Откуда берутся блага? Их создают люди. Это было куда проще понять, когда большинство людей жили на фермах, и большинство из вещей, которые им были нужны, они делали своими руками. Поэтому ты мог наблюдать - в доме, в стадах, в хранилищах - богатство, созданное каждой семьей. И было очевидно, что блага мира это не какое-то конечное количество, которое надо как-то поделить, вроде пирога. Если ты хотел больше благ, ты просто их создавал.

Все остается на своих местах и сегодня, хотя лишь немногие из нас создают окружающие нас блага напрямую (кроме небольшого числа домашних дел). Как правило, мы создаем их для других людей, и обмениваем их на деньги, а их уже обмениваем на те виды благ, которые хотим.[1]

Дети не могут самостоятельно создавать блага, поэтому все, что у них есть, они получили от кого-то другого. А когда что-то раздается, то разумеется, оно должно даваться поровну.[2] В большинстве семей так и делается. И дети за этим очень ревниво следят. "Нечестно!" - кричат они, если один получает больше, чем другой.

Во взрослом мире уже нельзя жить за счет родителей. Если ты чего-то хочешь, то либо сделай сам, либо сделай что-либо эквивалентной ценности для кого-то другого, чтобы тебе в обмен дали денег, достаточных для покупки желаемой вещи. Во взрослом мире, блага - за исключением некоторых узких специалистов, вроде взломщиков или спекулянтов - это что-то, что ты создаешь сам, а не что-то, раздаваемое Папой. А так как желания и способности создавать сильно варьируются от одного человека к другому, то и благосостояние тоже не бывает равным.

Тебе платят за то, что ты создаешь нечто, нужное другим людям; и те, кто больше получают, обычно просто просто преуспели в том, что бы делать это нечто. Звезды кино обычно зарабатывают намного больше, чем второстепенные актеры. Да, второстепенные могут быть почти такими же харизматичными, но когда люди идут в кино, и смотрят на список картин, они хотят того самого, что есть у звезд.

Производить что-то, нужное людям - это, конечно, не единственный способ делать деньги. Еще можно грабить банки, или вымогать взятки, или создать монополию. Эти стратегии, действительно, объясняют какую-то часть вариации в благосостоянии, и даже некоторые из самых больших состояний, но они не являются корнем разницы в доходе. Корень этой разницы, согласно бритве Оккама, тот же самый, что и разница в любых других человеческих умениях.

В США, CEO большой публично торгуемой компании получает примерно в 100 раз больше, чем средний человек.[3] Баскетболисты - примерно в 128 раз больше. Бейсболисты - в 72. Газеты пишут об этой статистике с ужасом. Но у меня не вызывает никакого удивления, что один человек может в чем-то быть в 100 раз продуктивнее другого. В Древнем Риме цена двух рабов могла отличаться в 50 раз, в зависимости от их навыков.[4] И это даже не учитывая мотивации, или дополнительных бонусов к продуктивности, которые позволяют получить современные технологии.

Газетчики, пишущие про атлетов или CEO, напоминают мне ранне-христианских авторов, споривших, исходя из первых принципов, о том, является ли земля круглой - когда можно было бы просто выйти на улицу и проверить.[5] Кто сколько "стоит" - это не теоретический вопрос, и не вопрос политики. Это вопрос, на который рынок уже дал готовый ответ.

"Неужели он один стоит сотни таких, как мы?" - заламывает руки газетчик. Ну, это зависит от того, что понимать под словом "стоит". Если в том смысле, готов ли рынок платить за его умения такую цену, то ответ, очевидно, "да".

Доходы некоторых CEO действительно являются следствием каких-то нечестных манипуляций. Но разве нет большинства других, чьи доходы действительно отображают богатство, которое было ими создано? Стив Джобс спас компанию, находившуюся на грани гибели. И не просто так, как это делают кризисные менеджеры - скажем, урезая затраты; он решил, каким будет следующий продукт Apple. Мало кто мог это сделать. А если оставить CEO в стороне, то вряд ли кто будет спорить с тем, что зарплаты профессиональных баскетболистов действительно отражают картину спроса и предложения.

Может показаться неубедительным, будто один человек действительно может создать настолько больше богатства, чем другой. Чтобы найти ключ к этой загадке, надо вернуться к вопросу, "неужели он один стоит сотни таких, как мы?!". Ну, скажем, поменяла бы баскетбольная команда одного из своих игроков на 100 случайных людей? Или - как бы выглядел следующий продукт Apple, если бы Стива Джобса заменили на коммитет из 100 случайных людей?[6] Такие вещи не масштабируются линейно. Может, CEO или профессиональный атлет обладает всего лишь в десять раз большим (что бы это ни значило..) умением и напором, чем средний человек; но этого более чем достаточно, если оно сконцентрировано в одном человеке.

Когда мы говорим, что за один вид работы "переплачивают", а за другой "недоплачивают", что мы на самом деле говорим? В свободном рынке, цена определяется желаниями покупателя. Люди любят бейсбол больше, чем поэзию, и поэтому бейсболисты зарабатывают больше поэтов. Поэтому, говорить, будто какая-то работа недостаточно оплачивается - это, в сущности, то же самое, что говорить, что люди хотят неправильно. Ну разумеется, они хотят неправильно! Было бы странно этому удивляться. Но еще более странно - говорить, что какая-то работа недостаточно оплачивается.[7] Потому что в таком случае ты говоришь, что несправедливо, когда люди неправильно хотят. Это, пожалуй, печально, что люди предпочитают реалити-шоу и сосиски Шекспиру и вареным овощам, но где же тут несправедливость? Это как говорить, что синее - тяжелое, а вверх - круглое.

Появление слова "несправедливо" в данном случае - безошибочный маркер Папиной Модели. Откуда бы еше оно могло взяться? Но если говорящий все еще находится внутри детской модели благ, текущего из некоего общего источника, и нуждающегося в честной дележке - в отличие от модели, где блага создаются, производятся путем создания того, что нужно другим людям - то он будет воспринимать мир именно в таком свете, когда увидит, что одни люди имеют намного больше, чем другие.

Когда мы говорим о "неравном распределении доходов", мы всегда должны задать вопрос - откуда приходят доходы?[8] Кто создал те блага, которое они представляют? Потому что если доходы варьируются в зависимости от того, сколько благ люди создают, распределение может быть неравным - но вряд ли нечестным.


### Присвоить!

Вторая причина, по которой мы настороженно относимся к разнице в уровне богатства, заключается в том, что на протяжении большей части человеческой истории обычным способом накопления благ был грабеж. В кочевых культурах - угон скота; в аграрных - захват земли во время войны, и налогообложение в мирное время.

Во время конфликтов, победители получали владения побежденных. В Англии в 1060-х, когда Вильгельм Завоеватель раздавал своим соратникам земли побежденных англо-саксов, конфликт был военным; в 1530-х, когда Генрих Восьмой раздавал монастырские земли своим сторонникам, конфликт был политическим.[9] Но принцип и там, и там был один и тот же. Сегодня то же самое можно наблюдать в Зимбабве.

В более организованных обществах, таких как Китай, правитель и его чиновники чаще использовали налоги, а не конфискацию. Но и здесь тот же самый принцип - чтобы стать богатым, не надо было создавать богатство, а надо было служить сильному правителю, и получать блага от него.

Этот принцип начал слабеть в Европе с усилением среднего класса. Это сейчас мы воспринимаем средний класс как людей, которые ни богаты, ни бедны, но изначально это была отдельная группа людей. В феодальном обществе было только два класса - воины-аристократы, и крестьяне, которые работали на их землях. Средний класс был новой, третьей группой людей, которая жила в городах и кормила себя мануфактурой и торговлей.

Начиная с 10 и 11 века, мелкие аристократы и бывшие крепостные собирались в городах, которые постепенно делались достаточно сильными, чтобы позволить себе игнорировать местных феодальных лордов.[10] Как и крепостные, средний класс в основном жил тем, что создавал блага (а в портовых городах, вроде Генуи и Пизы, занимались еще и пиратством) - но, в отличие от крепостных, у них был стимул создавать больше благ. Любые блага, созданное крепостным, принадлежало его хозяину. Не было смысла делать больше, чем ты мог съесть или спрятать. А вот независимость горожан позволяла им сохранять созданное.

А когда появилась возможность стать богатым, создавая блага, общество в целом стало очень быстро богатеть. Почти все, что мы имеем, создано средним классом. Остальные классы практически исчезли в индустриальных обществах, а их названия перешли на крайние слои среднего класса (в классическом смысле этого слова, Билл Гейтс - представитель среднего класса).

И только тогда, когда закончилась Индустриальная Революция, создание благ заменило коррупцию в качестве лучшего способа разбогатеть. Во всяком случае, в Англии коррупция только тогда вышла из моды (собственно, только тогда получила название "коррупции"), когда появились другие, более быстрые способы разбогатеть.

Англия 17 века была тем, что сегодня мы называем страной третьего мира, в том смысле, что правительственная должность была стандартным и понятным способом разбогатеть. Большие состояния той эпохи все еще получались из того, что сегодня мы зовем коррупцией, а не из коммерции.[11] К 19 веку это поменялось. Все еще существовали взятки - они, наверное, никогда не исчезнут - но политика стала скорее уделом людей, которых больше интересовали соображения тщеславия, чем жадности. Развитие технологии сделало возможность создавать блага быстрее, чем его можно было разворовывать. Придворный перестал быть архетипом богача - на его место пришел промышленник.

С возвышением среднего класса, богатство перестало быть игрой с нулевой суммой. Джобсу и Возняку уже не надо было делать нас бедными, чтобы самим сделаться богатыми. Ровно наоборот - они создали вещи, которые сделали наши жизни относительно богаче. Они были вынуждены это сделать, ведь иначе бы мы их не покупали.

Но так как на протяжении большей части мировой истории магистралью на пути к богатству был разбой, мы по инерции продолжаем относиться к богатым с подозрением. Идеалистические студенты, читая знаменитых авторов прошлого, находят "подтверждение" своим инфантильным экономическим моделям. Ошибочное встречается с устаревшим.

"За каждым большим состоянием стоит большое преступление", писал Бальзак. С той лишь разницей, что он этого не писал. Что он действительно писал, так это то, что за большим состоянием, у которого нет очевидной причины, скорее всего стоит преступление, которое так мастерски исполнено, что о нем уже забыли. Если мы говорим о Европе 1000-х, или о странах третьего мира сегодня, то это неправильное цитирование будет справедливым. Но Бальзак жил во Франции 19 века, где Индустриальная Революция уже шла полным ходом. Он знал, что можно сколотить состояние и без грабежа - он и сам в этом преуспел, будучи популярным писателем.[12]

Только немногие страны - и, конечно, это совсем не совпадение, что страны самые богатые - дошли до этой стадии. В большинстве же стран коррупция все еще была столбовой дорогой к богатству. Поэтому когда мы наблюдаем за увеличивающимся неравенством в доходах в богатой стране, наша тенденция - волноваться, что мы движемся назад, в сторону новой Венесуэлы. А по-моему, происходит ровно противоположное. Мы видим страну, которая на шаг впереди Венесуэлы.


### Рычаг Технологии

Увеличит ли технология разрыв между богатыми и бедными? Совершенно точно, что она увеличит разрыв между продуктивными и непродуктивными. В этом, собственно, весь смысл технологий. С трактором энергичный фермер может вспахать за день в 6 раз больше земли, чем с целой командой лошадей. Но - только в том случае, если он научится новому способу пахать.

Только за время своей жизни я успел уже увидеть, как растет рычаг технологии. В средней школе я зарабатывал деньги тем, что стриг газоны и черпал мороженное в Баскин-Робинс. Это были немногие виды работы, доступные в то время. Сейчас же школьники могут писать софт, или разрабатывать веб-сайты. Но заниматься этим будут только некоторые - остальные продолжат черпать мороженное.

Я отчетливо помню, как в 1985 г. развитие технологии позволило мне купить собственный компьютер. Через несколько месяцев я уже пользовался им, чтобы зарабатывать в качестве программиста-фрилансера. За пару лет до того я не мог бы этого сделать. За пару лет до этого просто не было такого явления - "программист-фрилансер". Но Apple создали новое богатство, на этот раз в форме мощных и недорогих компьютеров - и программисты немедленно занялись созданием новых форм богатства.

Как видно из этого примера, с развитием технологии наша продуктивность растет полиномиально, а не линейно. Поэтому в будущем стоит ожидать еще больших вариаций в продуктивности. Увеличит ли это разрыв между богатыми и бедными? А вот это зависит от того, что понимать под "разрывом".

Технология должна увеличить отрыв в доходах - но прочие виды отрывов она, скорее, уменьшает. Сто лет назад, богатые вели совсем другую жизнь, нежели их современники из числа прочих людей. Они жили в домах, полных слуг, носили сложные и неудобные костюмы, и путешествовали в каретах, движимых упряжками лошадей; их лошади сами нуждались в отдельных домах и слугах. Сегодня же, благодаря технологии, богатые живут почти так же, как и средний человек.

Автомобили - хороший пример того, почему. Да, можно купить дорогой автомобиль ручной сборки, за несколько сотен тысяч долларов. Но особого смысла в этом не будет. И компании делают деньги на создании большого числа обычных машин, а не маленького числа дорогих. Из-за этого компания, производящая массовые автомобили, может позволить себе потратить куда больше на их разработку и дизайн. Если же ты купишь автомобиль ручной работы, он будет постоянно ломаться. Так что единственная причина его купить - продемонстрировать, что тебе это по карману.

Или возьмем часы. Пятьдесят лет назад, потратив много денег на часы, ты получал часы, которые лучше работали. Во времена часов с механическим ходом, дорогие часы показывали более точное время. Но это больше не так. С изобретением кварцевого резонатора, обычный Таймекс будет более точным, чем Patek Philippe стоимостью в сто тысяч долларов.[13] Как и с дорогими машинами - если хочешь потратить много денег на часы, придется привыкнуть к неудобствам - не только менее точное время, их еще и требуется постоянно заводить.

Единственное, что технология не может заменить - это брэнд. Что, кстати, и объясняет причину того, почему мы так много о них слышим. Брэнд - это то, что осталось после исчезновения дистанции между богатыми и бедными. Но лэйбл на твоей вещи это значительно менее важное соображение по сравнению с тем, есть она у тебя вообще, или нет. В 1900, если у тебя была карета, никто не спрашивал, какой она "марки". Если у тебя была карета, ты был богатый. А если ты не был богатым, то ты садился в омнибус, или шел пешком. А теперь даже самые бедные американцы водят машины - и только глаз, натренированный рекламой, может отличить особенно дорогие.[14]

И это происходит в каждой индустрии. Если какой-то товар пользуется достаточным спросом, технология сделает его достаточно дешевым, чтобы можно было продавать его в больших объемах - и произведенный массово, он будет если не лучше, то уж точно более удобным.[15] А богатые ничто не ценят больше, чем удобство. Все мои знакомые богатые люди ездят на тех же машинах, одеваются в ту же одежду, пользуются той же мебелью, и едят ту же пищу, что и остальные мои друзья. Их дома могут быть в других районах, или в тех же районах, но большего размера, но жизнь внутри этих домов та же. Дома эти сделаны по одним и тем же технологиям; внутри находятся более-менее одинаковые предметы. Иметь что-то дорогое и штучной работы просто неудобно.

Богатые и время свое проводят примерно так же, как и все остальные. Берти Вустер канул в Лету. Сегодня почти все люди, которые могли бы позволить себе вообще не работать, все равно работают. Не из-за социального давления; просто безделие одиноко и депрессивно.

Да и социальной разницы, какая была сто лет назад, тоже нет. Романы и руководства по этикету того периода сегодня читаются как заметки о традициях диковинных племен. "Что касается продолжения старых дружеских отношений," - намекает миссис Битон в Книге Ведения Домашнего Хозяйства (1880), "для дамы иногда бывает необходимо, по принятии положения хозяйки дома, прекратить некоторые из тех, что начались в предыдущий период ее жизни." От женщины, вышедшей за богатого мужчину, ожидалось прекращение дружбы с теми подругами, кто не вышел. Сегодня такое поведение показалось бы нам варварством; да и жизнь такая была бы весьма скучной. Люди все еще организуются в группы, но куда чаще по уровню образования, чем по уровню достатка.[16]

Таким образом, технология не увеличивает материальный и социальный разрывы - напротив, она их уменьшает. Если бы Ленин пришел сегодня в офис компании Yahoо, Intel или Cisco, он бы решил, что коммунизм победил. Все одинаково одеваются, сидят в одинаковых офисах или кубиклах, пользуются одинаковой мебелью, и зовут друг друга по имени, без почтительных обращений. Все, как он и предсказывал! - пока он не заглянет в их банковские счета. Упс...

Так есть ли какая-то проблема в том, что технология увеличивает разрыв в доходах? Пока что не похоже. Разрыв в доходах увеличивается - но большинство других разрывов уменьшаются.


### Альтернатива аксиоме

Мы часто слышим, как политические решения критикуются на том основании, что они приведут к увеличению разрыва в доходах между богатыми и бедными - как будто бы мы точно знаем, что это что-то плохое. Конечно, возможно, что это может быть плохо - но это совершенно неочевидно, и нуждается в доказательствах.

А может быть, это и вовсе ложное утверждение - скажем, в индустриальных демократиях. В обществах, где люди делились на феодалов и крепостных, разница в доходах действительно была симптомом болезни. Но насилие - не единственная возможная причина вариации в уровне доходов. Пилот 747 Боинга получает где-то в 40 раз больше, чем кассирша в супермаркете, не потому, что он феодал, который держит ее в рабстве. Просто его навыки значительно выше ценятся.

Поэтому я предлагаю такую альтернативную идею - в современном обществе, рост разницы в уровне доходов это признак здоровья. Технология нелинейно увеличивает разницу в продуктивности. Если мы не видим такой же разницы в росте доходов, то тут могут быть только 3 возможных объяснения:
1) - технические инновации остановились
2) - люди, которые могли бы создать большую часть богатства, этого не делают
3) - ... или им за это не платят

Я думаю, можно сразу сделать вывод, что и 1), и 2) было бы довольно плохо. Если Вы не согласны, то попробуйте прожить годик только на тех ресурсах, которые были доступны франкскому аристократу в 800 году, и потом расскажите нам, как оно (это я добрый, и не посылаю Вас в каменный век).

Поэтому в ситуации с обществом, в котором растет общий уровень благосостояния, а разрыв в уровне доходов не увеличивается, остается только третий вариант объяснения - что люди создают большие богатства, но ничего за это не получают. То есть, что Джобс и Возняк, к примеру, радостно будут работать по 20 часов в сутки, создавая персональный компьютер Apple для общества, которое, после налогов, милостиво позволит им оставить себе столько же, сколько бы у них осталось после расслабленной работы с 9 до 5 в большой компании ("от каждого по способностям, каждому по потребностям" - прим. пер.)

Будут ли люди создавать блага, если им за это ничего не платить? Да - но только до тех пор, пока это весело и интересно. Люди буду писать операционные системы даром. Но они не будут их устанавливать, или заниматься поддержкой, или учить людей ими пользоваться. А ведь как минимум 90% работы даже в самых крутых технологических компаниях - именно из этого, не самого прикольного, разряда.

И любые неприкольные формы создания богатства драматически замедляются в обществе, в котором частные накопления отбираются. Это можно проверить эмпирически. Скажем, ты слышишь странный шум, который, вроде бы, исходит от работающего рядом вентилятора. Ты выключаешь вентилятор, и шум прекращается. Ты включаешь его обратно - и шум возобновляется. Выкл. - тишина. Вкл. - шум. Не имея дополнительной информации, будет резонно предположить, что шум действительно исходит от вентилятора.

В разных местах, в разные исторические периоды, "вентилятор" возможности владеть результатами своего труда то выключался, то включался. Северная Италия, 800-е - выкл. (феодалы все забирали). Северная Италия, 1100 - вкл. Центральная Франция, в 1100 - все еще феодализм - выкл. Англия в 1800-х - вкл. Там же, в 1974 - выкл. (98% налога на доход с инвестиций). США в 1974 - вкл. У нас даже было двойное исследование: Западная Германия - вкл; Восточная - выкл. Во всех случаях, создание богатства прекращалось и возобновлялось, как шум вентилятора, как только выключалась или включалась возможность им владеть.

Здесь присутствует и некоторая инерция. Нужно целое поколение для того, чтобы превратить людей в жителей ГДР (Англии повезло). И если бы мы просто изучали наш вентилятор, а не такую политизированную тему, как богатство, никто вообще бы не сомневался, что вентилятор является источником звука.

Если вы задавливаете вариацию в доходах - грабежом ли, как феодальные бароны, или налогами, как современные правительства, результат всегда один и тот же. Общество в целом беднеет.

Если бы у меня бы выбор, жить в обществе, где я был бы лучше обеспечен, чем сегодня, но при этом был бы среди беднейших его членов - или быть одним из самых богатых, но при уровне жизни хуже, чем сейчас, то я бы не раздумывая выбрал первый вариант. Если бы у меня были дети, то делать иной выбор было бы еще и аморально. Надо бороться с бедностью по абсолютной шкале, а не относительной. И если факты свидетельствуют о том, что выбирать приходится между одной или другой, значит, надо выбирать относительную.

Наше общество нуждается в богатых людях не потому, что они создают рабочие места, когда тратят свои деньги. Мы нуждаемя в том, что они создают, чтобы стать богатыми. Это не "эффект просачивания". Я не говорю, что пусть Генри Форд будет богатый, и тогда он наймет тебя официантом на следующую свою вечеринку. Я говорю - пусть он придумает и сделает тебе трактор, чтобы заменить твою лошадь.


---

[1] Отчасти причина того, что эта тема такая спорная - в том, что самые громкие мнения относительно богатства обычно у студентов, наследников, профессоров, политиков и журналистов - то есть, у людей с наименьшим опытом в создании богатств (этот феноменом будет знаком любому, кто слышал беседы на тему спорта в пивных).

Студенты, в большинстве своем, все еще сидят на шее у родителей, и поэтому еще не задумывались всерьез о том, откуда берутся деньги. Наследники, как правило, сидят на шее у родителей всю свою жизнь. Профессора и политики живут внутри социалистических завихрений в экономике; во-первых, они на шаг удалены от создания богатства, а во-вторых, им платят зарплату, которая не привязана к тому, сколько сил они тратят на работу. Ну а журналисты, в силу специфики своей профессии, отделены от той части бизнеса, которая приносит доход (т.е. от рекламы). Многие из этих людей никогда не сталкивались лицом к лицу с тем фактом, что деньги, ими получаемые, представляют собой богатство - богатство, которое (за исключением случая журналистов) кто-то _уже_ создал. Они живут в мире, в котором доходы распределяются некоей центральной властью, в соответствии с некоторым справедливым механизмом (или вообще случайно - как в случае с наследниками), а вовсе не приходят от людей, которые дают их в обмен на желаемый товар. Поэтому им, натурально, кажется "нечестным", что рыночная экономика работает по-другому.

(Некоторые профессора создают очень значительное богатство для общества - но деньги, которые они получают, от этого не зависят; это скорее вроде долгосрочных инвестиций).

[2] Если почитать о происхождении Фабианского Общества, то будет такое ощущение, что оно выросло в сознании мечтательного мальчика из рода героев Эдит Несбит в "Wouldbegoods" (собственно, одна из основательниц Фабианского Общества - прим. пер.)

[3] Согласно исследованию Corporate Librarу, средний доход CEO из числа компаний S&P 500, с учетом зарплаты, бонусов и акций, составляла $3.65 миллионов в 2002 г. Согласно Sports Illustrated; средняя плата игрока НБА за сезон 2002-2003 г. составляла $4.54 миллиона, а средняя плата бейсболиста из главной лиги в начале сезона 2003 г. составила 2.56 миллиона. Согласно данным Бюро Трудовой Статистики, средняя годовая зарплата по США в 2002 году составила $35.560.

[4] В ранней Империи, цена обычного взрослого раба составляла примерно 2000 сестерциев (Horace, Sat. ii.7.43). Служанка стоила 600 (Martial vi.66); Колумелла (iii.3.8) пишет, что опытный винодел стоил 8000. Врач П. Децимус Эрос Мерула, заплатил 50,000 сестерциев за свою свободу (Dessau, Inscriptiones 7812). Сенека (Ep. xxvii.7) сообщает, что некий Кальвисиус Сабинус платил по 100,000 за каждого раба, сведущего в греческой классической литературе. Плиний (Hist. Nat. vii.39) рассказывает, что самая большая цена, когда-либо заплаченная за раба, составила 700,000 сестерциев - за лингвиста (и, видимо, учителя) Дафниса - но потом и этот рекорд был побит актерами, выкупавшими собственную свободу.

В классических Афина цена варьировалась похожим образом. Обычный рабочий шел за 125-150 драхм. Ксенофонт (Mem. ii.5) упоминает о ценах в диапазоне от 50 до 6,000 драхм (за управляющего серебряной шахтой). Для дальнейших подробностей относительно экономики Древнего Рима, рекомендую Jones, A. H. M., "Slavery in the Ancient World," Economic History Review, 2:9 (1956), 185-199, reprinted in Finley, M. I. (ed.), Slavery in Classical Antiquity, Heffer, 1964.

[5] Эратосфен (276-195 до н.э.) использовал длину теней в разных городах, чтобы подсчитать длину окружности планеты. Он ошибся всего на 2%.

[6] Ответы: "нет" и "Windows".

[7] Главное расхождение между Папиной Моделью и реальностью - стоимость тяжелой и упорной работы. В Папиной Модели, честная и упорная работа сама по себе достойна вознаграждения. В реальности, богатство измеряется тем, что ты произвел, а не тем, как это было тяжело. Если я покрасил дом, хозяин не обязан доплачивать мне за то, что я пользовался исключительно зубной щеткой.

Многим из тех, у кого до сих пор Папина Модель в голове, покажется, что тут все равно нечестно, если кто-то много и тяжело трудится, а получает мало. Давайте упростим - у нас рабочий на необитаемом острове, охотится и собирает фрукты. Если он плохо делает эту работу, хоть и выкладывается по полной, то еды он все равно много не добудет. Это нечестно? И кто же нечестен по отношению к нему?


[8] Отчасти, трудности с тем, чтобы избавиться от Папиной Модели могут проистекать из значения слова "распределение". Когда экономисты говорят о "распределении доходов", они-то имеют в виду статистическое распределение. Но если часто использовать эту фразу, трудно не начать ассоциировать ее с другим смыслом слова "распределение" (скажем, "распределение милостыни"), и подсознательно начать думать о богатстве как о чем-то, что течет из крана. Слово "регрессивный", когда его применяют к подоходному налогу, так же работает - как что-то регрессивное может быть хорошим?!


[9] "From the beginning of the reign Thomas Lord Roos was an assiduous courtier of the young Henry VIII and was soon to reap the rewards. In 1525 he was made a Knight of the Garter and given the Earldom of Rutland. In the thirties his support of the breach with Rome, his zeal in crushing the Pilgrimage of Grace, and his readiness to vote the death-penalty in the succession of spectacular treason trials that punctuated Henry's erratic matrimonial progress made him an obvious candidate for grants of monastic property."

Stone, Lawrence, Family and Fortune: Studies in Aristocratic Finance in the Sixteenth and Seventeenth Centuries, Oxford University Press, 1973, p. 166.

[10] There is archaeological evidence for large settlements earlier, but it's hard to say what was happening in them.

Hodges, Richard and David Whitehouse, Mohammed, Charlemagne and the Origins of Europe, Cornell University Press, 1983.

[11] Уильям Сесил и его сын Роберт каждый по очереди были самыми могущественными министрами Короны, и оба использовали свою позицию для собирания одного из самых больших состояний своего времени. Особенно Роберт, который довел свое взяточничество до государственной измены. "Как Государственный Секретарь, и главный советник короля Джеймса по внешней политике, он был особым получателем подарков, получая большие взятки от датчан, чтобы не заключать мира с Испанией, и в то же время большие взятки от Испании, чтобы мир заключить.
(Stone, op. cit., p. 17.)

[12] Хотя Бальзак и получал большие деньги за свое писательство, он был ужасно непредусмотрителен, и всю жизнь был в долгах.


[13] Таймекс ошибается примерно на пол-секунды в день. Самые точные механические часы, Patek Philippe 10 Day Tourbillon, ошибаются в от -1.5 до +2 секунд. Стоят они около $220,000.

[14] Если спросить среднего жителя Англии начала 20 века, какая машина дороже - хорошо сохранившийся лимузин 1989 г. Lincoln Town Car ($5,000), или 2004 г. Mercedes S600 седан ($122,000), он, скорее всего, ошибется.

[15] Чтобы сказать что-то осмысленное про тренды доходов, надо говорить о реальном доходе, т.е. о доходе, который измеряется по тому, что за него можно купить. Но обычный способ подсчета реального дохода игнорирует многое из того, что касается роста богатства со временем, потому что опирается на индекс потребительских цен, создаваемый стыковкой друг с другом ряда цифр, каждая из которых точна только локально, и не включает цену новых изобретений, пока они не займут прочное место на рынке, и их цена не стабилизируется.

Поэтому, хотя мы можем думать, что намного лучше жить в мире с антибиотиками, пассажирскими авиа-перелетами и электрическими сетями, чем в мире без всего этого, статистический подсчет реального дохода классическим способом покажет нам, что из-за всех этих вещей мы стали лишь чуточку богаче...

Или другой подход - скажем, если бы ты отправился назад во времени в год Х, сколько бы ты потратил на торговлю, чтобы сколотить состояние? Например, если бы ты отправился назад в 1970, это было бы меньше чем 500, потому что процессор, который можно купить за 500, в 1970 стоил бы как минимум 150 миллионов. Функция приближается к ассимптоте довольно быстро, потому что за промежуток времени больше чем 100 лет, ты мог бы получить любые богатства в обмен на совершенную ерунду. В 1800, пустая пластиковая бутылка с закручивающейся крышечкой была бы чудом техники.

[16] Некоторые скажут, что это это то же самое, потому что у богатых большие возможности для образования. В этом есть резон. В наше время можно, до какой-то степени, купить своим детям дорогу в лучшие колледжи, посылая их в частные школы, у которых есть свои пути организовать поступление в колледжи. Согласно докладу Национального Центра по Статистике Образования, примерно 1.7% американских детей ходят в частные нерелигиозные школы. В Принстоне, 36% выпускников в 2007 были из таких школ (интересно, что в Гарварде процент значительно ниже, около 28%). Очевидно, что это довольно большая лазейка. Но хотя бы она уменьшается, а не увеличивается. Может быть, разработчикам процесса поступления в ВУЗы стоило бы поучиться у специалистов компьютерной безопасности, и вместо того, чтобы считать, будто их системы не ломаются, измерять то, насколько они ломаются.





## План для спама.

(Эта статья описывает техники фильтрации спама, используемые в спамоустойчивой читалке веб-почты, которую мы создали для тренировки языка программирования Arc[*]. Усовершенствованный алгоритм описан в статье "Улучшенная байесовская фильтрация"[*]
[*] http://www.paulgraham.com/arc.html
[*] http://www.paulgraham.com/better.html
).

Я думаю, что спам остановить возможно, и что фильтры на основе содержимого являются способом это сделать. Ахиллесова пята спамеров — это их сообщение. Они могут обойти любой другой барьер, который вы создадите. Обходят пока что, по крайней мере. Но они должны доставить своё сообщение, каким бы оно ни было. Если мы сможем написать программу, которая распознает их сообщения, то не будет никакого способа, чтобы они смогли это обойти.

_ _ _


С точки зрения получателя, спам легко распознаваем. Если бы вы наняли кого-нибудь, чтобы читать вашу почту и игнорировать спам, у него не было бы с этим никаких проблем. Если не прибегать к созданию ИИ, насколько многое мы должны проделать, чтобы автоматизировать этот процесс?

Я думаю, мы сможем решить эту проблему довольно простыми алгоритмами. На самом деле, я обнаружил, что вы можете вполне приемлемо фильтровать современный спам, используя ничего больше, чем байесовскую комбинацию вероятностей спамовости отдельных слов. Используя немного настроенный (как описано ниже) байесовский фильтр, мы теперь промахиваемся менее чем на 5 сообщений из 1000 спамовых сообщений (неправильно распознавая спам как не-спам), с 0 количеством ложных срабатываний.

Статистический подход  обычно не является тем первым подходом, который пробуют, когда пишут фильтры спама. Первым инстинктом большинства хакеров будет попробовать написать программу, которая распознает индивидуальные свойства спама. Вы смотрите на спамовые письма, и думаете, про наглость этих парней, пытающихся отправить мне письмо, начинающееся на "Дорогой Друг", или с темой письма, сплошь состоящей из прописных букв и завершающейся восемью восклицательными знаками. Я могу отфильтровать такие штуки практически одной строчкой кода.

Вы так и делаете, и сначала это работает. Несколько простых правил откусят большой кусок от вашего входящего спама. Простой поиск слова "click"("щелкните") поймает 79,7% электронных писем в моем корпусе спамовых текстов, выдавая лишь 1,2% ложноположительных результатов.

Я потратил почти шесть месяцев в написании программы, которая искала бы индивидуальные характеристики (features) спама, до того, как я попробовал статистический подход. Я обнаружил, что распознование нескольких последних процентов спама стало очень трудным, и что усиливая строгость фильтров, я получал больше ложных срабатываний.

Ложные срабатывания (ложноположительные результаты, false positives) – это нормальные ("невиновные") письма, которые были ошибочно распознаны как спам. Для большинства пользователей пропажа нормального ("законного") письма на порядок хуже получения спама, так что фильтр, выдающий ложные срабатывания, это как лечение угрей, несущее с собой также и риск смерти пациента.

Чем больше спама пользователь получает, тем менее вероятно, что он заметит одно нормальное ("невиновное") письмо, лёжащее в папке для спама. И, как ни странно, чем лучше становятся ваши спамовые фильтры, тем более опасными становятся ложные срабатывания, потому что, когда фильтры действительно хороши, пользователи всё больше больше склонны игнорировать всё, что они поймают.

Я не знаю, почему я так долго избегал попытки статистического подхода. Я думаю, это было из-за того, что я пристрастился к попыткам самому определить спамовые характеристики, как будто я играл в какую-то состязательную игру со спамерами. (Не-хакеры часто не осознают этого, но большинство хакеров являются весьма соревнующимися.) Когда я попробовал статистический анализ, я сразу обнаружил, что он был намного умнее меня. Он обнаружил, конечно, что такие термины как "virtumundo" (спамовая контора в США, аналог "Центра изучения английского" -прим.пер.) и "teens"("подростки") являются хорошими показателями спама. Но он также обнаружил, что слова "per" и "FL" и "ff0000" тоже являются хорошими показателями спама. На самом деле оказалось, что "ff0000" (HTML код для цвета "ярко-красный") является настолько же хорошим показателем спама, как и любое порнографическое слово.

_ _ _


Вот набросок того, как я делаю статистическую фильтрацию. Я начинаю с одного корпуса спамовых и одного корпуса неспамовых писем. В этот момент в каждом из них есть около 4000 сообщений. Я сканирую весь текст, включая заголовки и встроенный HTML и JavaScript, все письма в каждом корпусе. Я сейчас считаю, что алфавитно-цифровые символы, тире, апострофы и знаки долларов являются частью токенов (лексем), и всё остальное – это разделитель токенов. (Вероятно, здесь есть место для улучшения.) Я игнорирую токены, которые состояит только из цифр, и я также игнорирую HTML-комментарии, даже не рассматривая их как разделители токенов.

Я считаю сколько раз каждый токен (сейчас без учета регистра) встречается в каждом корпусе. На этом этапе я имею в результате две большие хэш-таблицы, по одной для каждого корпуса, с отображением токенов на число их вхождений.

Затем я создаю третью хэш-таблицу, в этот раз отображая каждый токен на вероятность того, что письмо, содержащее его, является спамом, которую я вычисляю следующим образом [1]:

```cl
(let  ((g (* 2 (or (gethash word good) 0)))
       (b (or (gethash word bad) 0)))
  (unless (< (+ g b) 5)
    (max .01
        (min .99 (float (/ (min 1 (/ b nbad))
                           (+ (min 1 (/ g ngood))
                              (min 1 (/ b nbad)))))))))
```

где *word* является токеном, чью вероятность мы вычисляем, *good* и *bad* являются хэш-таблицами, которые я создал на  первом шаге, а *ngood* и *nbad* являются количеством неспамовых и спамовых писем соответственно.

Я объяснил это на уровне кода, чтобы показать пару важных деталей. Я хочу немного сместить вероятности так, чтобы избежать ложных срабатываний, и методом проб и ошибок я нашёл, что хороший способ это сделать – это удвоить все числа в *good*. Это помогает различать слова, которые иногда возникают в "добропорядочной" ("законной") почте, и слова, которые там почти никогда не встречаются. Я рассматриваю только слова, которые встречаются всего более пяти раз (на самом деле, из-за удвоения, вхождение трех раз в неспамовой почте будет достаточно). И затем есть вопрос о том, какой вероятность задать словам, которые встречаются в одном корпусе, но не встречаются в другом. Снова методом проб и ошибок я выбрал 0.01 и 0.99. Здесь может быть пространство для настройки, но, с ростом корпуса, такая настройка, в любом случае, произойдёт автоматически.

Особенно наблюдательные отметят, что, в то время как я рассматриваю, в целях счёта частот, каждый корпус как сплошной длинный поток текста, я использую количество писем в каждом вместо использования их общей длины в качестве делителя в вычислении спамовых вероятностей. Это добавляет еще одно небольшое смещение для защиты от ложных срабатываний.

Когда новая письмо приходит, оно сканируется в токены (лексемы), и самые интересные пятнадцать токенов, в которых интересность измеряется тем, насколько далёка их спамовая вероятность, от нейтрального 0.5, используются для того, чтобы вычислить вероятность того, что почта является спамом. Положим *probs* – это список из пятнадцати индивидуальных вероятностей, тогда вычисление скомбинированной[*] вероятности будет таким:

[*] http://www.paulgraham.com/naivebayes.html

```cl
(let  ((prod (apply #'* probs)))
  (/ prod (+ prod (apply #'* (mapcar #'(lambda (x)
                                         (- 1 x))
                                     probs)))))
```

Один вопрос возникает на практике – какую вероятность присвоить слову, которое вы никогда не встречали, т. е. такому, которое отсутствует в хэш-таблице вероятностей слова. Я нашел, снова путем проб и ошибок, что является 0,4 хорошим числом для этого. Если вы никогда не видели слово прежде, это, вероятно, довольно "невиновное" слово; спамовые слова, как правило, все слишком знакомы.

В приложении в конце есть примеры этого алгоритма, примененного к реальным письмам.

Я считаю письмо спамом, если вышеприведенный алгоритм даёт ей вероятность быть спамом более 0.9. Но на практике это не очень важно каким этот порог я поставлю, потому что лишь несколько значений вероятности для писем оказываются в середине диапазона.

_ _ _


Одним большим преимуществом статистического подхода является то, что вы не вынуждены читать так много спама. За последние шесть месяцев, я читал буквально тысячи спамовых писем, и это, действительно, своего рода деморализует. Норберт Винер сказал, если вы конкурируете с рабами, то вы становитесь рабом, и есть что-то аналогично унизительное в соперничестве со спамерами. Чтобы распознать индивидуальные характеристики спама, вы должны попытаться проникнуть в мозг спамера, и, честно говоря, я хочу, потратить как можно меньше времени в умах спамеров, как это возможно.

Но реальное преимущество байесовского подхода, конечно, состоит в том, что вы знаете, что вы измеряете. Фильтры, распознающие характеристики, такие как признание SpamAssassin назначают электронным письмам некие спамовые "баллы". Байесовский подход присваивает настоящую вероятность. Проблема с "баллами" состоит в том, что никто не знает, что они означают. Пользователь не знает что они означают, но что еще хуже, этого не знает и сам разработчик фильтра. Сколько баллов должно получить письмо за то, что в нем есть слово "секс"? Вероятность, конечно, может быть ошибочной, но  мало двусмысленности в том, что она означает, или в том, как данные (признаки) должны быть скомбинированы для её вычисления. Основываясь на моем корпусе, слово "секс" указывает вероятность 0,97 того, что  содержащее его письмо будет спамом, в то время как "сексуальные" ("sexy") выдает вероятность 0,99. И правило Байеса, столь же недвусмысленное, гласит, что письмо, содержащее оба слова имело бы, в (маловероятном) отсутствии  каких-либо других доказательств, 99,97% шансов быть спамом.

Потому что это измерение вероятности, и байесовский подход учитывает все улики в электронной почте, и хорошие, и плохие. Непропорционально редко возникающие в спаме слова (такие как "though"("однако") или "сегодня вечером" или "очевидно"), так же способствуют снижению спамовой вероятности, как плохие слова, такие как "отписаться" и "подписаться" способствуют её увеличению. Так что, "невиновное" в других отношениях письмо, которое, как вдруг оказалось, содержит слово «секс», не будет помечено как спам.

В идеале, конечно, вероятности должны рассчитываться индивидуально для каждого пользователя. Я получаю много писем, содержащих слово "Lisp", и (пока) ни одного спамового, у которого оно бы было. Так что, такое слово, это как своего рода настоящий пароль для отправки мне почты. В моём более раннем программе для фильтрации спама пользователь мог  настроить список таких слов, и почта, содержащая их, автоматически прошла бы фильтры. В свой список я ставил такие слова, как "Lisp", а также мой почтовый индекс  для того, чтобы такие письма, (в другом отношении считаемые за спам) подтверждающие онлайн заказы смогли бы дойти. Я думал, что я очень умён, но я счёл, что байесовский фильтр сделал для меня такую же вещь, но более того, он обнаружил много слов о которых я и не думал.

Когда я сказал в начале, что наши фильтры пропускают менее 5 сообщений спама на 1000, с 0 ложных срабатываний, я говорил о фильтрации мою почты на основе корпуса моей почты. Но эти цифры не вводят в заблуждение, потому что это тот подход который я защищаю: фильтровать письма каждого пользователя на основе спамовых и неспамовых писем, которые он получает. По сути, каждый пользователь должен иметь две кнопки удаления писем: обычное удаление и "удалить как спам". Все удаленное как спам идет в спамовый корпус, а все остальное идет в неспамовый корпус.

Вы можете начать фильтровать для пользователей с начального фильтра, но в конечном счете каждый пользователь должен иметь свои собственные пословные вероятности основанные на той почте что он получает. Это 

- делает фильтры более эффективными,
- позволяет каждому пользователю задать свое собственное точное определение спама и 
- возможно, самое лучшее, это делает трудным для спамеров настройку писем для обхода через фильтры. 

Если большинство "мозгов" фильтра будут находиться в индивидуальных базах данных, то тогда простая настройка спамовых писем на пробитие через изначальные настроенные фильтры не будет ничего гарантировать в том, как хороши они будут в  прохождении фильтров отдельных пользователей, изменчивых от пользователя к пользователю, и гораздо более натренированных.

Фильтрация спама на основе содержания часто сочетается с белым списком, т.е. списком отправителей, сообщения от которых могут быть приняты без фильтрации. Простой способ построения такого белого списка это содержать список адресов, которым пользователь когда-либо посылал письмо. Если читалка почты имеет кнопку "удаление как спам", тогда вы можете также добавлять туда (в белый список) адреса отправителей (поле "От:") каждого письма, которое  пользователь удалил как обычный мусор (т.е. не спам).

Я сторонник белых списков, но, больше как способ сэкономить вычислений, чем как способ улучшать фильтрацию. Раньше я думал, что белые списки сделали бы фильтрацию проще, потому что вам пришлось бы фильтровать электронную почту только от людей, о которых вы никогда не слышали, и некто отправляющий вам почту в первый раз был бы вынужден придерживаться некоей конвенции в том, что он может написать вам. Кто-то, кого вы уже знаете, мог бы послать вам письмо, с разговорами о сексе, но кто-то отправляющий вам почту в первый раз не будет, скорее всего так делать. Проблема в том, люди могут иметь более одного адреса электронной почты, так что новый адрес отправителя ("От:") не гарантирует, что отправитель пишет вам в первый раз. Это не является необычным для старого друга (особенно, если он хакер) внезапно отправить вам письмо с новым адресом отправителя, так что вы не можете рисковать ложными срабатываниями путем особенно строгой фильтрации почты от неизвестных адресов.

В некотором смысле, однако, мои фильтры сами воплощают что-то вроде белого списка (и чёрного списка), потому что они основаны на целых сообщениях, включая заголовки. Так что в этой мере, они "знают" адреса электронной почты надежных отправителей и даже маршрутов, по которым почта приходит от них ко мне. И они знают столько же о спаме, включая имена серверов, почтовых программ, версий и протоколов.

_ _ _


Если бы я думал, что я могу поддерживать постоянными текущие процентные доли фильтрации спама, я бы считал, что эта проблема решена. Но уметь отфильтровывать большинство современного спама, не очень большое достижение, так как спам эволюционирует. В самом деле, большинство антиспамовых техник[*] до сих пор были как пестициды, которые делают не более того, что создают новую, устойчивую породу жучков.

[*] http://www.paulgraham.com/falsepositives.html

Но я больше надеюсь на байесовские фильтры, потому что они эволюционируют вместе со спамом. Так что, в то время как спамеры начинают использовать "c0ck" вместо "cock", чтобы уклониться от простодушных спам-фильтров, основанных на отдельных словах, байесовские фильтры обнаружат это автоматически. Даже более того, «c0ck» является гораздо более изобличающим доказательством, чем «cock» и байесовские фильтры точно знают насколько более.

Тем не менее, каждый, кто предлагает план для фильтрации спама, должен уметь ответить на вопрос: если бы спамеры знали что именно вы делаете, насколько успешно они могли бы пройти через ваш фильтр? Например, я думаю, что, если фильтрация спама основанная на контрольной сумме станет серьёзным препятствием, спамеры просто переключатся на техники mad lib* для генерации тела сообщений. (* mad lib -- американская игра в процессе которой игроки заменяют слова в тексте c сохранением части речи или иного контекста http://en.wikipedia.org/wiki/Mad_Libs -пер.)

Чтобы победить  байесовске фильтры, спамерам не было бы достаточно сделать свои письма уникальными или прекратить использование отдельных неприличных слов. Им бы пришлось сделать свои письма неотличимыми от вашего обычного письма. И это, я думаю, будет серьезно их сдерживать. Спам в большинстве своем это торговые презентации (pitches), так что, если ваша обычная почта не вся целиком состоит из торговых презентаций, спам будет неизбежно иметь другой характер. И спамерам также, конечно, пришлось бы изменить (и продолжать изменять) всю свою инфраструктуру, потому что иначе заголовки выглядели бы так же плохо как когда-то байесовские фильтры, независимо от того что они сделали с телом сообщений. Я недостаточно знаю об инфраструктуре, которую спамеры используют, чтобы знать, насколько трудным было бы заставить выглядеть "невиновными" заголовки, но моя догадка состоит в том, что это было бы ещё труднее, чем заставлять выглядеть "невиновным" тело сообщения.

Предполагая, что они могли бы решить проблему заголовков, спам будущего, вероятно, выглядел бы чем-то вроде этого:

> Привет всем. Думаю, вы должны посмотреть это:
> http://www.27meg.com/foo

потому, что это примерно столько же торговой презентации сколько пространства оставит спамерам фильтр на основе содержания. (На самом деле, даже этому будет трудно пройти фильтры, потому что, если все остальное в электронной почте является нейтральным, вероятность спамовости будет зависеть от URL, и потребуются некоторые усилия, чтобы сделать его выглядящим нейтрально.)

Диапазон спамеров - от бизнеса работающего c так называемыми списками подписки (opt-in lists), которые даже не пытаются скрыть кем они являются, до ребят, которые угоняют почтовые сервера для отправки спама по продвижению порносайтов. Если мы используем фильтрацию, чтобы сократить его выбор до писем подобных приведенному выше, это должно почти поставить спамеров в "законный" конец спектра, выдавив их за рамки бизнеса; спамеры будут чувствовать себя вынужденными согласно различным государственным законам, включить стандартный текст, про то, почему что их спам не является спамом, и как отменить вашу "подписку", и такого рода текст легко распознавать.

(Раньше я думал, что было бы наивно полагать, что строгие законы будут уменьшать количество спама. Сейчас я думаю, что, в то время как более строгие законы не могут уменьшать количество спама, который спамеры отправляют, они безусловно могут помочь фильтрам уменьшить количество спама, которое получатели действительно увидят.)

Вдоль всего спектра, если ограничить коммерческие презентации, которые могут делать спамеры, вы неизбежно будете стремится вывести их из бизнеса. Слово "бизнес" является важным, чтобы запомнить. Спамеры – бизнесмены. Они шлют спам, потому что это работает. Это работает, потому что, хотя доля откликнувшихся  отвратительно низкая (в лучшем 15 на миллион, против 3000 на миллион для рассылки писем по каталогу), стоит это им практически ничего. Стоимость огромна для получателей, около 5 человеко-недель на каждый миллион получателей, которые проводят секунду чтобы удалить спам, но спамеры не будут оплачивать это.

Однако, отправка спама все же чего-то стоит спамеру. [2] Так что, чем меньшей мы сможем сделать долю откликнувшихся, или фильтруя, или используя фильтры вынуждающие спамеров разбавить свои торговые презентации, тем меньше бизнесов сочтёт стоящим своих хлопот посылать спам.

Причина, по которой спамеры используют те виды торговых презентаций[*] которые они используют в том, что они это делают для увеличения доли отклика. Это, возможно, даже более отвратительно, чем проникновение в мозги спамера, но давайте быстро взглянем изнутри в мозги кого-то, кто откликается на спам. Этот человек либо поразительно доверчив либо находится в глубоком отрицании своих сексуальных интересов. В любом случае, спам, отталкивающий либо идиотской, каким он нам кажется, для них он вдохновляющий. Спамеры не писали бы таких вещей, если бы они не звучали волнующе. И тексты вроде таких: "думаю, что вы должны посмотреть это" просто близко не имели бы рычага влияния на получателя спама, так же как и другие вещи того сорта, которые спамеры сейчас говорят. Результат: если он не может содержать продающих коммерческих презентаций, спам становится менее эффективным в качестве маркетингового движка, и меньше фирм хотят его использовать.
[*] http://www.milliondollaremails.com/

Это – крупная победа в конце концов. Я начал писать программное обеспечение для фильтрации спама, потому что я не хочу больше быть вынужденным смотреть на некоторые вещи. Но, если мы станем достаточно хорошими в фильтрации спама, он перестанет работать, и спамеры на самом деле перестанут слать его.

    _ _ _


С точки зрения получателя, спам легко распознаваем. Если бы вы наняли кого-нибудь, чтобы читать вашу почту и игнорировать спам, у него не было бы с этим никаких проблем. Если не прибегать к созданию ИИ, насколько многое мы должны проделать, чтобы автоматизировать этот процесс?

Я думаю, мы сможем решить эту проблему довольно простыми алгоритмами. На самом деле, я обнаружил, что вы можете вполне приемлемо фильтровать современный спам, используя ничего больше, чем байесовскую комбинацию вероятностей спамовости отдельных слов. Используя немного настроенный (как описано ниже) байесовский фильтр, мы теперь промахиваемся менее чем на 5 сообщений из 1000 спамовых сообщений (неправильно распознавая спам как не-спам), с 0 количеством ложных срабатываний.

Статистический подход  обычно не является тем первым подходом, который пробуют, когда пишут фильтры спама. Первым инстинктом большинства хакеров будет попробовать написать программу, которая распознает индивидуальные свойства спама. Вы смотрите на спамовые письма, и думаете, про наглость этих парней, пытающихся отправить мне письмо, начинающееся на "Дорогой Друг", или с темой письма, сплошь состоящей из прописных букв и завершающейся восемью восклицательными знаками. Я могу отфильтровать такие штуки практически одной строчкой кода.

Вы так и делаете, и сначала это работает. Несколько простых правил откусят большой кусок от вашего входящего спама. Простой поиск слова "click"("щелкните") поймает 79,7% электронных писем в моем корпусе спамовых текстов, выдавая лишь 1,2% ложноположительных результатов.

Я потратил почти шесть месяцев в написании программы, которая искала бы индивидуальные характеристики (features) спама, до того, как я попробовал статистический подход. Я обнаружил, что распознование нескольких последних процентов спама стало очень трудным, и что усиливая строгость фильтров, я получал больше ложных срабатываний.

Ложные срабатывания (ложноположительные результаты, false positives) – это нормальные ("невиновные") письма, которые были ошибочно распознаны как спам. Для большинства пользователей пропажа нормального ("законного") письма на порядок хуже получения спама, так что фильтр, выдающий ложные срабатывания, это как лечение угрей, несущее с собой также и риск смерти пациента.

Чем больше спама пользователь получает, тем менее вероятно, что он заметит одно нормальное ("невиновное") письмо, лёжащее в папке для спама. И, как ни странно, чем лучше становятся ваши спамовые фильтры, тем более опасными становятся ложные срабатывания, потому что, когда фильтры действительно хороши, пользователи всё больше больше склонны игнорировать всё, что они поймают.

Я не знаю, почему я так долго избегал попытки статистического подхода. Я думаю, это было из-за того, что я пристрастился к попыткам самому определить спамовые характеристики, как будто я играл в какую-то состязательную игру со спамерами. (Не-хакеры часто не осознают этого, но большинство хакеров являются весьма соревнующимися.) Когда я попробовал статистический анализ, я сразу обнаружил, что он был намного умнее меня. Он обнаружил, конечно, что такие термины как "virtumundo" (спамовая контора в США, аналог "Центра изучения английского" -прим.пер.) и "teens"("подростки") являются хорошими показателями спама. Но он также обнаружил, что слова "per" и "FL" и "ff0000" тоже являются хорошими показателями спама. На самом деле оказалось, что "ff0000" (HTML код для цвета "ярко-красный") является настолько же хорошим показателем спама, как и любое порнографическое слово.

_ _ _


Вот набросок того, как я делаю статистическую фильтрацию. Я начинаю с одного корпуса спамовых и одного корпуса неспамовых писем. В этот момент в каждом из них есть около 4000 сообщений. Я сканирую весь текст, включая заголовки и встроенный HTML и JavaScript, все письма в каждом корпусе. Я сейчас считаю, что алфавитно-цифровые символы, тире, апострофы и знаки долларов являются частью токенов (лексем), и всё остальное – это разделитель токенов. (Вероятно, здесь есть место для улучшения.) Я игнорирую токены, которые состояит только из цифр, и я также игнорирую HTML-комментарии, даже не рассматривая их как разделители токенов.

Я считаю сколько раз каждый токен (сейчас без учета регистра) встречается в каждом корпусе. На этом этапе я имею в результате две большие хэш-таблицы, по одной для каждого корпуса, с отображением токенов на число их вхождений.

Затем я создаю третью хэш-таблицу, в этот раз отображая каждый токен на вероятность того, что письмо, содержащее его, является спамом, которую я вычисляю следующим образом [1]:

```cl
(let  ((g (* 2 (or (gethash word good) 0)))
       (b (or (gethash word bad) 0)))
  (unless (< (+ g b) 5)
    (max .01
        (min .99 (float (/ (min 1 (/ b nbad))
                           (+ (min 1 (/ g ngood))
                              (min 1 (/ b nbad)))))))))
```

где word является токеном, чью вероятность мы вычисляем, good и bad являются хэш-таблицами, которые я создал на  первом шаге, а ngood и nbad являются количеством неспамовых и спамовых писем соответственно.

Я объяснил это на уровне кода, чтобы показать пару важных деталей. Я хочу немного сместить вероятности так, чтобы избежать ложных срабатываний, и методом проб и ошибок я нашёл, что хороший способ это сделать – это удвоить все числа в good. Это помогает различать слова, которые иногда возникают в "добропорядочной" ("законной") почте, и слова, которые там почти никогда не встречаются. Я рассматриваю только слова, которые встречаются всего более пяти раз (на самом деле, из-за удвоения, вхождение трех раз в неспамовой почте будет достаточно). И затем есть вопрос о том, какой вероятность задать словам, которые встречаются в одном корпусе, но не встречаются в другом. Снова методом проб и ошибок я выбрал 0.01 и 0.99. Здесь может быть пространство для настройки, но, с ростом корпуса, такая настройка, в любом случае, произойдёт автоматически.

Особенно наблюдательные отметят, что, в то время как я рассматриваю, в целях счёта частот, каждый корпус как сплошной длинный поток текста, я использую количество писем в каждом вместо использования их общей длины в качестве делителя в вычислении спамовых вероятностей. Это добавляет еще одно небольшое смещение для защиты от ложных срабатываний.

Когда новая письмо приходит, оно сканируется в токены (лексемы), и самые интересные пятнадцать токенов, в которых интересность измеряется тем, насколько далёка их спамовая вероятность, от нейтрального 0.5, используются для того, чтобы вычислить вероятность того, что почта является спамом. Положим probs – это список из пятнадцати индивидуальных вероятностей, тогда вычисление скомбинированной[*] вероятности будет таким:

[*] http://www.paulgraham.com/naivebayes.html

```cl
(let  ((prod (apply #'* probs)))
  (/ prod (+ prod (apply #'* (mapcar #'(lambda (x)
                                         (- 1 x))
                                     probs)))))
```

Один вопрос возникает на практике – какую вероятность присвоить слову, которое вы никогда не встречали, т. е. такому, которое отсутствует в хэш-таблице вероятностей слова. Я нашел, снова путем проб и ошибок, что является 0,4 хорошим числом для этого. Если вы никогда не видели слово прежде, это, вероятно, довольно "невиновное" слово; спамовые слова, как правило, все слишком знакомы.

В приложении в конце есть примеры этого алгоритма, примененного к реальным письмам.

Я считаю письмо спамом, если вышеприведенный алгоритм даёт ей вероятность быть спамом более 0.9. Но на практике это не очень важно каким этот порог я поставлю, потому что лишь несколько значений вероятности для писем оказываются в середине диапазона.

_ _ _


Одним большим преимуществом статистического подхода является то, что вы не вынуждены читать так много спама. За последние шесть месяцев, я читал буквально тысячи спамовых писем, и это, действительно, своего рода деморализует. Норберт Винер сказал, если вы конкурируете с рабами, то вы становитесь рабом, и есть что-то аналогично унизительное в соперничестве со спамерами. Чтобы распознать индивидуальные характеристики спама, вы должны попытаться проникнуть в мозг спамера, и, честно говоря, я хочу, потратить как можно меньше времени в умах спамеров, как это возможно.

Но реальное преимущество байесовского подхода, конечно, состоит в том, что вы знаете, что вы измеряете. Фильтры, распознающие характеристики, такие как признание SpamAssassin назначают электронным письмам некие спамовые "баллы". Байесовский подход присваивает настоящую вероятность. Проблема с "баллами" состоит в том, что никто не знает, что они означают. Пользователь не знает что они означают, но что еще хуже, этого не знает и сам разработчик фильтра. Сколько баллов должно получить письмо за то, что в нем есть слово "секс"? Вероятность, конечно, может быть ошибочной, но  мало двусмысленности в том, что она означает, или в том, как данные (признаки) должны быть скомбинированы для её вычисления. Основываясь на моем корпусе, слово "секс" указывает вероятность 0,97 того, что  содержащее его письмо будет спамом, в то время как "сексуальные" ("sexy") выдает вероятность 0,99. И правило Байеса, столь же недвусмысленное, гласит, что письмо, содержащее оба слова имело бы, в (маловероятном) отсутствии  каких-либо других доказательств, 99,97% шансов быть спамом.

Потому что это измерение вероятности, и байесовский подход учитывает все улики в электронной почте, и хорошие, и плохие. Непропорционально редко возникающие в спаме слова (такие как "though"("однако") или "сегодня вечером" или "очевидно"), так же способствуют снижению спамовой вероятности, как плохие слова, такие как "отписаться" и "подписаться" способствуют её увеличению. Так что, "невиновное" в других отношениях письмо, которое, как вдруг оказалось, содержит слово «секс», не будет помечено как спам.

В идеале, конечно, вероятности должны рассчитываться индивидуально для каждого пользователя. Я получаю много писем, содержащих слово "Lisp", и (пока) ни одного спамового, у которого оно бы было. Так что, такое слово, это как своего рода настоящий пароль для отправки мне почты. В моём более раннем программе для фильтрации спама пользователь мог  настроить список таких слов, и почта, содержащая их, автоматически прошла бы фильтры. В свой список я ставил такие слова, как "Lisp", а также мой почтовый индекс  для того, чтобы такие письма, (в другом отношении считаемые за спам) подтверждающие онлайн заказы смогли бы дойти. Я думал, что я очень умён, но я счёл, что байесовский фильтр сделал для меня такую же вещь, но более того, он обнаружил много слов о которых я и не думал.

Когда я сказал в начале, что наши фильтры пропускают менее 5 сообщений спама на 1000, с 0 ложных срабатываний, я говорил о фильтрации мою почты на основе корпуса моей почты. Но эти цифры не вводят в заблуждение, потому что это тот подход который я защищаю: фильтровать письма каждого пользователя на основе спамовых и неспамовых писем, которые он получает. По сути, каждый пользователь должен иметь две кнопки удаления писем: обычное удаление и "удалить как спам". Все удаленное как спам идет в спамовый корпус, а все остальное идет в неспамовый корпус.

Вы можете начать фильтровать для пользователей с начального фильтра, но в конечном счете каждый пользователь должен иметь свои собственные пословные вероятности основанные на той почте что он получает. Это (a) делает фильтры более эффективными, (b) позволяет каждому пользователю задать свое собственное точное определение спама и (c) возможно, самое лучшее, это делает трудным для спамеров настройку писем для обхода через фильтры. Если большинство "мозгов" фильтра будут находиться в индивидуальных базах данных, то тогда простая настройка спамовых писем на пробитие через изначальные настроенные  фильтры не будет ничего гарантировать в том, как хороши они будут в  прохождении фильтров отдельных пользователей, изменчивых. от пользователя к пользователю, и гораздо более натренированных.

Фильтрация спама на основе содержания часто сочетается с белым списком, т.е. списком отправителей, сообщения от которых могут быть приняты без фильтрации. Простой способ построения такого белого списка это содержать список адресов, которым пользователь когда-либо посылал письмо. Если читалка почты имеет кнопку "удаление как спам", тогда вы можете также добавлять туда (в белый список) адреса отправителей (поле "От:") каждого письма, которое  пользователь удалил как обычный мусор (т.е. не спам).

Я сторонник белых списков, но, больше как способ сэкономить вычислений, чем как способ улучшать фильтрацию. Раньше я думал, что белые списки сделали бы фильтрацию проще, потому что вам пришлось бы фильтровать электронную почту только от людей, о которых вы никогда не слышали, и некто отправляющий вам почту в первый раз был бы вынужден придерживаться некоей конвенции в том, что он может написать вам. Кто-то, кого вы уже знаете, мог бы послать вам письмо, с разговорами о сексе, но кто-то отправляющий вам почту в первый раз не будет, скорее всего так делать. Проблема в том, люди могут иметь более одного адреса электронной почты, так что новый адрес отправителя ("От:") не гарантирует, что отправитель пишет вам в первый раз. Это не является необычным для старого друга (особенно, если он хакер) внезапно отправить вам письмо с новым адресом отправителя, так что вы не можете рисковать ложными срабатываниями путем особенно строгой фильтрации почты от неизвестных адресов.

В некотором смысле, однако, мои фильтры сами воплощают что-то вроде белого списка (и чёрного списка), потому что они основаны на целых сообщениях, включая заголовки. Так что в этой мере, они "знают" адреса электронной почты надежных отправителей и даже маршрутов, по которым почта приходит от них ко мне. И они знают столько же о спаме, включая имена серверов, почтовых программ, версий и протоколов.

_ _ _


Если бы я думал, что я могу поддерживать постоянными текущие процентные доли фильтрации спама, я бы считал, что эта проблема решена. Но уметь отфильтровывать большинство современного спама, не очень большое достижение, так как спам эволюционирует. В самом деле, большинство антиспамовых техник[*] до сих пор были как пестициды, которые делают не более того, что создают новую, устойчивую породу жучков.

[*] http://www.paulgraham.com/falsepositives.html

Но я больше надеюсь на байесовские фильтры, потому что они эволюционируют вместе со спамом. Так что, в то время как спамеры начинают использовать "c0ck" вместо "cock", чтобы уклониться от простодушных спам-фильтров, основанных на отдельных словах, байесовские фильтры обнаружат это автоматически. Даже более того, «c0ck» является гораздо более изобличающим доказательством, чем «cock» и байесовские фильтры точно знают насколько более.

Тем не менее, каждый, кто предлагает план для фильтрации спама, должен уметь ответить на вопрос: если бы спамеры знали что именно вы делаете, насколько успешно они могли бы пройти через ваш фильтр? Например, я думаю, что, если фильтрация спама основанная на контрольной сумме станет серьёзным препятствием, спамеры просто переключатся на техники mad lib* для генерации тела сообщений. (* mad lib -- американская игра в процессе которой игроки заменяют слова в тексте c сохранением части речи или иного контекста http://en.wikipedia.org/wiki/Mad_Libs -пер.)

Чтобы победить  байесовске фильтры, спамерам не было бы достаточно сделать свои письма уникальными или прекратить использование отдельных неприличных слов. Им бы пришлось сделать свои письма неотличимыми от вашего обычного письма. И это, я думаю, будет серьезно их сдерживать. Спам в большинстве своем это торговые презентации (pitches), так что, если ваша обычная почта не вся целиком состоит из торговых презентаций, спам будет неизбежно иметь другой характер. И спамерам также, конечно, пришлось бы изменить (и продолжать изменять) всю свою инфраструктуру, потому что иначе заголовки выглядели бы так же плохо как когда-то байесовские фильтры, независимо от того что они сделали с телом сообщений. Я недостаточно знаю об инфраструктуре, которую спамеры используют, чтобы знать, насколько трудным было бы заставить выглядеть "невиновными" заголовки, но моя догадка состоит в том, что это было бы ещё труднее, чем заставлять выглядеть "невиновным" тело сообщения.

Предполагая, что они могли бы решить проблему заголовков, спам будущего, вероятно, выглядел бы чем-то вроде этого:

  Привет всем. Думаю, вы должны посмотреть это:
  http://www.27meg.com/foo

потому, что это примерно столько же торговой презентации сколько пространства оставит спамерам фильтр на основе содержания. (На самом деле, даже этому будет трудно пройти фильтры, потому что, если все остальное в электронной почте является нейтральным, вероятность спамовости будет зависеть от URL, и потребуются некоторые усилия, чтобы сделать его выглядящим нейтрально.)

Диапазон спамеров - от бизнеса работающего c так называемыми списками подписки (opt-in lists), которые даже не пытаются скрыть кем они являются, до ребят, которые угоняют почтовые сервера для отправки спама по продвижению порносайтов. Если мы используем фильтрацию, чтобы сократить его выбор до писем подобных приведенному выше, это должно почти поставить спамеров в "законный" конец спектра, выдавив их за рамки бизнеса; спамеры будут чувствовать себя вынужденными согласно различным государственным законам, включить стандартный текст, про то, почему что их спам не является спамом, и как отменить вашу "подписку", и такого рода текст легко распознавать.

(Раньше я думал, что было бы наивно полагать, что строгие законы будут уменьшать количество спама. Сейчас я думаю, что, в то время как более строгие законы не могут уменьшать количество спама, который спамеры отправляют, они безусловно могут помочь фильтрам уменьшить количество спама, которое получатели действительно увидят.)

Вдоль всего спектра, если ограничить коммерческие презентации, которые могут делать спамеры, вы неизбежно будете стремится вывести их из бизнеса. Слово "бизнес" является важным, чтобы запомнить. Спамеры – бизнесмены. Они шлют спам, потому что это работает. Это работает, потому что, хотя доля откликнувшихся  отвратительно низкая (в лучшем 15 на миллион, против 3000 на миллион для рассылки писем по каталогу), стоит это им практически ничего. Стоимость огромна для получателей, около 5 человеко-недель на каждый миллион получателей, которые проводят секунду чтобы удалить спам, но спамеры не будут оплачивать это.

Однако, отправка спама все же чего-то стоит спамеру. [2] Так что, чем меньшей мы сможем сделать долю откликнувшихся, или фильтруя, или используя фильтры вынуждающие спамеров разбавить свои торговые презентации, тем меньше бизнесов сочтёт стоящим своих хлопот посылать спам.

Причина, по которой спамеры используют те виды торговых презентаций[*] которые они используют в том, что они это делают для увеличения доли отклика. Это, возможно, даже более отвратительно, чем проникновение в мозги спамера, но давайте быстро взглянем изнутри в мозги кого-то, кто откликается на спам. Этот человек либо поразительно доверчив либо находится в глубоком отрицании своих сексуальных интересов. В любом случае, спам, отталкивающий либо идиотской, каким он нам кажется, для них он вдохновляющий. Спамеры не писали бы таких вещей, если бы они не звучали волнующе. И тексты вроде таких: "думаю, что вы должны посмотреть это" просто близко не имели бы рычага влияния на получателя спама, так же как и другие вещи того сорта, которые спамеры сейчас говорят. Результат: если он не может содержать продающих коммерческих презентаций, спам становится менее эффективным в качестве маркетингового движка, и меньше фирм хотят его использовать.
[*] http://www.milliondollaremails.com/

Это – крупная победа в конце концов. Я начал писать программное обеспечение для фильтрации спама, потому что я не хочу больше быть вынужденным смотреть на некоторые вещи. Но, если мы станем достаточно хорошими в фильтрации спама, он перестанет работать, и спамеры на самом деле перестанут слать его.

_ _ _


Из всех подходов борьбы со спамом, от программного обеспечения до законов, я считаю, что байесовская фильтрация будет просто наиболее эффективным. Но я также думаю, что чем больше различных видов антиспамовых усилий мы предпринимем, тем лучше, потому что любая мера, которая сдерживает спамеров, будет вести к тому чтобы делать фильтрацию более лёгкой. И даже в мире фильтрации, основанной на содержании, я думаю, что это будет хорошо, если есть много различных видов программного обеспечения, используемого одновременно. Чем больше есть разных  фильтров, тем труднее будет для спамеров настроить свой спам, чтобы пройти через них.



### Примеры фильтрации

Вот[*] пример спама, который пришёл в то время, как я писал эту статью. Пятнадцать самых интересных слов в этом спама являются:
[*] http://lib.store.yahoo.net/lib/paulgraham/spam1.txt

qvp0045
indira
mx-05
intimail
$7500
freeyankeedom
cdo
bluefoxmedia
jpg
unsecured
platinum
3d0
qves
7c5
7c266675

Слова – смесь материала из заголовков и тела сообщений, что типично для спама. Также типично для спама, что каждое из этих слов имеет спамовую вероятность, в моей базе данных, 0,99. На самом деле есть более пятнадцати слов с вероятностями 0,99, а эти -  просто первые пятнадцать встреченных.

К сожалению, это делает это письмо скучным примером использования правила Байеса. Чтобы увидеть интересное разнообразие вероятностей мы должны посмотреть на этот[*] на самом деле довольно нетипичный спам.
[*] http://lib.store.yahoo.net/lib/paulgraham/spam2.txt

Пятнадцатью самых интересных слов в этом спаме, с их вероятностями, являются:

madam 0.99
promotion 0.99
republic 0.99
shortest 0.047225013
mandatory 0.047225013
standardization 0.07347802
sorry 0.08221981
supported 0.09019077
people's 0.09019077
enter 0.9075001
quality 0.8921298
organization 0.12454646
investment 0.8568143
very 0.14758544
valuable 0.82347786

На этот раз, улики -- смесь из хорошего и плохого. Слово вроде "shortest" такое же доказательство невиновности, как слово вроде "мадам" или "продвижение" -- доказательство вины. Но всё еще доводы за вину более вески. Если вы скомбинируете эти числа в соответствии с правилом Байеса, в результирующая вероятность будет 0,9027.

"Мадам" явно из спама начинающегося на: "Дорогой Сэр или Мадам". Они не очень распространены, но слово "мадам" никогда не встречается в моих "законных" письмах, и такое соотношение говорит о всем.

"Республика" имеет высокие баллы, потому что это слово часто появляется в спамовых письмах нигерийских мошенническов, а также встречается один или два раза в спаме, ссылающемся на Корею и Южную Африку. Вы могли бы сказать, что это случайность, что это, таким образом, помогает идентифицировать этот спам. Но я обнаружил, при детальном рассмотрении спамовой вероятности, что есть много таких случайностей, и они имеют необъяснимую тенденцию толкать вещи в правильном направлении, а не в неправильном. В таком случае, это не совсем случайно, что слово "Республика" встречается у нигерийском спаме и также в этом спаме. Есть целый класс сомнительных деловых предложений, включающих менее развитые страны, а те, в свою очередь, скорее будут иметь имена, которые явно указывают (потому что они ими не являются), что они - республики.[3]

С другой стороны, "enter" – настоящий промах. Слово встречается обычно в инструкциях по отписке от  рассылок, но здесь оно используется полностью невиновным образом. К счастью статистический подход является довольно устойчивым и может терпеть немало промахов, прежде чем результаты начинают становиться совсем негодными.

Для сравнения, вот[*] пример той редкой птицы, спама, который проходит через фильтры. Почему? Потому что по чистой случайности письмо оказалось заполненным словами, которые встерчаются в моей реальной электронной почте:
[*] http://lib.store.yahoo.net/lib/paulgraham/hostexspam.txt

perl 0.01
python 0.01
tcl 0.01
scripting 0.01
morris 0.01
graham 0.01491078
guarantee 0.9762507
cgi 0.9734398
paul 0.027040077
quite 0.030676773
pop3 0.042199217
various 0.06080265
prices 0.9359873
managed 0.06451222
difficult 0.071706355

Здесь есть пара штук хороших новостей. Во-первых, это письмо, вероятно, не пройдет через фильтры, кого-то, кто не оказался специалистом в языках программирования и у кого нет хорошего друга с именем Моррис. Для среднестатистического пользователя все топ-пять слов здесь были бы нейтральны и не посодействовали бы спамовой вероятности.

Во-вторых, я думаю, фильтрация на основе пар слов (см. ниже) вполне может также поймать это: "cost effective", "setup fee", "money back" -- ("затратоэффекктивный", "плата за настройку", "возврат денег") - довольно уличающий материал. И, конечно, если они по-прежнему спамили меня (или сеть частью которой я был), "Hostex" сама была бы распознана в качестве спамового термина.

Наконец, вот[*] невиновное письмо. Его пятнадцать самых интересных слов следующие:
[*] http://lib.store.yahoo.net/lib/paulgraham/legit.txt

continuation 0.01
describe 0.01
continuations 0.01
example 0.033600237
programming 0.05214485
i'm 0.055427782
examples 0.07972858
color 0.9189189
localhost 0.09883721
hi 0.116539136
california 0.84421706
same 0.15981844
spot 0.1654587
us-ascii 0.16804294
what 0.19212411

Большинство слов здесь свидетельствует о том, что письмо – невиновное.
Тут есть два плохо пахнущих слова, "color" (спамеры любят цветные шрифты) и "California" (которое встречается в "рекомендациях", а также в списках выбора в формах), но их недостаточно, чтобы перевесить очевидно невиновные слова, как "continuation" и "example".

Интересно, что "describe" оценивается как полностью невиновное. Оно не встретилось ни в одном из моих 4000 спамовых писем. Данные, оказывается, полны таких сюрпризов. Одна из вещей, вы узнаете, когда вы анализируете спамовые тексты, это как сузить подмножество языка в котором спамеры работают. Этот факт, взятый вместе с не менее характерным "словарем" почты каждого отдельного пользователя, и делает байесовую фильтрацию хорошим выбором.

### Больше идей

Одна идея, которую я ещё не пробовал, состоит в том, чтобы профильтроваться по парам слов или даже по тройкам, а не по отдельным словам. Это должно дать гораздо более точную оценку вероятности. Например, в моей текущей базе данных, слово "предложения" имеет вероятность 0,96. Если бы вы основывали вероятности на парах слов, в конечном счете получились бы "специальные предложения" и "ценные предложения"  с вероятностями 0.99 и предположим "подход предлагает" (как часть "этот подход предлагает"), имеющими вероятность 0.1 или меньше.

Причина, по которой я не сделал это, состоит в том, что фильтрация по отдельным словам уже работает и так хорошо. Но это означает, что есть место, чтобы усилить фильтры, если спам станет обнаруживать все труднее. (Любопытно, что фильтр на основе пар слов будет в на самом деле текстовым генератором как цепью Маркова, работающей в обратном направлении.)

Специфические характеристики спама (например, скрытый адрес получателя в поле письма "Кому:") имеет, конечно, ценность в распознавании спама. Их можно рассматривать в этом алгоритме, рассматривая их в качестве виртуальных слов. Я, наверное, сделаю это в будущих версиях, по крайней мере, для нескольких из самых вопиющих показателей спама. Фильтры. распознающие характеристики спама правы во многих деталях; чего им недостаёт – общей дисциплины для комбинирования доказательств.

Распознавание характеристик не-спама может быть важнее, чем распознавание характеристик спама. Ложные срабатывания - это такое беспокойство что они требуют чрезвычайных мер. Я, вероятно, в будущих версиях добавлю второй уровень тестирования, сконструированный специально, чтобы избежать ложноположительных результатов. Если письмо инициирует этот второй уровень фильтров, то оно будет принято, даже если его спамовая вероятность будет выше порога.

Я не ожидаю, что этот второй уровень фильтрации будет байесовским. Это неизбежно будет не только созданным специально для этой цели, этого уровня, но также основанным на предположениях, потому что число ложных срабатываний не будет стремиться быть достаточно большим, чтобы обнаружить закономерности. (Во всяком случае, хорошо, чтобы резервная система не полагалась на те же технологии, что и основная система).

Другая вещь, которую я могу попробовать в будущем, состоит в том, чтобы сосредоточить дополнительное внимание на конкретных частях письма. Например, около 95% от текущего спама включает в себя URL сайта, который они хотят чтобы вы посетили. (Остальные 5% хотят, чтобы вы назвали номер телефона, ответили по емейлу или на почтовый адрес США, или в некоторых случаях, чтобы купить определенные акции.) Гиперссылки в таких случаях практически достаточно самой по себе, чтобы определить, является ли адрес электронной почты спамом.

Доменные имена отличаются от остального текста в электронной почте (если она не на немецком), в том, что они часто состоят из нескольких слов склеенных вместе. Хотя это в общем случае вычислительно дорого, но может стоит попытаться разделить их. Если фильтр никогда не видел раньше лексему "xxxporn", он будет иметь отдельную спамовую вероятность 0,4, в то время как "xxx" и "porn" по отдельности имеют вероятности (в моём корпусе) 0,9889 и 0,99 соответственно и совместную вероятность 0,9998.

Я ожидаю, что разложение доменных имен станет более важным, как спамеры постепенно будут вынуждены прекратить использование компрометирующих слов в тексте своих сообщений. (Гиперссылка с IP-адресом, конечно, крайне уличающий знак, за исключением почты небольшого количества системных администраторов.)

Может быть хорошей идеей, иметь совместно поддерживаемый список URL-адресов, которые продвигают спамеры. Мы тогда нуждылись бы в метрике доверия типа той, что исследовались Рэф-Левиеном, чтобы предотвратить злонамеренные или некомпетентные заявки в такой список, но, если бы у нас была такая вещь, она бы предоставила поддержку любой программе фильтрации. Она также являлась бы удобной основой для бойкотов.

Другой способ проверить сомнительные URL состоял бы в том, чтобы послать паука веб-робота посетить сайт до того, как пользователь заглянул в письмо, упоминающее его. Вы могли бы так же использовать байесовский фильтр, чтобы оценить сайт так, как вы использовали бы для письма, и всё, что находилось на сайте, могло бы быть включено в вычисление вероятности письма быть спамом. Гиперссылка, которая ведет к редиректу, конечно, была бы особенно подозрительной.

Совместный проект, который я думаю, действительно был бы хорошей идеей  - это был бы сбор гигантский корпуса спама. Большой, чистый корпус является ключом к тому, чтобы сделать байесовскую фильтрацию хорошо работающей. Байесовские фильтры на самом деле могли бы использовать корпус, как входные данные. Но такой корпус был бы так же полезным для других типов фильтров, потому что он мог бы использоваться, чтобы протестировать их.

Создание такого корпуса представляет некоторые технические проблемы. Конечно, нам были бы нужны метрики доверия, чтобы предотвратить злонамеренные или некомпетентные вписывания. Нам также нужны были бы способы стирания личной информации (не только лишь адреса-кому и в полях CC (копия-кому), но также, например, в параметрах URL для отписки, которые часто содержат "адреса-Кому" в закодированной форме) из писем в корпусе. Если кто-то захочет взяться за этот проект, это будет хорошо для мира.

### Определение спама

Я думаю, есть примерный консенсус по поводу того, что есть спам, но было бы полезно иметь явное определение. Нам нужно будет сделать это, если мы захотим создать центральный корпус спама или даже содержательно сравнить показатели фильтрации спама.

Во-первых, спам не коммерческая нежелательная почта. Если кто-то в моем районе слышал, что я искал старый 3-скоростной Raleigh в  хорошем состоянии и прислал мне по электронной почте письмо с предложением продать мне такую штуку, я был бы в восторге, и все же это письмо, как коммерческое, так и непрошеное. Определяющая особенность спама (фактически, её смысл существования) не состоит в том, что он непрошен, но в том что он создан автоматически.

Кроме того, это просто случайность, что спам, обычно, коммерческой. Если бы кто-нибудь начал массовой рассылку электронной почты, чтобы поддержать какое-нибудь политическое движение, например, она бы являлась настолько же спамом как и электронная почта, продвигающая порносайт.

Я предлагаю определить спам как нежелательную автоматизированную электронную почту. Таким образом, это определение включает в себя некоторые письма, которые многие юридические определения спама не содержат. Юридические определения спама, на которые повлияли, возможно, лоббисты, предрасположены исключать письмо, отправленное компаниями, которые имеют "существующее отношение" к получателю. Но покупка чего-то у компании, например, не подразумевает, что вы просили у них постоянного прихода электронной писем. Если я заказываю что-нибудь из веб-магазина и они затем шлют мне поток спама, это всё еще спам.

Компании рассылающие спам часто дают вам возможность "отписаться", или просят вас пойти на их сайт и изменить ваши "настройки учетной записи", если вы хотите перестать получать спам. Но этого недостаточно, чтобы перестать считать письмо спамом. Не отписываться не то же самое, что подписаться. Если получатель явно не отмечал галочкой в четко описанном поле формы (умолчанием которого было "нет") с просьбой получить письмо, то тогда это спам.

Есть случаи деловых отношений, когда вы неявно запрашиваете некоторые виды писем. Когда вы заказываете что-то онлайн, я думаю, что вы неявно просите получить квитанцию заказа, а также уведомление об отгрузке товара. Я не возражаю, когда Verisign посылает мне письмо с предупреждением, что срок доменного имени истекает (по крайней мере, если они действительно его регистратор). Но когда VeriSign отправляет мне письмо с предложением "БЕСПЛАТНОГО Руководства по Созданию Моего Веб-Сайта с Электронной Коммерцией", то это спам.

---

[1] Примеры этой статьи переведены на Common Lisp для (верите или нет) большей доступности. Приложение, описанное здесь, мы написали, чтобы протестировать новый диалект Lisp, под названием Arc, который ещё не выпущен.

[2] Сейчас самая низкая ставка, кажется, почти $200 для отправки миллиона спамовых писем. Это очень дешево, 1/50 цента за спамовое письмо. Но фильтрация 95% спама, например, увеличила бы затраты спамеров на достижение заданной аудитории в 20 раз. Немногие могут иметь достаточно большую маржу, чтобы вынести это.

[3] Как эмпирическое правило, чем больше эпитетов перед названием страны, тем более коррумпированны ее правители. Страна, называемая Социалистическая Народная Демократическая Республика X, является, вероятно, последним местом в мире, в котором вы хотели бы жить.

Мои благодарности Саре Харлин за чтение эскизов этого эссе; Дэниелу Гиффину (который также пишет продакшн версию интерпретатора языка Arc) за нескольких хороших идей о фильтрации, и создание нашей почтовой инфраструктуры; Роберту Моррису, Тревору Блэкуэллу и Эранн Гэт за многочисленные дискуссии о спаме; Рафу Левину за совет о метриках доверия; а также Чипу Колдуэллу и Сэм Стейнголд за совет о статистике.





## Вкус - созидателям

«... их [эквантов] эстетическое неприятие Коперником послужило одной из основных причин отказа от Птолемеевой системы...»

    Томас Кун, Коперниканская революция

«Все мы прошли школу Келли Джонсона и фанатично верили в его утверждение, что самолет, выглядящий красиво, будет летать так же».

    Бен Рич, Мастерские скунса

«Красота – первый тест: в вечности нет места для некрасивой математики»

- Г.Х. Харди, Оправдание математики


Недавно я говорил со своим другом, преподавателем Массачусетского Технологического института. Его область сейчас очень популярна и каждый год на него обрушивается шквал заявок от потенциальных дипломников. «Многие из них кажутся очень неглупыми.» - сказал он, - «Но я не могу сказать, обладают ли они каким-либо вкусом».

 
﻿

Вкус. Нечасто теперь можно услышать это слово. И все же, нам не обойтись без такого понятия - как бы его ни называли. Мой друг имел в виду, что нужны студенты, являющиеся не только хорошими специалистами, но и способные использовать свои знания для создания красивых вещей.

Математики называют хорошую работу «красивой» точно так же, как – сейчас и в прошлом – это делают и делали ученые, инженеры, музыканты, архитекторы, конструкторы, писатели и художники. Вопрос в том, используют ли все они одно слово случайно или же в случайности есть своя закономерность? Если таковая присутствует, то можем ли мы критерии красоты, определенные в одной области, применить в другой?

Для людей, создающих новое, это не отвлеченные теоретические вопросы. Если существует такая вещь, как красота, нам нужно уметь распознавать ее. Хороший вкус нужен для создания хороших вещей. Чтобы не рассуждать об отвлеченных абстракциях, зададимся практическим вопросом: как делать хорошие вещи?

 

Стоит упомянуть вкус и многие скажут: «вкус субъективен». И в этом утверждении они совершенно искренни, людям действительно так кажется. Когда им что-то нравится, они не имеют ни малейшего представления, почему. Может быть, это оттого, что объект их симпатий на самом деле красив. Или же у их матери была такая вещица / они видели ее на знаменитости в глянцевом журнале / знают о ее немалой цене. Мысли этих людей – клубок неподотчетных им импульсов.

Родительское воспитание чаще всего не способствует распутыванию этого клубка. Когда вы поднимаете на смех своего братишку за инопланетные цветовые гаммы в его книжке раскрасок, то мама, скорее всего, скажет вам: «на вкус и цвет товарища нет». В этот момент она не пытается донести до вас какую-либо важную истину об эстетике. Она просто хочет помирить вас.

Как и многие другие половинчатые истины, что говорят детям взрослые, эта противоречит другим их речам. Внушив нам, что вкус – лишь вопрос личных предпочтений, они ведут нас в музей и заставляют всматриваться в вывешенные там картины, поскольку Леонардо – великий художник.

Что же происходит в голове ребенка в эту минуту? Чем становится для него «великий художник»? После того, как ему годы повторяли, что каждому мил свой вкус и цвет, он вряд ли откроет для себя, что великий художник – это тот, чьи работы лучше всех прочих. Скорее всего, в его Птолемеевой модели Вселенной «великий» будет означать вещь, полезную самому ребенку (как брокколи), – ведь так сказано в книге.

 

Сказать, что вкусы субъективны, - неплохой способ погасить споры о них. Беда в том, что это ложь. Это начинаешь понимать при создании нового.

В какое бы дело ни вкладывались люди, они всегда хотят делать его лучше. Футболисты хотят выигрывать. Управляющие директора хотят увеличивать прибыли. Сделать лучше – это и вопрос гордости, и удовольствие само по себе. Но если работа заключается в создании нового, и нет такой вещи как красота, то нет возможности сделать работу лучше. Если вкус – лишь вопрос личных предпочтений, то каждый уже совершенен: у каждого человека есть своя мера, и они друг другу подходят.

Как и в любой другой работе, продолжая созидать, вы растете над собой. Ваш вкус меняется. И, как любой другой, кто совершенствуется в своем деле, вы ощущаете свой рост. Значит. прежние вкусы не просто иные, они – хуже. Так рассыпается в пух и прах утверждение, что вкус не может быть ложным.

Релятивизм нынче в моде, что может заставлять не обращать внимания на вкус,  даже когда он улучшается. Но если признаться, по крайней мере самому себе, что есть хороший дизайн - красота - и плохой дизайн - уродство, то можно начать детально изучать красоту. Как изменился ваш вкус? Чем были вызваны ваши ошибки? Что узнали другие о красоте?

Начав изучать этот вопрос, вы будете удивлены тем, насколько схожи могут быть принципы красоты в совершенно несхожих областях человеческой деятельности.

 

Красота проста. Так говорят все: от математиков до художников. В математике это означает, что чем короче доказательство, тем оно лучше. Когда речь заходит об аксиомах, то воистину: меньше – да лучше. Во многом то же самое верно и в программировании. Для архитекторов и дизайнеров это значит, что красота должна основываться на нескольких тщательно выбранных структурных элементах, а не на обилии внешнего орнамента. (Орнамент плох не сам по себе, а лишь когда он пытается скрыть безвкусную форму). Аналогично в живописи, натюрморт, составленный из нескольких точно подобранных объектов с тщательной моделировкой, будет более интересен, чем, например вычурное переплетение кружев. В писательском деле этот принцип говорит: скажи все, что имеешь в виду, и без лишних слов.

Кто-то подумает: странно обращать внимание на простоту. Казалось бы, простота присутствует изначально, а сложность требует дополнительных усилий. Но, видимо, что-то находит на людей, когда те пытаются блеснуть творчеством. Начинающие писатели изъясняются напыщенными фразами, которые никогда не употребляют в обычной речи. Дизайнеры в стремлении к артистизму прибегают к выписыванию «красивостей». Художники преображаются в экспрессионистов. Но это лишь увертки, за витиеватыми словесами и «экспрессивными» мазками ничего нет - и это страшно.

Минимум средств выражения заставляет вас обращаться к реальной проблеме. Когда вы не можете изощряться в форме, остается донести суть.

 

Красота не стареет. В математике не устаревает ни одно из доказательств, если только оно не содержит ошибки. Так что же имел в виду Харди, сказав, что в вечности нет места для некрасивой математики? Да то же, что и Келли Джонсон: некрасивое решение не может быть лучшим. Обязательно должно быть лучшее, и кто-нибудь в конце концов найдет его.

Устремление в будущее – один из способов найти лучший ответ: если вы чувствуете, что кто-то может вас превзойти, то сделайте это сами. Некоторые из великих мастеров настолько приблизились к этому идеалу, что оставили очень мало места для тех, кто шел следом. Каждый гравер после Дюрера обречен творить в его тени.

Устремитесь в будущее – и избегнете веяний сиюминутной моды. Ведь мода - почти по определению - меняется со временем, и если создать вещь, что будет выглядеть хорошо и в далеком будущем, то ее притягательность будет гораздо больше основываться на благих, вневременных качествах и меньше – на текущей моде.

Почти парадокс: если вы хотите привлечь своим творением будущие поколения, один из способов – это привлечь поколения ушедшие. Трудно представить, каким будет будущее, но оно, несомненно, как и прошлое, будет равнодушно к модам этого дня. Поэтому, сделав вещь, которая пришлась бы по нраву не только вашим современникам, но и жившим в XVI веке, есть все шансы полагать, что она придется по нраву и обитателям века XXVI-го.

 

Красота целесообразна, цель - верна. На типичной кухонной плите есть четыре конфорки, расположенных по углам квадрата, и ручка для регулировки огня на каждой из них. Как расположить эти ручки? Простейший ответ – поместить их в ряд. Но это ответ на неправильный вопрос. Ручки делаются для людей, и если разместить их в один ряд, то несчастная домохозяйка первое время будет постоянно вспоминать, какая ручка какой конфорке соответствует. Лучше расположить ручки квадратом, как и конфорки.

Немало плохих дизайнерских решений приняты совершенно осознанно, но с использованием неверных предпосылок. В середине двадцатого века существовала мода на набор текстов рублеными шрифтами. Эти шрифты по своему облику ближе к исходным формам букв. Но это не та цель, которую нужно достигнуть. Что важно, так это читаемость текста, и она напрямую зависит от того, насколько легко отличить одну букву от другой. Может быть, это и отдает викторианской эпохой, но в шрифтах Times Roman строчную g легко отличить от строчной y (в отличие от шрифтов без засечек).

Рассматриваемые проблемы можно улучшать также, как и решения. В разработке ПО неразрешимая проблема обычно может быть заменена эквивалентной ей и вполне разрешимой. Физика сделала огромные успехи с того момента, как ее задачей стало предсказание наблюдаемых явлений, а не согласование их с Писанием.

 

Красота дает пищу уму. В романах Джейн Остин вы почти не найдете описаний, вместо этого ее стиль настолько хорош, что вы сами представляете себе всю обстановку. Также и картина, оставляющая место воображению, захватывает нас гораздо больше, чем та, что точно фиксирует события. Каждый самостоятельно продолжает историю Моны Лизы.

В архитектуре и дизайне тот же принцип гласит, что здание или объект должны допускать любое его использование. Хороший дом позволить организовать жизнь его обитателей так, как те пожелают, и не будет диктовать единственно возможный уклад, словно они выполняют программу, написанную архитектором.

В программном обеспечении это означает, что следует дать пользователем несколько базовых элементов, которые те смогут комбинировать любым образом, по образу конструктора Лего. В математике доказательство, становящееся основой для множества новых работ, предпочтительнее того, что не ведет к будущим открытиям. В научной среде в целом частота цитирования служит грубым индикатором ценности работы.

 

Красота часто слегка забавна. Этот признак верен не всегда. Но гравюры Дюрера, кресло Womb Эро Сааринена, Пантеон и оригинальный Порше 911 кажутся мне чем-то забавными. Теорема Гёделя о неполноте похожа на розыгрыш.

Мне кажется, причина - в связи юмора и силы. Обладать чувством юмора – значит обладать силой: способность отвечать улыбкой на удары судьбы защищает от жизненных невзгод, а неспособность воспринимать их с юмором уменьшает защищенность. Поэтому признак силы – или хотя бы ее право – не относиться к себе чересчур серьезно. Нередко уверенные в себе люди создают словно играючи – как Хичкок в своих фильмах или Брегель в своих картинах, или Шекспир, если уж на то пошло.

Возможно, красота и не обязана быть забавной, но тяжело представить что-либо, не вызывающее ни малейшей улыбки и в то же время обладающее красотой.

 

Красота нелегка. Если посмотреть на людей, что создавали великие творения, то можно выделить общую черту: они работали на пределе своих сил. Если вы не выкладываетесь полностью, то, вполне возможно, впустую тратите время.

Неразрешимые проблемы ждут своих титанов. В математике сложные доказательства требуют искусных решений, они же являются наиболее интересными. Сходная ситуация - в инженерном деле.

Когда вам предстоит подъем на гору, вы выкидываете из рюкзака все ненужное. Точно так же архитектор, возводящий здание на неудобном участке или в условиях ограниченного бюджета, будет вынужден найти элегантное решение. Все прикрасы становятся ненужны, когда речь идет о решении задачи на пределе возможностей.

Но не всякие трудности хороши. Есть хорошая боль и плохая. Нормальный человек всегда предпочтет ту боль, что возникает в ногах после долгой пробежки, а не после вонзившегося в ступню гвоздя. Сложная проблема будет благом для конструктора, но ненадежный клиент или плохие материалы – вряд ли.

В живописи высочайшее место традиционно отводится изображениям людей. Это не случайно – но не по одной лишь причине, что портреты посылают в наш мозг какие-то сигналы, которые не посылают другие картины. Мы все видели столько людских лиц, что видим малейшую фальшь в портрете. Если нарисовать дерево и изменить угол наклона ветви на пять градусов, то никто не заметит. Но если поменять угол наклона глаз на те же пять градусов, то разницу заметят все.

Когда конструкторы Баухаус приняли девиз Салливана «Форма следует функции», они подразумевали: форма должна следовать функции. И чем больше требований предъявляется к функциональности, тем более отточенной должна быть форма – ведь не допускается и возможности ошибки. Дикие животные потому и красивы, что жизнь не дает им поблажек.

 

Красота выглядит легкой. Как и у выдающихся спортсменов, результаты труда великих творцов выглядят легкодостижимыми. Чаще всего это иллюзия. Легкий стиль, разговорная манера хорошего произведения получается только с восьмой попытки.

В науке и инженерном деле некоторые из величайших открытий кажутся настолько элементарными, что мы говорим себе: «Я сам мог бы до этого додуматься». В этот момент первооткрыватель имеет полное право спросить: «Ну и почему же не додумался?»

Некоторые портреты Леонардо состоят всего из нескольких линий. Смотря на них, думаешь: стоило бы провести восемь-десять линий в нужном месте – и красивый портрет был бы готов. Ну да, так оно и есть, но линии-то нужно провести в том самом нужном месте. Малейшая ошибка разрушает рисунок.

На самом деле, штриховые рисунки – сложнейшие из всех, поскольку они требуют почти совершенной техники. Выражаясь математически, это решение в замкнутом виде; художники уровнем пониже обычно решают ту же задачу последовательными приближениями. Одна из причин, почему дети бросают рисовать примерно в десять лет, - это желание начать рисовать как взрослые. И вот в числе их первых попыток – штриховой рисунок лица. Не тут-то было!

В большинстве областей подобная легкость появляется с практикой. Вероятно, роль практики – в тренировке вашего подсознания, чтобы переложить на него задачи, ранее занимавшие сознание. Иногда это сводится к тренировке тела. Пианист-виртуоз может играть ноты быстрее, чем его мозг посылает сигналы пальцам. Схожим образом художник после некоторой тренировки может воспринимать картину визуально и воспроизводить руками так же автоматически, как кто-то отстукивает ногой ритм.

Когда люди говорят о нахождении в «состоянии потока», я думаю, они подразумевают взятие спинным мозгом ситуации под свой контроль. Спинной мозг реже сомневается и освобождает сознательную мысль для сложных задач.

 

Красота содержит симметрию. Я считаю, что симметрия может быть одним из путей достижения простоты, но она достаточно важна сама по себе и заслуживает отдельного упоминания. Симметрия часто встречается в природе, а это хороший знак.

Существуют два вида симметрии: повторение и рекурсия. Рекурсия означает повторение в подэлементах, например расположение прожилок в листе.

Симметрия непопулярна сейчас в некоторых областях, это обратная реакция на ее чрезмерное применение в прошлом. Архитекторы стали намеренно создавать асимметричные постройки в викторианскую эпоху, и к 1920-м годам асимметрия была непременным признаком архитектуры модерна. Но даже тогда, убирая симметрию относительно главных осей, они сохраняли сотни симметрий в малых деталях.

В литературе симметрия присутствует на любом уровне, от фраз в предложении до композиции целого романа. Подобное можно обнаружить в музыке и живописи. Мозаика (и некоторые произведения Сезанна) обретают дополнительный визуальный эффект за счет создания единой картины из отдельных частиц. Композиционная симметрия приводит к появлению наиболее запоминающихся картин, особенно когда две половины соотносятся друг с другом, как в Сотворении Адама или Американской готике.

В математике и инженерном деле рекурсия приносит особенно щедрые плоды. Индуктивные доказательства изумительно компактны. В разработке программного обеспечения задача, которая может быть решена с помощью рекурсии, практически всегда решается ею лучше всего. Эйфелева башня выглядит так поразительно отчасти потому, что это рекурсивное решение – башня на башне.

Опасность симметрии, и повторения в особенности, в том, что она может заменять мысль вообще.

 

Красота подражает природе. Ценен не факт подражания сам по себе, а то, что у природы было немало времени для поиска решения. Поэтому использование в вашей работе решений, наработанных природой, - хороший знак.

Копировать не зазорно. Мало кто станет отрицать, что литература должна быть подобна жизни. Черпание сюжетов из жизни весьма помогает и в живописи, но суть процесса здесь часто не понимают. Цель ведь не просто сделать слепок реальной жизни. Смысл рисования с натуры в том, что оно дает художнику пищу для размышлений. Когда его глаза смотрят на что-то, то кисть создает более интересные картины.

Подражание природе срабатывает и в конструировании. Длительное время у лодок имелся хребет и ребра, как в грудной клетке животного. Порой приходится ждать лучшей технологии: первые конструкторы самолетов ошибочно замышляли свои машины похожими на птиц, не обладая ни достаточно легкими материалами и двигателями (двигатель братьев Райт весил 70 кг при мощности в 12 л.с.), ни системами управления, позволяющими машинам двигаться как птицы. Но я могу представить небольшие беспилотные самолеты-разведчики, летающие как птицы, лет через пятьдесят.

Сейчас, обладая достаточной вычислительной мощью, мы можем моделировать как метод природы, так и ее результаты. Генетические алгоритмы могут позволить создавать вещи слишком сложные для обычных методов.

 

Красота – результат многих попыток. Редко когда удается сделать все хорошо с первого раза. Мастера готовы выбросить часть старого труда. И в планах их есть место новым планам.

Чтобы отказаться от уже сделанного, нужно быть уверенным в своих силах. Нужно уметь помыслить: я могу сделать лучше. К примеру, когда люди начинают рисовать, они довольно часто отказываются перерисовывать части, которые выполнены неправильно. Им кажется, что имеющийся результат – уже большое везение, и если они станут его переделывать, то непременно получится хуже. Поэтому они убеждают себя в том, что рисунок не так уж и плох, более того, возможно, они так и хотели все нарисовать.

Но это скользкий путь; если и следует что-либо взращивать в себе, так это неудовлетворенность. В рисунках Леонардо часто присутствует по пять-шесть попыток провести нужную линию. Характерный облик Порше 911 возник только после переделки неказистого прототипа. У Райта в ранних чертежах музея Гугенхайма правая половина была выполнена в виде зиккурата, перевернув ее, он получил текущий облик музея.

Ошибки естественны. Учитесь не воспринимать их как катастрофу, а с легкостью признавать и исправлять. В какой-то мере Леонардо изобрел эскиз – для большей свободы в экспериментах. Открытое программное обеспечение содержит меньше ошибок, потому что при его создании признается возможность ошибок.

Хорошим подспорьем является носитель, который легко допускает исправления. Когда в XV веке темперу сменила масляная краска, она немало облегчила написание таких сложных объектов, как фигуры людей, потому что масляную краску, в отличие от темперы, можно было смешивать и закрашивать.

 

Красота допускает копирование. Отношение к копированию в процессе становления творца часто совершает полный оборот. Начинающий художник имитирует мастера, не подозревая об этом; затем он осознанно пытается быть оригинальным; наконец, он решает, что важнее следовать истине, чем быть оригинальным.

Невольная имитация почти всегда – гарантия плохого дизайна. Если вы не знаете, откуда появляются ваши задумки, возможно, вы подражаете подражателю. Рафаэль так повлиял на вкусы середины XIX века, что практически каждый художник подражал ему, зачастую он подражал подражателям подражателей Рафаэля и т.д. Последнее беспокоило прерафаэлитов даже больше, чем подражание самому Рафаэлю.

Амбиции не позволяют удовлетвориться подражанием. Вторая фаза в росте вкуса – осознанная попытка быть оригинальным.

Мне кажется, великие мастера пошли еще дальше, достигнув самоотвержения. Они стремились к истине, и если часть ее была уже открыта кем-то другим, не было никакой причины не воспользоваться этим. Они были достаточно уверенны в себе, чтобы копировать чужие работы без страха, что их собственный стиль в результате будет утерян.

 

Красота часто бывает странной. Некоторые из лучших работ обладают непривычным качеством: формула Эйлера, Охотники на снегу Брегеля, SR-71, Лисп. Они не только красивы, они странно красивы.

Я затрудняюсь объяснить причину этого. Возможно, дело в моей глупости – консервный ключ, должно быть, собаке покажется чудом. Вероятно, если бы я был достаточно умен, формула ei*pi = -1 казалась бы мне самой естественной вещью в мире. В конце концов, она истинна.

Большинство уже упомянутых качеств могут быть сознательно достигнуты, но я не думаю, что можно сознательно добиться странности. Лучшее, что здесь можно сделать, - это не душить странную идею в зародыше. Эйнштейн не пытался сделать Теорию Относительности такой странной. Он лишь хотел открыть истину, но открытая истина оказалась странной.

Учащиеся художественной школы, где я когда-то обучался, больше всего хотели развить свой собственный стиль. Но если вы стремитесь делать вещи хорошо, вы неизбежно станете делать это по-своему, точно так же, как неповторима походка каждого человека. Микеланджело не стремился рисовать как Микеланджело, он лишь хотел рисовать хорошо и не мог ничего поделать с тем стилем, который у него выработался.

Единственный стиль, который стоит иметь, - это тот, с которым вы ничего не можете поделать. И это особенно верно в случае странности: к ней нет царских путей. Северо-западный проход, что искали маньеристы, романтики и два поколения американских студентов, судя по всему, не существует. Единственный способ попасть туда – пройти путем красоты и истины.

 

Красота концентрируется во времени и пространстве. Среди жителей Флоренции XV века мы находим Брунеллески, Гиберти, Донателло, Мазаччо, Филиппо Липпи, Фра Анджелико, Веррокьо, Боттичелли, Леонардо и Микеланджело . Милан в то время был не меньшим городом, но сколько художников он подарил миру в XV веке?

Что-то такое происходило во Флоренции в XV веке. И это нельзя отнести к наследственности, поскольку это не повторяется сейчас. Следует признать, что какими бы врожденными способностями ни обладали Леонардо и Микеланджело, в Милане были точно такие же люди. Так что же случилось с Леонардо из Милана?

Сейчас в США проживает примерно в тысячу раз больше людей, чем жило тогда во Флоренции. Тысячи Леонардо и тысячи Микеланджело бродят среди нас. Если бы за все отвечала ДНК, то в искусстве каждый день происходили бы открытия. Но это не так, и причина в том, что для появления Леонардо недостаточно его врожденных способностей. Нужна еще Флоренция 1450-го года.

Нет ничего более мощного, чем сообщество талантливых людей, работающих над сходными проблемами. Гены в этом случае не играют определяющую роль: даже обладай вы полным набором генов Леонардо, ничего не вышло, родись вы не во Флоренции, а в Милане. Сегодня мы меньше ограничены в передвижениях, но лучшие результаты по-прежнему достигаются в определенных местах: Баухаус, Проект Манхэттен, Нью-Йоркер, “Мастерские скунса” Локхид, Ксерокс Парк.

В любой момент времени существовало несколько актуальнейших областей и несколько групп, добивавшихся в них великих результатов. Но практически невозможно достичь больших успехов ни в одной из этих областей, если вы слишком удалены от таких групп. Этот закон довольно гибок, но обойти его нельзя. (Может быть, вы можете, но Леонардо из Милана не смог).

 

Красота вызывает сопротивление. Какую историческую эпоху ни возьми, ее современники верили в вещи, кажущиеся теперь смешными, и верили настолько сильно, что вы могли стать изгоем и даже жертвой насилия, высказывая противоположные суждения.

Было бы поразительно, если бы наше время отличалось в лучшую сторону. И насколько я могу судить, это не так.

Эта проблема затрагивает не только каждую эпоху, но в некоторой степени и каждую область. Немалая часть искусства Возрождения считалась в свое время чрезмерно мирским: если верить Васани, Боттичелли покаялся и бросил занятия живописью, а Фра Бартоломео и Лоренцо ди Креди сожгли некоторые из своих работ. Теория относительности Эйнштейна вызвала неприятие многих современных ему физиков и не получала окончательного признания несколько десятилетий (во Франции – до 1950 года).

Сегодняшняя экспериментальная ошибка – теория завтрашнего дня. Если вы мечтаете о великих открытиях, то надо не закрывать глаза на те места, где обыденная мудрость и истина противоречат друг другу, а пристально изучать их.

 

На практике, я считаю, легче опознать уродство, чем представить красоту. Большинство людей, созидавших красивые вещи, делали это путем исправления чего-то, что они считали уродливым. Великие труды, похоже, зачастую появляются оттого, что кто-то смотрит и думает: «Я мог бы сделать лучше». Так, изображения Мадонн, выполненные согласно византийским традициям, удовлетворявшим всех на протяжении веков, Джотто казались безжизненными и неестественными. Коперник был настолько недоволен «заплаткой», устраивавшей его современников, что почувствовал: должно быть лучшее решение.

Одной только нетерпимости к уродству недостаточно. Вам нужно хорошо знать соответствующую область прежде, чем вы поймете, что в ней требует вмешательства. Нужно сделать свою домашнюю работу. Но когда вы станете экспертом в этой области, вы начнете слышать голоса, шепчущие: «Что за поделка! Должно быть лучшее решение!» Не глушите в себе эти голоса. Хольте и лелейте их. Ибо секрет великого труда таков: точнейший вкус и способность его воплотить.

 

Примечания

На самом деле, Салливан сказал «форма всегда следует функции», но я считаю, неточность, обычно допускаемая в этой цитате, точнее отражает мысль архитекторов модерна.

Stephen G. Brush, "Why was Relativity Accepted?" Phys. Perspect. 1 (1999) 184-214.







## Языки программирования «в разрезе»

У любой машины есть набор действий, которые на ней можно выполнить.
Иногда этот набор сильно ограничен. Со своим электрическим чайником я могу совершать только два действия: включать и выключать его. Мой CD проигрыватель будет уже посложнее. Помимо включения и выключения, я могу повышать и убавлять на нем громкость звука, воспроизводить и приостанавливать песни, перейти к следующей или предыдущей композиции, а также воспроизводить все это в случайном порядке.

Как и любое другое устройство, у компьютера есть список действий, которые он может выполнить. Например, на каждом компьютере можно сложить два числа. Полный перечень допустимых операций компьютера заключен в его машинном языке.

### Машинный язык

Когда были изобретены компьютеры, все программы приходилось писать как последовательность машинных инструкций. Вскоре, их начали писать в несколько более удобной форме под названием язык ассемблера. В языке ассемблера список команд тот же самый, только используются более удобные для программистов имена. Вместо обращения к инструкции сложения как 11001101, хотя именно так машина ее и вызывает, вам нужно написать add.

Проблема с машинным языком/языком ассемблера состоит в том, что большинство компьютеров могут выполнять только очень простые вещи. Например, предположим, что вам нужно, чтобы компьютер воспроизвел короткий звуковой сигнал 10 раз. Сомневаюсь, что у компьютера есть инструкция для осуществления какого-либо действия n раз. Поэтому, если бы вам понадобилось, чтобы компьютер что-то сделал 10 раз, используя настоящие машинные инструкции, вам бы пришлось написать нечто похожее на:

```assembler
put the number 10 in memory location 0
a if location 0 is negative, go to line b
beep
subtract 1 from the number in location 0
go to line a
b ...rest of program…
```

Если вам приходится выполнять столько работы только для того, чтобы заставить машину пропикать 10 раз, то только представьте, сколько труда уходит на написание чего-то наподобие текстового процессора или программы для работы с электронными таблицами.

И, кстати, взгляните еще раз на программу. Она и вправду воспроизведет короткий звуковой сигнал 10 раз? Неа, 11. В первой строке мне надо было указать 9 а не 10. Я намеренно поместил в наш пример ошибку, чтобы продемонстрировать важный аспект по поводу языков. Чем больше вам приходится писать для выполнения тех или иных действий, тем сложнее разглядеть ошибки.

### Высокоуровневые языки

Представьте, что вам нужно создавать программы на языке ассемблера, но у вас есть некий помошник для выполнения всякой «грязной» работы. Поэтому вы можете просто написать что-то типа

```assembler
do times 10 beep
```

, а ваш помощник напишет это за вас на языке ассемблера (но без ошибок).
На самом деле, именно так большинство программистов и работает. За исключением того, что помощник – это не человек, а компилятор. Компилятор – это программа, которая переводит программы, написанные в удобной форме, как та, однострочная, о которой говорилось выше, в простой язык, понятный для аппаратного обеспечения.

Этот более удобный язык, который вы «скармливаете» компилятору, и называется высокоуровневым. Он позволяет составлять программы на основе мощных команд, таких как “do что-то n раз” вместо пресловутого “add два числа.”

Когда вы создаете программы на основе более обобщенных концепций, вам не нужно использовать их все. Длина программы, написанной на нашем выдуманном высокоуровневом языке, составляет всего лишь пятую часть от длины исходной. И если в ней была допущена ошибка, то ее будет легко найти.

Еще одним преимуществом высокоуровневых языков является то, что они делают вашу программу более переносимой. На разных компьютерах машинные языки немного отличаются. Как правило, нельзя взять программу, написанную на машинном языке для одного компьютера, и запустить ее на другом. Если вы пишете программы на машинном языке, вам придется их все переписать для того, чтобы иметь возможнось запускать их на новом компьютере. Если же вы используете высокоуровневый язык, то все, что нужно будет переписать, это компилятор.
Но компиляторы не единственные, кто может работать с высокоуровневыми языками. Вы также можете воспользоваться интерпретатором, который просматривает по одному сегменту программы за раз и выполняет соответствующие машинные команды, вместо того, чтобы сразу перевести весь кусок в машинный язык и запустить его.

### Open Source

Высокоуровневый язык, который вы «скармливаете» компилятору, также известен как исходный код, а результат его трансляции на машинный язык называется объектным кодом. Когда вы покупаете коммерческое ПО, вам обычно предоставляется только объектный код. (Объектный код так сложно читать, потому что он хорошо зашифрован для защиты коммерческой тайны компании). Но в последнее время появился альтернативный подход: ПО с открытым исходным кодом (open source), когда вам предоставляется исходный текст программы, который при желании можно модифицировать.

Разница между этими двумя моделями существенна. Open source предоставляет вам куда больше контроля. Когда вы пользуетесь открытым ПО и хотите понять, что оно делает, то вы можете прочесть исходный код и выяснить это. А при желании, вы можете даже внести изменения в программу и перекомпилировать ее.

Одной из причин, по который вам захочется это сделать, является исправление бага. Например, вы не можете исправить ошибки в Microsoft Windows, потому что у вас нет исходного кода. (Теоретически вы могли бы взломать объектный код, но практически это довольно сложно осуществить. А также это запрещено лицензионным соглашением). Это может стать настоящей проблемой. При обнаружении новой дыры в защите Windows, вы вынуждены ждать, когда Microsoft выпустит исправления. А дыры в защите по крайней мере быстро исправляют. Если этот баг время от времени парализует ваш компьютер, то, возможно, вам, придется подождать, пока не будет выпущен следующий релиз с исправлениями.

Но преимущества open source не сводятся только к тому, что у вас есть возможность внести исправления при необходимости. Это могут все. ПО с открытым исходным кодом – это как документ, представленный для экспертной оценки. Многие умные люди изучили исходники открытых операционных систем Linux и FreeBSD и уже нашли большинство ошибок. В то время как Windows надежна ровно настолько, насколько это может обеспечить отдел QA в больших компаниях.

Приверженцев open source иногда воспринимают как чудиков, выступающих против самой идеи права собственности в целом. Некоторые таковыми и являются. Но я точно не выступаю против этого права, а ведь я бы очень неохотно устанавливал ПО, исходных кодов которого у меня бы не было. Среднему конечному пользователю может и не понадобится исходный код его текстового процессора, но когда вам действительно нужна надежность, то это уже веская причина для того, чтобы использовать open source.

### Языковые войны

Большинство программистов, бОльшую часть времени, пишут на языках высокого уровня. Лишь некоторые используют сейчас язык ассемблера. Компьютерное время сильно подешевело, в то время как время программиста дорого как никогда, поэтому редко возникают ситуации, когда время, потраченное на решение проблем, возникших при написании программ на языке ассемблера, окупается в дальнейшем. Это порой необходимо в некоторых критических частях, например, компьютерной игры, где вам нужно управлять оборудованием на микроуровне, чтобы выжать последние крупицы мощности для ускорения.

Fortran, Lisp, Cobol, Basic, C, Pascal, Smalltalk, C++, Java, Perl, и Python – все это высокоуровневые языки. И это только те, которые наиболее известны. Сущесвуют буквально сотни различных языков высокого уровня. И в отличие от машинных, которые все предлагают сходный набор инструкций, эти высокоуровневые языки предоставляют вам довольно разные принципы для построения программ.

Так какой же использовать? Ну, по этому поводу ведется куча споров. Часть проблемы кроется в том, что если вы пользуетесь языком довольно длительное время, вы начинаете на нем думать. Поэтому любой значительно отличающийся язык, кажется жутко неповоротливым, даже если в сущности в нем нет ничего неправильного. Зачастую суждения неопытных программистов об относительных преимуществах языков программирования искажаются под действием этого впечатления.

Некоторые компьютерщики, возможно, из желания показаться более опытными, скажут вам, что все языки по сути своей одинаковы. «Я программировал на языках всех типов, – сказал суровый старый хакер за стойкой бара, – и неважно, каким пользоваться. Что действительно важно, так это правильно ли ты мыслишь.» Или что-то в этом духе.

Конечно же, это чушь. Существует огромная разница между, скажем, Fortran I и последней версией Perl. Или, если уж на то пошло, между ранней и последней версиями Perl. Но суровый старый хакер может и сам верит в то, что говорит. Можно писать одни и те же примитивные паскалеподобные программки практически на каждом языке. Если вы питаетесь только в McDonald’s, то вам покажется, что еда в каждой стране одна и та же.

Некоторые продвинутые программисты предпочитают тот язык, к которому привыкли, и недолюбливают все остальные. Другие говорят, что все языки одинаковы. Но истина находится где-то посередине между этими двумя крайностями. Языки действительно отличаются друг от друга, но сложно сказать наверняка, какие из них лучше. Ситуация все еще находится в развитии.

### Уровень абстракций

Как высокоуровневые языки являются более абстрактными по отношению к языкам ассемблера, так и некоторые из этих высокоуровневых языков более абстрактны, чем другие. Например, C довольно низкоуровневый, практически переносимый язык ассемблера, в то время как Lisp обладает очень высоким уровнем абстракций.

Если программировать на высокоуровневых языках лучше, чем на языке ассемблера, то можно ожидать, что чем выше уровень языка, тем он лучше. Обычно да, но не всегда. Язык может быть очень абстрактен, но предлагает не те абстракции. Думаю, что именно это и происходит, например, в Prolog. В нем реализованы невероятно мощные абстракции для решения около 2% задач, а все остальное время вы очень усердно стараетесь использовать эти абстракции неподобающим образом, и пишете программы как на языке Pascal.

Еще одна причина, по которой вам бы захотелось использовать низкоуровневый язык, это продуктивность. Если вам нужен супер-быстрый код, то лучше придерживаться машинных инструкций. Большинство операционных систем написаны на C, и это не совпадение. Поскольку аппаратное обеспечение становится все быстрее, то создавать приложения на языках такого же низкого уровня как С уже не так критично и важно, но всем все еще хочется, чтобы операционные системы работали как можно быстрее. (Или, вероятно, всем хочется всегда быть начеку на случай возможной атаки на переполнение буфера.[1])

### Ремни безопасности или наручники?

Самый большой спор в области проектирования языков, вероятно, тот, который ведется между теми, кто думает, что язык должен ограждать программистов от совершения глупостей, и тех, кто полагает, что программистам должно быть разрешено делать то, что они захотят. Java относится к первому лагерю, а Perl – ко второму. (И неудивительно, ведь министерство обороны США помешано на Java.)

Сторонники либеральных языков высмеивают лагерь оппонентов, называя такие языки “B&D” (bondage and discipline – рабство и дисциплина), с довольно дерзким намеком на то, что те, кому нравится программировать на таких языках, просто напросто неудачники. Я не знаю, как противоборствующая сторона называет языки подобные Perl. Возможно, они не из тех людей, которые придумывают обидные прозвища для оппонентов.

Данная полемика сводится к нескольким более мелким, потому что существует несколько способов оградить программистов от совершения глупостей. Одним из наиболее активно обсуждаемых в данный момент вопросов является статическая и динамическая типизация. В языках со статической типизацией вы должны знать типы значений, которые может принимать каждая переменная во время написания программы. В динамической типизации, можно любой переменной присвоить любое значение, какое только захотите.

Приверженцы статической типизации аргументируют ее тем, что она способствует предотвращению ошибок и помогает компиляторам генерировать быстрый код (оба довода верны). Приверженцы динамической типизации считают, что статическая типизация ограничивает вас в том, какие программы можно писать (что также верно). Я предпочитаю динамическую типизацию. Ненавижу язык, который указывает мне, что делать. Но, кажется, некоторым умным людям нравится статическая типизация, поэтому вопрос все еще остается открытым.

### OO

Еще одной большой темой на данный момент является объектно-ориентированное программирование. Оно представляет собой другой способ организации программ. Предположим, вы хотите написать программу для нахождения площади двумерных фигур. Сначала программа будет иметь представление только о круге и квадрате. Одним из способов реализации будет написание одного куска кода, в пределах которого вы проверяете, что у вас запрашивают: круг или квадрат. А затем используете соответвствующую формулу для поиска площади. Объектно-ориентированный способ написания программ подразумевает создание двух классов, круг и квадрат, а затем привязать к каждому классу фрагмент кода (который называется метод) для нахождения площади данного типа фигуры. Когда вам нужно вычислить площадь чего-либо, вы спрашиваете, к какому классу это что-то принадлежит, извлекаете соответствующий метод, и запускаете его, чтобы получить результат.
Эти два случая могут показаться очень схожими. И в самом деле, то, что в действительности происходит при запуске кода, довольно похоже. (Неудивительно, т.к. вы решаете одну и ту же задачу) Но код в итоге может выглядеть по-разному. В объектно-ориентированной версии, код расчета площади квадрата и круга может даже быть представлен в разных файлах, один файл содержит все, что связано с кругом, а другой – все, что связано с квадратом.

Преимущество объектно-ориентированного подхода состоит в том, что, если вы захотите изменить программу для расчета площади, например, треугольника, то вы просто добавите еще один кусок кода для этого, и вам даже не нужно будет думать обо всем остальном. Недостаток, как заявили бы критики, заключается в том, что добавление без учета того, что уже реализовано, приведет в программировании к таким же результатам, как и в строительстве.

Споры по поводу ОО программирования не такие ясные как по поводу статической и динамической типизации, где вам просто приходится выбирать одну из двух. А при обсуждении объектно-ориентированности языка можно говорить только о ее степени. И действительно, существует два значения ОО: некоторые языки объектно-ориентированы, т.к. они позволяют программировать в этом стиле, а другие, т.к. они вынуждают вас так делать.

В последнем варианте мало преимуществ. Несомненно, язык, который позволяет сделать *x* по крайней мере так же хорош, как и тот, что вынуждает вас делать таким образом. Поэтому, касательно языков, мы, по крайней мере, можем обойти этот вопрос. Конечно, пользуйтесь языком, который позволяет писать ОО программы. А хотите ли вы этого на самом деле – это уже другой вопрос.

### Возрождение

Я думаю, все, кто связан с языками, согласятся с тем, что в последнее время появилось огромное количество новых языков программирования. До 1980 года, только университеты могли позволить себе оборудование, необходимое для разработки таких языков, и поэтому многие языки были спроектированы профессорами или исследователями в крупных компаниях. Сейчас даже школьник может позволить себе нужное «железо».
Вдохновленные в основном примером Ларри Уолла, создателя Perl, многие компьютерщики думают, почему я не могу спроектировать свой собственный язык? Те, кому удается обуздать мощь open source сообщества, обладают доступом к огромному количеству кода, написанного в сжатые сроки.

В результате появляется такой тип языка, который можно назвать неустойчивым: язык, чье ядро не очень хорошо спроектировано, но который обладает чрезвычайно мощными библиотеками для решения специфических задач. (Представьте автомобиль марки «Zastava» (также известный как «Yugo») с реактивным двигателем, прикрученным к крыше). Для незначительных, ежедневных задач, на решение которых программисты тратят уйму времени, библиотеки, возможно, важнее ядра языка. Поэтому такие странные гибридные решения довольно полезны, и, соответственно, становятся популярны. Автомобиль «Zastava» с прикрученным к крыше реактивным двигателем может быть и работал бы, пока вы не попытались бы выполнить на нем поворот [2].

Также в результате мы получим огромное разнообразие, которое всегда наблюдалось в программных языках. Fortran, Lisp, and APL отличаются друг от друга так же сильно, как морская звезда, медведь и стрекоза, а ведь все были созданы до 1970. А новые открытые языки естественно продолжили эту традицию.

Кажется, что я узнаю о новом языке каждые два дня. Джонатан Эриксон назвал это “эпохой возрождения языков программирования”. А еще люди иногда употребляют фразу “языковые войны”. Но противоречия здесь нет. В эпоху Возрождения произошла куча войн.

И действительно, многие историки считают, что эти войны были побочным продуктом тех сил, что создали эпоху Возрождения [3]. Причиной этих сил в Европе, возможно, был тот факт, что она была разделена на некоторое число мелких, конкурирующих государств. Они располагались достаточно близко друг к другу, чтобы идеи могли кочевать из одной в другую, но в то же время были достаточно независимы, чтобы ни одному правителю не удалось наложить запрет на нововведения, как однажды это сделал суд Китая, запретивший разработку больших океанских кораблей.

Поэтому, возможно, все это и к лучшему, что программисты живут в постбиблейском мире. Если бы мы все использовали один и тот же язык, он бы наверняка был не самым лучшим.

---

1 Самый распространенный способ взлома компьютеров использует некоторые особенности языка C. В C, когда вы отводите кусок памяти (буфер) для входных данных, вы предполагаете, что он будет размещен рядом с памятью, содержащей адрес возврата текущего выполняющегося кода. Адрес возврата – это область в памяти кода, который будет выполняться, когда текущий код завершит свою работу. Это, по сути, следующий пункт в списке дел компьютера.

Поэтому если кто-то захочет взломать ваш компьютер, и узнает, что вы используете 256-байтный буфер для хранения некоторых входных данных, тогда, просто посылая больше 256 байт, он может переписать адрес возврата. Когда текущий код завершится, управление перейдет к любой области памяти, которая была заранее определена злоумышленником. А область, которую он определит, будет началом буфера, содержащего программу на машинном языке на его выбор. Бинго: теперь на вашем компьютере выполняется его программа.

В высокоуровневых языках это было бы невозможно, но в C, каждый раз, когда вы принимаете входные данные извне и не проверяете на допустимую длину, вы создаете брешь в защите. Атака, которая использует данную уязвимость, называется атакой на переполнение буфера.
Существуют и другие способы получения доступа к управлению компьютером через атаку на переполнение буфера, но перезапись адреса возврата – это классика.

Любопытно, что угоны самолетов также являются атаками на переполнение буфера. В типичном авиалайнере, помещение для пассажиров и кабина пилота расположены рядом, прямо как области данных и кода расположены в смежных областях в программе на С. Осуществляя «переполнение» в сторону кабины пилота, угонщики в действительности способствуют переходу из области данных в область кода.

2 Заметка для хакеров: это всего лишь метафора. Не пытайтесь сесть за руль машины «Zastava» с прикрученным к крыше реактивным двигателем. Возможно, феномен реактивной машины далеко не новый. Fortran также обязан своей популярностью, в основном, своим библиотекам.

3 Cipolla, Carlo, Guns, Sails, and Empires: Technological Innovation and the Early Phases of European Expansion 1400-1700, Pantheon, 1965.







## Языки программирования через сто лет

**Статья публикуется в сокращении.**

Языки программирования, подобно формам жизни, образуют эволюционное древо. На этом древе есть и тупиковые ветви, и некоторые из них уже известны. Кобол, несмотря на всю свою популярность в былые годы, похоже, не оставил интеллектуальных потомков.

Я считаю, что похожая судьба ждёт и Джаву. Люди спрашивают меня: "Как можно говорить, что Джаве не быть? Она уже стала успешным языком". И я не могу не согласиться с ними. Джава - успешный язык, если считать мерилом успеха площадь полок с учебниками Джавы в книжных магазинах или количество студентов, убеждённых, что знание Джавы поможет им найти работу. Я имел в виду другое. Мне кажется, Джава окажется таким же эволюционным тупиком, как Кобол.

Это лишь гипотеза. Я могу ошибаться. Но речь не о Джаве, сейчас я хотел бы поговорить об эволюции языков и побудить всех задуматься о том, на какой ветви эволюционного древа помещается язык Х. Смысл постановки такого вопроса заключается отнюдь не в том, чтобы через столетие наши бестелесные духи могли заявить, дескать, мы же предупреждали. Придерживаться основных ветвей эволюции может оказаться неплохой тактикой при выборе языка и сегодня.

Во что превратятся языки программирования через сто лет, мне интересно, потому что хотелось бы знать, на какую ветвь древа стоит делать ставки сейчас.
***

Любой язык программирования можно поделить на две части: некий набор фундаментальных операторов, которые играют роль аксиом, и остаток языка, который, в принципе, может быть описан в терминах этих фундаментальных операторов.

Я считаю, что фундаментальные операторы - это самый важный фактор, влияющий на выживание языка в долгосрочной перспективе. Всё остальное может меняться.

Важен не только хороший подбор аксиом, но и их немногочисленность. Математики всегда понимали, что аксиом должно быть как можно меньше, а они-то кое-что в этом смыслят.

Есть подозрение, что на основных ветвях эволюционного древа языков программирования располагаются языки с самыми небольшими и прозрачными ядрами. Чем крупнее доля языка, которая может быть написана на нём самом, тем лучше.

Конечно, уже в самой постановке вопроса о том, какими станут языки программирования через сто лет, есть немалое допущение. А будут ли тогда вообще писать программы? Может быть, мы просто будем говорить компьютерам прямым текстом, чего от них хотим?

Однако до сих пор особого прогресса по этой части не наблюдалось. Подозреваю, что и через сто лет людям придётся объяснять компьютерам свои желания посредством программ.

Может вызывать сомнения сама возможность прогнозирования того, какой станет техника через сто лет. Но не стоит забывать, что у нас за плечами почти пятьдесят лет истории программирования. Если обратить внимание на то, как медленно языки менялись до сих пор, попытки что-то предсказать уже не покажутся такими бесперспективными.

Скорость развития языков программирования так мала из-за того, что на самом деле языки не являются технологиями. Языки программирования - это форма записи. Программа представляет собой формальное описание проблемы, которую нужно решить с помощью компьютера. Так что по темпам развития языки программирования ближе к математической нотации, чем, скажем, к средствам траспорта или связи. Математическая нотация тоже эволюционирует, но не такими гигантскими скачками, как техника.
***

Из чего бы ни делались компьютеры через сто лет, можно не сомневаться, что они будут гораздо быстрее, чем сейчас. Если действие закона Мура сохранится, компьютеры станут в 74 квинтиллиона раз быстрее. Это сложновато себе представить. Впрочем, по всей вероятности, закон Мура окажется несостоятельным. Всё, что должно удваиваться каждые восемнадцать месяцев, рано или поздно наталкивается на какой-нибудь фундаментальный предел.

Но даже если компьютеры станут быстрее лишь в жалкий миллион раз, это приведёт к не менее радикальным подвижкам самых основ, на которых строятся языки программирования. Помимо всего прочего, появится больше применений для языков, которые сейчас считаются "медленными", то есть тех языков, которые не транслируются в очень эффективный код.

Несмотря на это, приложения, требующие высокой производительности, будут существовать всегда. Некоторые задачи, которые решаются с помощью компьютеров, порождаются самими компьютерами. Например, скорость, с которой необходимо обрабатывать видео, напрямую зависит от скорости, с которой машина способна его генерировать. Кроме того, существует класс задач, которые по определению обладают неограниченной способностью поглощать все доступные ресурсы: визуализация, криптография, моделирование.

Если некоторые приложения могут становиться всё менее эффективными, а другие по-прежнему будут пытаться "выжать из железа последнее", языкам предстоит отвечать за неуклонно расширяющийся спектр задач. И это уже начинает происходить. Существующие реализации некоторых популярных новых языков ошеломительно расточительны по меркам прошлых десятилетий.

Такое происходит не только с языками программирования. Это всеобщая историческая тенденция. Развитие техники даёт новым поколениям возможность делать вещи, которые раньше считались бы излишеством. Лет тридцать назад люди были бы потрясены, узнав, насколько обыденными станут в наше время междугородные телефонные звонки. А лет сто назад известие о том, что сейчас за один день посылка может преодолеть путь от Бостона до Нью-Йорка через Мемфис, поразило бы всех ещё сильнее.
***

Я уже знаю, что случится со всеми дополнительными ресурсами, которые предоставит сверхбыстрое аппаратное обеспечение через сто лет - их почти целиком будут тратить впустую.

Когда я учился программировать, компьютеры располагали скудными возможностями. Я помню, как приходилось вычищать пробелы из программ на Бейсике, чтобы они помещались в четыре килобайта памяти моего TRS-80. Мысль о том, что все эти изумительно неэффективные программы сожрут ресурсы, делая одно и то же снова и снова, кажется мне кощунством. Однако, похоже, здесь интуиция мне изменяет. Я напоминаю человека, выросшего в бедности и продолжающего экономить даже на самом необходимом, например, на лекарствах.

Но не всякое расточительство вредно. При современной инфраструктуре телефонной связи поминутная оплата междугородных звонков начинает казаться крохоборством. Если есть такая возможность, элегантнее считать все звонки однотипными и не учитывать расстояние, которое разделяет абонентов.

Бывают примеры правильного расточительства, и бывает и неверная расточительность. Меня интересует полезное. Например, расточительство, которое вынудит тратить больше, но взамен позволит упростить устройство. Какую выгоду можно извлечь из огромных ресурсов нового быстрого аппаратного обеспечения?

Жажда скорости так глубоко въелась в нас с нашими жалкими компьютерами, что без сознательных усилий с ней не совладать. В устройстве языков программирования следует сознательно отыскивать ситуации, в которых можно извлечь из возросшей эффективности хотя бы некоторый излишек удобства.
***

Причина существования большинства типов данных - это производительность. Например, во многих современных языках есть и строки, и списки. Семантически строки - это, в той или иной степени, частный случай списков, элементы которых - символы. Так нужен ли тогда отдельный тип данных? На самом деле, не нужен. Строки существуют только для повышения эффективности. Ну не глупо ли забивать семантику языка хитростями, которые позволяют программам работать быстрее? Строки в языках - это очередной пример преждевременной оптимизации.

Если считать основой языка набор аксиом, то дурно в погоне за эффективностью копить лишние аксиомы, которые не дают языку дополнительной выразительной силы. Эффективность важна, но мне кажется, что добиваться её следует иначе.

Думаю, верным решением этой проблемы было бы разделение смысла программы и тонкостей реализации. Вместо того чтобы иметь и строки, и списки, лучше обойтись только списками, но иметь возможность дать компилятору совет по оптимизации, который, при необходимости, позволит ему представить строки в виде последовательности байтов.

Поскольку скорость не важна в большинстве программ, как правило, можно не заботиться о подобных мелочах. Чем быстрее будут становиться компьютеры, тем вернее будет это утверждение.
***

Сокращение количества информации о конкретной реализации сделает программы гибче. Спецификации меняются, пока программа пишется, и это не только неизбежно, но и желательно.

Слово "эссе" происходит от французского глагола "essayer", который в переводе означает "пытаться". Первоначально так назывались тексты, которые писали, для того чтобы в чём-либо разобраться. С программным обеспечением то же самое. Думаю, некоторые из лучших программ представляли собой "эссе", в том смысле, что их авторы начинали работу, не представляя себе в точности, что они пытаются написать.

Программисты на языке Лисп всегда осознавали значение гибкого подхода к типам данных. В самой первой версии программы они стремились использовать списки для всего. Эта версия может быть так потрясающе неэффективна, что приходится нарочно стараться не думать о том, как она работает, как, поедая бифштекс, лучше не задумываться о том, из чего он сделан (во всяком случае, со мной дело обстоит именно так).

Через сто лет программисты захотят такой язык, на котором можно оперативно и с минимальными усилиями набросать первую, невероятно неэффективно работающую версию программы. По крайней мере, так это можно описать в современных терминах. Они скажут, что им нужен язык, на котором легко программировать.

Неэффективные программы - отнюдь не кощунство. Кощунство - это языки, которые заставляют программистов выполнять ненужную работу. Не расход машинного времени, а пустая трата времени программиста - вот истинная неэффективность. И это будет становиться всё очевиднее по мере повышения скорости работы компьютеров.
***

Избавиться от строк можно позволить себе уже сегодня. Но как далеко можно зайти с этим упрощением типов данных? Есть варианты, которые шокируют даже меня, несмотря на то что я специально работал над расширением собственных взглядов. К примеру, можно ли избавиться от массивов? В конце концов, массивы - это лишь частный случай хэш-таблиц, в которых в качестве ключей используют множество целых чисел. А станем ли мы заменять сами хэш-таблицы списками?

Есть ещё более ошеломительные перспективы. Например, в языке Лисп, который в 1960 году изобрел профессор Маккарти, отсутствовали числа. Если рассуждать логически, то отдельная запись для чисел не нужна, ведь их можно представить в виде списков: число n может быть представлено как список из n элементов. Вычисления можно выполнять таким способом. Просто это невыносимо неэффективно.

В действительности, никто не предлагал реализовывать числа в виде списков. Фактически, реализация научной работы, которую Маккарти написал в 1960 году, вообще не планировалась. Это была чисто теоретическая попытка создания более элегантной альтернативы машине Тьюринга. Когда кто-то неожиданно взял работу Маккарти и превратил её в работающий интерпретатор Лиспа, числа, разумеется, не были представлены списками, они были представлены двоичными значениями, как и в любом другом языке.

Может ли развитие языков программирования зайти настолько далеко, что в них не будет чисел как фундаментального типа данных? (Я задаю себе этот вопрос не всерьез, а только ради того, чтобы подразнить будущее. Это похоже на гипотетическое столкновение неминуемого с недвижимым, только в нашем случае против невообразимо неэффективной реализации ставятся невообразимо огромные ресурсы). Думаю, может. Почему бы и нет? Будущее - штука несиюминутная. Если что-то позволяет уменьшить число аксиом в основе языка, это и есть та сторона, на которую следует делать ставки, когда t стремится к бесконечности. Если через сто лет идея окажется невыполнимой, то, может быть, через тысячу лет уже всё изменится.

(Расставлю точки над i: я не предлагаю вести все числовые вычисления действительно при помощи списков. Я предлагаю, чтобы прежде любых дополнительных упоминаний о реализации именно так определялась основа языка. На практике программы, ведущие вычисления, вероятно, будут представлять числа в виде двоичных значений, но это оптимизация, а не часть семантики основы языка.)
***

Многочисленные программные прослойки между приложением и аппаратным обеспечением - другой хороший способ израсходовать лишние такты. Эту тенденцию тоже можно наблюдать уже сегодня: многие новые языки программирования компилируются в байт-код. Эмпирически можно считать, что каждый уровень интерпретации понижает скорость вдесятеро. Такую цену приходится платить за гибкость.

Писать программы как набор уровней - это мощный метод, даже если он используется в приложениях. При программировании "снизу вверх" программа пишется в виде серии уровней, каждый из которых служит языком для вышестоящего уровня. Чем большую часть своего приложения вы сможете превратить в язык для написания приложений подобного рода, тем удобнее будет повторно использовать ваш код.

В восьмидесятых годах идею повторного использования каким-то образом связали с объектно-ориентированным программированием, и сколь угодно многочисленные доказательства обратного, по-видимому, уже не избавят от этого клейма. Хотя иногда объектно-ориентированный код годится для повторного использования, таким его делает не объектно-ориентированность, а программирование "снизу вверх". Возьмём, например, библиотеки: их можно повторно использовать, потому что, по сути, они представляют собой язык. И неважно, написаны ли они в объектно-ориентированном стиле или нет.

Кстати, я вовсе не предрекаю гибель объектно-ориентированного подхода. Хотя, по моему мнению, за исключением некоторых специализированных областей применения, объектно-ориентированность ничего не даёт хорошим программистам, она очень привлекательна для больших организаций. ООП - это приличный способ написания путаного лапшеобразного кода, позволяющий строить программы в виде серии патчей. Большие организации всегда были склонны разрабатывать программное обеспечение таким образом, и думаю, этому и через сто лет не измениться.
***

Поскольку речь идет о будущем, стоит затронуть тему параллельных вычислений, поскольку, как кажется, именно в них собака и зарыта. То есть, вне зависимости от момента нашего разговора, параллельные вычисления, по-видимому, буду оставаться чем-то таким, что произойдет в будущем.

Нагонит ли их будущее когда-нибудь? О параллельных вычислениях говорят, как о чем-то неизбежном, уже лет двадцать, и до сих пор это не особенно повлияло на методики программирования. Или повлияло? Разработчики микросхем уже должны думать о нём, как и программисты, пишущие системное программное обеспечение для многопроцессорных компьютеров.

Но в действительности вопрос в том, насколько высоко по лестнице абстракций сумеет взобраться параллелизм? Придётся ли прикладным программистам учитывать его существование через сто лет? Или он так и останется заботой создателей компиляторов, но практически не видим в исходном коде приложений?

Вероятнее всего, возможности параллелизма, по большей части, растратят впустую. Это частный случай моего более общего прогноза, согласно которому дополнительные вычислительные ресурсы, которые мы получим, окажутся, по большей части, будут израсходованы зря.

Я ожидаю, что вместе с бешеной скоростью применяющегося "железа" параллелизм будет доступен, если отчетливо востребовать его, но использоваться он будет нечасто. Это подразумевает, что параллелизм, который станет распространён через сто лет, не будет цельным. Скорее всего, для обычного программиста это будет выглядеть так: процессы можно будет разветвлять, и все процессы будут исполняться параллельно.

И как в случае со специфическими реализациями структур данных это будет осуществляться на довольно поздних стадиях разработки - при оптимизации. Первая версия, как правило, будет игнорировать все преимущества, которые могут дать параллельные вычисления, в точности как игнорируются преимущества, полученные благодаря специфическому представлению данных.

За исключением некоторых особых видов приложений, параллелизм не будет распространен в программах через сто лет. Обратное положение дел стало бы поспешной оптимизацией.





## Lisp: побеждая посредственность

Летом 1995 года мой друг Роберт Моррис и я основали компанию под названием Viaweb. Наш план заключался в разработке программного обеспечения, которое позволило бы пользователю создавать свой онлайновый магазин. Новизна этого софта на тот момент заключалась в том, что он работал на сервере, используя web-страницы как интерфейс.
У многих в то время была та же идея, но, насколько я знаю, Viaweb была первым web-приложением. Идея показалась нам настолько новой, что название для компании мы придумали так, чтобы оно отражало ее суть — Viaweb ("Через web"), подчеркивало, что программа работает в Сети, а не на локальном компьютере.

Другая особенность нашего софта заключалась в том, что он был написан на языке программирования Lisp.
Viaweb вначале состоял из двух частей: редактора, написанного на Lisp'е, который использовался для построения сайтов, и системы обработки заказов, написанной на C. Большую часть первой версии составлял Lisp, так как система обработки заказов была маленькая. Позже мы добавили еще два модуля, генератор изображений на C, и программу для администрирования, написанную большей частью на Perl'е.

Это была одна из первых больших пользовательских программ на Lisp, который прежде использовался в основном в университетах и исследовательских лабораториях. Lisp дал нам большое преимущество перед нашими конкурентами, которые применяли менее мощные языки.

### cекретное оружие

Эрик Реймонд (Eric Raymond) написал статью "Как стать хакером", и в ней, помимо других вещей, он советует будущим хакерам, какие языки они должны выучить. Для начала Реймонд предлагает начать с Python и Java, так как они просты для изучения. Серьезный хакер также выучит С для того, чтобы покопаться в глубинах Unix, и Perl для системного администрирования системы и создания cgi-скриптов. В конце концов, истинный хакер должен подумать об изучении Lisp'а: Lisp стоит выучить ради того глубокого прозрения, которое вы приобретете в результате; этот опыт сделает вас лучше как программиста до конца ваших дней, даже если сам Lisp вы практически не будете использовать.

Это тот же аргумент, который мы постоянно слышим в пользу изучения латыни. Вас не возьмут на работу благодаря лишь ее знанию, разве что преподавателем классической литературы, но это натренирует ваш ум, и вы станете лучше писать на тех языках, которые вы хотите использовать, например, на английском.

Однако, секундочку. А ведь эта метафора не распространяется так далеко. Причина, по которой вы не получите работу с латынью, заключается в том, что на ней никто не говорит. Если вы будете писать на латыни, вас никто не поймет. Но Lisp — это компьютерный язык, а компьютер говорит на том языке, на котором вы, программист, прикажете ему говорить.

Значит, если Lisp, по словам Реймонда, сделает вас лучше как программиста, почему бы его не использовать? Мне кажется, что если бы художнику предложили кисть, которая позволила бы ему стать еще более хорошим художником, разве не захотел бы он пользоваться ею при написании всех картин, не правда ли?

Я не пытаюсь высмеять Эрика Реймонда. В целом, его совет хорош. То, что он говорит о Lisp'е, — общепринятое мнение: Lisp усовершенствует ваши профессиональные качества, но тем не менее вы не станете его использовать.
Но почему нет? Языки программирования — это, в конце концов, просто инструменты. И если Lisp способствует написанию лучших программ, то следует его использовать. Ну а если нет, то кому он тогда нужен?

Это не только теоретический вопрос. Программное обеспечение — бизнес с жесткой конкуренцией, бизнес, склонный к естественным монополиям. Компания, в которой пишут софт быстрее и лучше, при прочих равных условиях вытеснит конкурентов.
Когда вы основываете компанию, то особенно остро ощущаете это. Либо вы разбогатеете, либо не получите ничего. Если в вашем начинании вы поставите не на ту технологию, ваши конкуренты не оставят от вас и мокрого места.

Мы с Робертом оба хорошо знали Lisp, и у нас не было причин не доверять своим инстинктам и не воспользоваться им. Мы знали, что все остальные пишут на C++ или Perl. Но мы также знали, что это ничего не значит. Если выбирать технологию по тому же принципу, то операционной системой была бы Windows. При выборе технологии нужно обращать внимание не на то, что делают остальные, нужно выбирать то, что будет лучше работать.
Это особенно важно для компании-новичка. В большой компании можно делать то же, что делают другие большие компании. Но начинающая компания не может себе позволить повторять действия других таких же новичков. Я думаю, что немногие понимают это, даже среди тех, кто открывают новый бизнес.

Средняя компания большого уровня растет примерно на 10 процентов в год, так что если вы управляете такой компанией и поступаете так, как поступает средний руководитель этого сектора, то можете ожидать такого же прироста — примерно 10 процентов в год.

Конечно, то же самое справедливо и для новых компаний — если вы поступаете так, как поступает средняя компания, следует ожидать среднего результата.
Проблема в том, что со средним уровнем отдачи на начальном этапе вы вылетите из бизнеса. Уровень выживаемости среди новых компаний меньше 50 процентов. Так что если вы основали новое дело, лучше делать что-то необычное. Иначе вы в беде.
В 1995 году мы знали то, что, как мне кажется, наши конкуренты не понимали, а многие не понимают даже сейчас: если вы создаете программное обеспечение, которое будет работать на сервере, вы вольны использовать любой язык, который хотите. В деле создания программ для десктопа присутствует тенденция разрабатывать программы на языке операционной системы. Десять лет тому назад "писать программы" значило "писать на С". Но для веб-приложений вы вольны выбирать тот язык, который хотите, особенно если у вас есть исходный код языка и операционной системы.

Однако эта новая свобода — палка о двух концах. Теперь, когда вы можете использовать любой язык, нужно думать о том, какой же язык выбрать. Компании, которые делают вид, что ничего не изменилось, рискуют обнаружить, что их соперники так не считают.
Если можно использовать любой язык, какой выбрать? Мы выбрали Lisp. Было ясно, что быстрая разработка важна на этом рынке. Все мы начинали с нуля, поэтому компания, которая добавляет новую функциональность быстрее других, будет иметь серьезное преимущество.

Мы знали, что Lisp — действительно очень хороший язык для быстрого создания программ, а серверные приложения еще сильнее увеличивают эффект быстрой разработки, потому что можно использовать программу через минуту после того, как она написана.
Если другие компании не хотели использовать Lisp, это было лишь преимуществом для нас. Lisp мог дать нам технологическое превосходство — а нам было важно любое доступное подспорье.
Когда мы основали Viaweb, у нас не было опыта в бизнесе. Мы ничего не знали о маркетинге, о том, как нанимать людей, как зарабатывать деньги или привлекать клиентов. Ни у кого из нас не было прежде того, что можно назвать настоящей работой. Единственное, что мы умели — это писать программы. Мы надеялись, что это нас выручит. Мы были готовы воспользоваться любой возможностью получить преимущество в софтверном бизнесе.

Использование Lisp'а можно было назвать экспериментом. Гипотеза заключалась в том, что если мы будем писать на Lisp'е, мы сможем расширять функциональность быстрее конкурентов, и наш продукт будет способен на трюки, недоступные им. А так как Lisp — язык очень высокого уровня, то нам не будет нужна большая команда разработчиков — соответственно и затраты будут ниже.

В этом случае мы сможем предложить лучший продукт за меньшие деньги, и при этом получить прибыль. При оптимальном развитии событий мы должны были привлечь всех клиентов, не оставив никого конкурентам, которым пришлось бы в конце концов уйти из бизнеса. По крайней мере, мы надеялись, что так произойдет.
Каковы же были результаты эксперимента? К удивлению, наша гипотеза себя оправдала. Со временем у нас было много конкурентов, порядка двадцати — тридцати, но ни у одного из них не было продукта, способного соперничать с нашим. У нас была WYSIWYG-программа для создания онлайновых магазинов, которая работала на сервере, и тем не менее, выглядела как обычное приложение. У наших соперников были CGI скрипты.

Мы всегда были впереди конкурентов по функциональности. Иногда, в порыве отчаяния, они пытались добавить новую функцию, которой не было у нас. Однако с Lisp'ом наш цикл разработки был настолько коротким, что мы могли воспроизвести аналогичную возможность в течение дня или двух после того, как конкурент объявлял о ней в пресс-релизе. К тому моменту, когда журналисты, занимающиеся пресс-релизом, звонили нам, у нас было все то же самое.
Должно быть, нашим конкурентам казалось, что мы владели неким секретным оружием, например перехватывали их закрытую переписку или что-то в этом роде. На самом деле у нас было секретное оружие, но гораздо более простое, чем могло показаться. Не было никакой утечки информации. Просто мы могли разрабатывать наш продукт быстрее, чем это казалось возможным.
Когда мне было девять, мне в руки попала книга Фредерика Форсайта, "День Шакала". Главный герой книги — киллер, которого наняли для того, чтобы убить президента Франции. Убийце нужно было пробраться мимо полиции, чтобы попасть в квартиру, откуда открывается вид на дорогу, по которой проходит маршрут президента. Киллер прошел мимо полиции на костылях, одетый стариком, и его никто не заподозрил.

Это напоминает наше "секретное оружие". Мы писали наш продукт на причудливом языке со странным синтаксисом, полным скобок, на языке, популярном в сфере Искусственного Интеллекта. Годами такое определение Lisp'а вызывало у меня раздражение. Но теперь это работало в нашу пользу.

В бизнесе нет ничего более ценного, чем техническое преимущество, которого не понимают ваши конкуренты. В бизнесе, как и на войне, сюрприз стоит столько же, сколько сила.

Я слегка смущен, но признаюсь, что никогда открыто не говорил о Lisp'е в то время, когда мы работали над Viaweb. Мы никогда не упоминали его в прессе, и если бы вы искали следы Lisp'а на нашем сайте, все, что вы бы нашли, это названия двух моих книг и мою биографию. И это не случайность. Начинающая компания должна давать своим конкурентам настолько мало информации, насколько это возможно. И если они не знали, на каком языке был написан наш софт, или им было все равно, я предпочел оставить все как есть.

Роберт Моррис говорит, что мне не нужно было скрытничать, потому что даже если бы наши конкуренты узнали, что мы используем Lisp, они бы не поняли, почему: "Если бы они были настолько умными, чтобы понять это, они бы уже писали на Lisp'е."
Лучше всего понимали нашу технологию наши клиенты. Им было все равно, на каком языке был написана наша программа, но они отметили, что работает он на самом деле хорошо. Программа Viaweb позволяла им создавать замечательно выглядящие интернет-магазины буквально за минуты. Таким образом, у нас появлялось все больше пользователей, в основном за счет распространения личного мнения наших клиентов.
К концу 1996 у нас было примерно 70 онлайновых магазинов. К концу 1996 их было 500. Шесть месяцев спустя, когда нас приобрел Yahoo, у нас было 1070 пользователей. Сегодня, под именем Yahoo Store, этот продукт продолжает господствовать на своем рынке. Это одна из наиболее прибыльных частей Yahoo, и магазины, построенные с его помощью, — это основа Yahoo Shopping. Я покинул Yahoo в 1999, и поэтому не знаю точно, сколько у них пользователей сейчас, но последние цифры, которые я слышал, — это около 14 тысяч пользователей.
Люди спрашивают меня, используется ли Lisp сейчас в Yahoo Store. Да, весь Lisp код все еще там. В Yahoo на серверах работает софт, написанный на всех пяти языках, которые советует хакерам Эрик Реймонд.

### Парадокс Блаба

Что же в Lisp'е такого прекрасного? Если он такой замечательный, почему его не используют все? Казалось бы, риторические вопросы, но на самом деле на них есть прямые ответы. Lisp настолько хорош не тем, что в нем есть некое волшебное качество, видимое только его приверженцам, а тем, что он — самый мощный язык программирования из существующих.
И причина того, что все вокруг пишут не на Lisp'е, заключается в том, что выбор языка программирования — вопрос не только технологии, но также и привычки, а ничто не меняется так медленно, как привычки. Конечно, оба эти тезиса требуют разъяснений.

Я начну с шокирующего утверждения: языки программирования отличаются друг от друга своей мощностью.
По крайней мере мало кто будет спорить, что высокоуровневые языки более мощные, чем машинный язык. Большинство программистов согласятся, что, как правило, программировать стоит не на машинном языке, а на каком-нибудь языке высокого уровня, переводя программу в машинный код с помощью компилятора. Сейчас эта идея получила даже аппаратное воплощение — с восьмидесятых годов команды процессоров разрабатываются скорее для компиляторов, чем для программистов.
Каждый знает, что писать всю программу вручную на машинном языке — ошибочно. Но гораздо реже понимают то, что существует и более общий принцип: при наличии выбора из нескольких языков ошибочно программировать на чем-то, кроме самого мощного, если на выбор не влияют другие причины.

Все языки одинаково мощные, если рассматривать их с точки зрения эквивалентности машине Тьюринга, но это не та мощь, которая важна программисту. (Никто ведь не хотел бы программировать машину Тьюринга). Мощь языка, в которой заинтересован программист, возможно, трудно определить формальными методами, однако одно из объяснений этого понятия заключается в свойствах, которые в менее мощном языке можно получить, только написав на нем интерпретатор для более мощного языка. Если в языке A есть оператор для удаления пробелов из строк, а в языке B его нет, это не делает A более мощным, чем B, так как в B можно написать процедуру, которая делала бы это.

Но, скажем, если язык A поддерживает рекурсию, а B — нет, это нечто, что нельзя исправить написанием библиотечных функций.
Есть много исключений из этого правила. Если вы пишете программу, которая должна тесно взаимодействовать с программой, написанной на определенном языке, возможно, окажется разумным писать новую программу на том же языке.

Если вы пишете программу, которая должна делать что-то очень простое, вроде численной обработки больших массивов данных или манипуляций с битами, можно использовать язык не самого высокого уровня абстракции, тем более что программа будет слегка быстрее.

Если вы пишете короткую программу, которую используете один раз и выбросите прочь, возможно, следует использовать тот язык, который имеет лучшие библиотечные функции для данной задачи.
Но в целом для программного обеспечения нужно использовать самый мощный (и приемлемо эффективный) язык из всех доступных. Отличный от этого выбор — это ошибка такого же рода, как упор на программирование в машинных кодах, хотя и с меньшими негативными последствиями.

Понятно, что уровень машинного языка очень низок. А высокоуровневые языки часто рассматриваются как одинаковые, по-крайней мере, так принято считать. Но это не так. Технический термин "язык программирования высокого уровня" не обозначает ничего определенного. Не существует четкой границы между множеством "машинных" языков с одной стороны, и множеством "высокоуровневых" с другой. Языки распределены в континууме (возможно, не просто континуум, а некая структура, уменьшающяяся кверху;
важна здесь не форма, а сама идея о том, что существует по крайней мере частичный порядок) абстрактности, начиная от самых мощных "языков высокого уровня" вниз к "машинным языкам", которые, в свою очередь, тоже отличаются друг от друга по мощности.

Возьмем Cobol. Cobol — язык высокого уровня, так как компилируется в машинный язык. Но станет ли кто-нибудь утверждать, что по мощности Cobol эквивалентен, скажем, Python'у? Возможно, он ближе к машинному языку, чем Python.

А как насчет Perl четвертой версии? В Perl 5 в язык были добавлены лексические замыкания (lexical closures). Большинство Perl хакеров согласятся, что Perl 5 мощнее, чем Perl 4. Но раз вы это признали, вы признали, что один высокоуровневый язык может быть мощнее другого. Из этого неизбежно следует, что использовать нужно самый мощный язык.

Впрочем, из этого утверждения редко делается вывод. Программисты старше определенного возраста редко меняют язык по своей воле. Они будут считать достаточно хорошим тот язык, к которому привыкли.

Программисты очень привязываются к своим любимым языкам, а я не хочу оскорбить ничьи чувства, поэтому я объясню свою позицию, используя гипотетический язык с названием Блаб.

Блаб попадает в середину континуума абстрактности. Это не самый мощный язык, но он мощнее, чем Cobol или машинный язык.
И на самом деле, наш гипотетический программист на Блабе не будет использовать ни Cobol, ни машинный код. Для машинных кодов есть компиляторы. Что же касается Cobol'а, наш программист не знает, как на этом языке вообще что-то можно сделать. В Cobol'е даже нет некой возможности X, присутствующей в Блабе.

Когда наш гипотетический Блаб-программист смотрит вниз на континуум мощности языков, он знает, что смотрит вниз. Менее мощные, чем Блаб, языки явно менее мощны, так как в них нет некой особенности, к которой привык программист. Но когда он смотрит в другом направлении, вверх, он не осознает, что смотрит вверх. То, что он видит, — это просто "странные" языки. Возможно, он считает их одинаковыми с Блабом по мощности, но со всяческими сложными штучками. Блаба для нашего программиста вполне достаточно, так как он думает на Блабе.

Когда мы поменяем точку обзора программиста, используя любой язык программирования выше по континууму мощности, мы обнаружим, что теперь программист смотрит на Блаб сверху вниз. "Как же можно что-то сделать, используя Блаб? В нем отсутствует даже конструкция Y!"

Используя метод индукции, приходишь к выводу, что только те программисты, которые понимают самый мощный язык, в состоянии осознать полную картину разницы в мощности между различными языками (видимо, именно это имел ввиду Эрик Реймонд, когда говорил о том, что Lisp сделает вас лучше как программиста). Следуя парадоксу Блаба, нельзя доверять мнению других: другие программисты довольны тем языком, который используют, потому что этот язык определяет способ их программистского мышления.

Я знаю это из своего опыта, когда учился в старших классах школы и писал программы на Бейсике. Этот язык не поддерживал даже рекурсию. Трудно представить написание программ без рекурсии, но в то время мне это не нужно было. Я думал на Бейсике. Я был спец. Мастер всего, что изучил.

Пять языков, которые советует хакерам Эрик Реймонд, находятся в разных точках континуума мощности, и то, где они находятся относительно друг друга, — тонкий вопрос. Я скажу, что Lisp находится на вершине континуума. И чтобы поддержать это утверждение, я скажу о том, чего мне не хватает, когда я смотрю на остальные пять языков. Как же можно что-то сделать с ними, думаю я, без свойства Z? И самое большое Z — это макросы. (Рассматривать макросы как отдельное свойство — это немного неправильно. На практике их польза увеличивается такими свойствами Lisp'а, как лексические замыкания и частичная параметризация (rest parameters).

Во многих языках есть что-то, называющееся макросом. Но макросы в Lisp'е уникальны. То, что делают макросы имеет отношение, верите вы или нет, к скобкам. Создатели Lisp'а добавили все эти скобки в язык не для того, чтобы отличаться от других. Скобки в Lisp'е имеют особый смысл, они — внешнее свидетельство фундаментальной разницы между Lisp'ом и другими языками.
Программа на Lisp'е состоит из данных. И не в том тривиальном значении, что исходные файлы содержат символы, а строки — один из типов данных, поддерживаемых языком. После прочтения программы парсером Lisp код состоит из готового к использованию дерева структур данных.

Дело не в том, что в Lisp'е странный синтаксис, скорее, его нет вообще. Программы пишутся в готовых синтаксических деревьях, которые в других языках генерируются парсером во время разбора исходного текста. Эти синтаксические деревья в Lisp'е полностью доступны вашим программам, и вы можете писать программы, которые изменяют эти деревья. В Lisp'е подобные программы называются макросы. Это программы, которые пишут программы.

Программы, которые пишут программы? И когда же такое может понадобиться?

Не очень часто, если вы думаете на Cobol'е. И постоянно, если вы думаете на Lisp'е. Было бы удобно, если бы я дал пример мощного макроса и сказал бы: "Вот! Смотрите!". Но если бы я и привел пример, для того, кто не знает Lisp, он выглядел бы не более чем белиберда. Рамки данной статьи не позволяют изложить все необходимое для понимания подобного примера. В книге Ansi Common Lisp я старался излагать материал как можно быстрее, но даже так я не добрался до макросов раньше страницы 160.
Однако мне кажется, что я могу дать убедительный аргумент. Исходный текст редактора Viaweb на 20-25 процентов состоял из макросов. Макросы сложнее писать, чем обычные функции Lisp'а, и считается дурным тоном использовать их там, где можно без них обойтись. Поэтому каждый макрос в той программе был необходим. Это значит, что примерно 20-25 процентов кода в программе делают то, что нельзя просто сделать на других языках.

Как бы скептически ни относился Блаб-программист к моим заявлениям о таинственной мощи Lisp'а, это должно его заинтересовать. Мы не писали этот код для своего собственного развлечения. Мы были маленькой компанией, и программировали так, как только могли, чтобы возвести технологический барьер между нами и нашими конкурентами.

Пытливый читатель может задаться вопросом, а нет ли здесь взаимосвязи? Некоторая большая часть кода делала нечто, что очень сложно сделать на других языках. Получившееся в результате программное обеспечение делало то, что программное обеспечение наших соперников делать не могло. Возможно, между этими фактами есть связь. Я советую вам подумать в этом направлении. Возможно, это все не просто старческие бредни.

### Айкидо для начинающих компаний

Однако я не думаю, что смогу убедить кого-нибудь (старше 25) выучить Lisp.
Цель этой статьи — не изменить чье-то решение, а вдохновить тех, кто уже заинтересован в использовании Lisp'а — тех, кто знает, что Lisp — это мощный язык, но беспокоятся из-за того, что Lisp мало используется. В случае конкуренции это преимущество. Мощь Lisp'а умножается тем фактом, что ваши конкуренты этого не понимают.

Если вы раздумываете над использованием Lisp'а в новом бизнесе, не стоит беспокоиться о том, что большинство не понимает этот язык. Вам нужно надеяться на то, что так все и останется. А так оно скорее всего и будет. Большинство довольны тем, что они используют — это природа языков программирования. Компьютерное железо изменяется настолько быстрее личных привычек, что практика программирования обычно отстает от процессора на десять — двадцать лет. В таких местах как MIT писали на высокоуровневых языках уже в начале 60-х, но многие компании продолжали писать на машинных кодах вплоть до 80-х. Бьюсь об заклад, что многие продолжали писать на машинных кодах до тех пор, пока процессор, словно бармен, собирающийся закрыть бар и пойти домой, не выдворил их прочь, переключившись на набор команд RISC.

Обычно технология меняется быстро. Однако с языками программирования все по-другому — они не просто технология, они воплощают собой способ мышления программистов. Это наполовину технология, наполовину религия. В результате сравнения языков программирования принимают форму либо религиозных войн, либо университетских учебников, настолько нейтральных, что они похожи на труды по антропологии. Те, кто желают спокойствия, избегают столь острой темы. Однако вопрос религиозен лишь наполовину, этот вопрос изучить не помешает, особенно если вы собираетесь создавать новый язык программирования. Средний язык — это язык, которым пользуется средний программист. Движется он медленно, как айсберг. "Сборка мусора" (Garbage Collection), впервые введенная в употребление в Lisp'е примерно в 1960 году, сейчас повсеместно признается хорошей штукой. Динамическая типизация также становится все более популярной. Лексические замыкания, введенные в употребление Lisp'ом в начале семидесятых, сейчас едва видны на экране радара. Макросы, появившиеся в Lisp'е в середине шестидесятых, до сих пор — терра инкогнита.

Очевидно, что средний язык обладает мощной инерцией. Я не предлагаю
вам сопротивляться этой силе. Я предлагаю совершенно обратное — подобно практикующему айкидо, воспользоваться этой силой против своих противников.

Если вы работаете в большой компании, это может быть не так просто. Вам будет трудно убедить своего косного босса позволить вам программировать на Lisp'е, особенно если тот только что прочитал в газете о каком-то языке, который, как и Ада двадцать лет тому назад, готов завоевать мир. Но если вы работаете в начинающей компании, в которой еще нет такого босса, вы можете, как это сделали мы, извлечь выгоду из парадокса Блаба: использовать технологию, которой ваши конкуренты, неотрывно привязанные к своему среднему языку, не смогут ничего противопоставить.

Если уж довелось работать в начинающей компании, есть неплохая подсказка, как оценивать конкурентов. Прочитайте список их вакансий. Все другое на их сайте может быть сплошным сочинительством, и лишь описания требуемых специалистов должны быть точными, иначе они наймут не того кандидата, что им нужен.

За те годы, что я проработал в Viaweb, я прочитал множество объявлений о найме на работу. Примерно каждый месяц появлялся новый конкурент. Первое, что я делал после того, как проверял, доступна ли онлайновая демонстрация работы их программы, — смотрел список их вакансий. Через пару лет я научился отличать опасных конкурентов от неопасных. Чем больше отдавало IT-мэйнстримом от описания требуемых кандидатур, тем менее опасна была компания. Самыми безопасными были те, кому требовались специалисты по Oracle. О таких не стоило беспокоиться. Также мы были спокойны, если требовались разработчики на C++ или Java.

Если требовались программисты на Perl или Python, это уже было слегка пугающе — это значило, что компанией или, по крайней мере, ее технической частью заправляли настоящие хакеры. Если бы я когда-нибудь увидел объявление о найме на работу Lisp-хакеров, я бы обеспокоился не на шутку.






## Месть ботанов

За перевод спасибо Щёкотовой Яне.
Май 2002

> «Мы гонялись за С++ программистами. Нам удалось перетащить их целую кучу на полпути к Lisp.»
> -- <cite>Гай Стил, соавтор Java спецификации.</cite>

В бизнесе программного обеспечения идет вечная борьба между вооруженными до зубов знаниями учеными, и другой, не менее грозной силой, начальниками, в арсенале которых одно сплошное невежество [^dilbert]. Все ведь знают, что это за зверь такой? Полагаю, большинство людей в мире технологий не только распознают этого карикатурного персонажа, но и знакомы с реальным человеком из своей фирмы, с которого этот образ срисован.

[^dilbert]: В оригинале pointy-haired boss – персонаж серии комиксов «Дилберт» Скота Адамса, отличается необразованностью и полнейшим отсутствием базовых знаний области, которой он управляет.

Невежественный начальник чудесным образом сочетает в себе два качества, которые сами по себе довольно распространены, но редко, когда объединяются в одном лице: *(а)* он ровным счетом ничего не знает о технологиях, и *(б)* у него всегда есть самые твердые убеждения по любому касающемуся их вопросу.

Предположим, например, Вам надо написать некоторую программу. Ваш начальник-невежда не имеет ни малейшего понятия о том, как она должна работать, и не может отличить один язык программирования от другого, и все же, он знает, на каком языке Вам следует писать эту программу. А именно, он считает, что Вам следует писать ее на Java.

Почему он так думает? Давайте посмотрим, что творится в это время в голове у начальника-профана. То, что он думает, выглядит вот так. Java это стандарт. Я знаю, так должно быть, потому что я постоянно читаю об этом в СМИ. Поскольку это стандарт, у меня не будет проблем из-за его использования, что также означает, что всегда будет куча Java программистов. Поэтому, если программисты, работающие сейчас на меня, уволятся, так как все программисты, работающие у меня, так всегда и делают по какой-то таинственной причине, я могу с легкостью их заменить.

Ну, это не лишено смысла. Но это все основано на одном негласном предположении, которое на самом деле ложно. Такой начальник считает, что все языки программирования довольно сильно схожи. Если бы это было так, он бы попал в самую точку. Если бы все языки были бы взаимозаменяемы, то конечно, можно было бы использовать любой язык, которым пользуются другие.

Но все языки разные, и я полагаю, что могу доказать это Вам без излишних подробностей об их различиях. Если бы Вы спросили начальника в 1992 году на каком языке программирования следует писать программу, он бы без сомнения ответил так, как и сегодня. Программное обеспечение следует писать на С++. Но если все языки равносильны, почему тогда мнение начальства должно вообще измениться? То есть почему Java разработчикам вообще следовало беспокоиться о создании нового языка?

По всей видимости, если Вы создаете новый язык, то только потому, что думаете, что он, в некотором роде, лучше, чем то, что уже есть у людей. И действительно, Гослинг дает понять в первой официальной документации по Java, что тот (язык программирования Java), в свою очередь, был создан, чтобы решить некоторые проблемы С++. И вот, пожалуйста. Не все языки равносильны. Если Вы проследите за ходом мыслей в голове нашего начальника до Java и обратно, через историю Java к его истокам, у Вас возникнет догадка, идущая в разрез с предположением, с которого Вы начали.

Так кто же прав? Джеймс Гослинг, или наш невежественный начальник? Неудивительно, что прав Гослинг. Некоторые языки лучше других для конкретных задач. И, знаете ли, это поднимает ряд интересных вопросов. Java был разработан, чтобы быть лучшим для некоторого круга задач, по сравнению с С++. Каких задач? Когда лучше использовать Java, а когда С++? Существуют ли ситуации, когда другие языки лучше, чем эти.

Как только Вы начнете раздумывать над этим вопросом, Вы попадете в запутанную ситуацию. Если бы начальнику пришлось думать о задачах комплексно, у него бы мозги взорвались. Как только он определит все языки программирования как равнозначные, все, что ему нужно сделать, это выбрать тот, у которого окажутся наиболее мощные темпы развития. И, т.к. это больше вопрос моды, чем технологий, даже он, вероятно, сможет получить верный ответ. Но если языки разные, ему, вдруг, приходится решать две системы уравнений, пытаясь найти оптимальный баланс между двумя вещами, о которых ему ничего неизвестно: относительная приемлемость 20, или около того, ведущих языков для задачи, которую ему нужно решить, и сложность поиска программистов, библиотек, и т.д. для каждого из них. Если это то, что кроется за дверью, неудивительно, что невежественный начальник не захочет ее открывать.

Недостаток убеждения в том, что все языки программирования эквивалентны, состоит в том, что это на самом деле не так. Но преимущество заключается в том, что это значительно упрощает Вашу жизнь. И я думаю, это основная причина, по которой данное убеждение так широко распространено. Так удобно.

Нам известно, что Java должен быть довольно хорош, потому что это новый, современный язык программирования. Так ли это? Если взглянуть на мир языков программирования свысока, то будет казаться, что Java это самая последняя новинка. (Если смотреть с достаточно большой дистанции, все, что можно будет увидеть, это большой сияющий рекламный щит, оплаченный корпорацией Sun.) Но если взглянуть на этот мир с довольно близкого расстояния, обнаружится, что существует некоторая степень этой крутости. В субкультуре хакеров есть другой язык, под названием Perl, который считается намного круче Java. Сайт Slashdot, например, сгенерирован на Perl. Я не думаю, что Вы бы увидели, как эти парни используют Java Server Pages. Но существует еще один, более новый язык, который называется Python, чьи пользователи стараются смотреть на Perl свысока, но и это еще не все.

Если рассмотреть эти языки в таком порядке Java, Perl, Python, то можно заметить интересную схему. По крайней мере, эта схема заметна, если Вы используете Lisp. Каждый из них все больше и больше похож на Lisp. Python копирует даже такие особенности, которые многие Lisp программисты принимают за ошибки. Можно было бы построчно перевести простые Lisp программы на Python. На дворе 2002 год, и языки программирования почти сравнялись тем, что было разработано в 1958 году.

### Идя в ногу с математикой

Что я хочу сказать, так это то, что Lips был впервые открыт Джоном Маккарти в 1958 году, а популярные языки программирования только сейчас подхватывают идеи, которые он в то время развивал.

Итак, как же такое может быть? Разве компьютерные технологии не меняются очень быстро? Я только хочу сказать, что в 1958 году компьютеры были гигантами величиной с холодильник с мощностью процессоров как у наручных часов. Как могла такая старая технология оставаться актуальной, не говоря уже о том, чтобы превзойти последние разработки?

Я расскажу Вам как. Все потому, что Lisp, в действительности, не разрабатывался как язык программирования, по крайней мере, не в том смысле, что мы понимаем сегодня. То, что мы подразумеваем под языком программирования, является тем, чем мы пользуемся для указания компьютеру, что делать. Маккарти, в конце концов, планировал разрабатывать язык программирования в этом смысле, но Lisp, к которому мы пришли, был основан на некоторой отдельной его работе, чисто теоретического характера, — попытке определить более удобную альтернативу машине Тьюринга. Как Маккарти позже говорил:

> «Другой способ показать, что Lisp точнее машин Тьюринга, это написать универсальную Lisp функцию и показать, что она короче и более понятна, чем описание универсальной машины Тьюринга. Таковой была Lisp функция eval …, которая вычисляет значение Lisp выражения…. Описание eval требовало создания нотации, представляющей Lisp функции как данные языка Lisp, и такая нотация была разработана ради самого исследования, не задумываясь о том, что она будет использоваться для выражения Lisp программ на практике.»

А потом произошло вот что. Спустя некоторое время в конце 1958 года, Стив Рассел, один из аспирантов Маккарти, взглянул на определение eval и осознал, что если бы он перевел это в машинный язык, то результатом был бы интерпретатор для Lisp.

Это было большой неожиданностью в те времена. И вот что позже в интервью Маккарти сказал по этому поводу:

> Стив Рассел сказал: «Послушай, почему бы мне не запрограммировать эту eval функцию.» А я ответил ему: «Ха, ты путаешь теорию с практикой. Эта eval функция предназначена для чтения, а не вычислений.» Но он продолжил работу и сделал ее. Таким образом, он скомпилировал eval функцию из моей работы в машинный код IBM 704, исправил ошибки, а потом представил это как интерпретатор для Lisp, чем это на самом деле и являлось. Таким образом, с этой точки зрения Lisp обладал в основном той формой, какую имеет сегодня…

Внезапно, полагаю, за какие-то несколько недель, Маккарти обнаружил, что это чисто теоретическое мероприятие преобразовалось в настоящий язык программирования, и даже более мощный, чем он предполагал.

Таким образом, кратким объяснением того, почему этот язык 1950-х годов не относят к устаревшим, является тот факт, что его основой была не технология, а математика. Ведь математика не обладает сроком годности. Будет правильнее сравнивать Lisp не с аппаратурой 1950 года, а, скажем, с алгоритмом быстрой сортировки, который был открыт в 1960 году и все еще является самым быстрым алгоритмом сортировки общего назначения.

Существует другой язык, выживший со времен 1950-х годов, Fortran, и он представляет противоположный подход к разработке языков. Lisp был теорией, которая неожиданно превратилась в язык программирования. Fortran изначально разрабатывался как язык программирования, но, как бы мы сейчас оценили, в качестве низкоуровневого.

Fortran I, разработанный в 1956 году, был совсем другого поля ягода, в отличие от нынешнего языка Fortran. Fortran I в большей степени был языком ассемблера с математикой. В некотором роде он был слабее более новых языков ассемблера. Например, в нем отсутствовали подпрограммы, только операции перехода. Современный Fortran сейчас, возможно, ближе к Lisp, чем к Fortran I.
image

Lisp и Fortran были ветвями двух различных древ эволюции. Один брал свое начало из математики, а второй – из архитектуры машин. Эти два древа с тех пор переплетаются. Lisp мощно выстрелил и на протяжении последующих 20 лет ускорился. Так называемые господствующие (mainstream) языки быстро стартовали, но на данный момент наиболее продвинутые из них едва ли могут поравняться с Lisp. Они недалеко от него ушли, но им все еще не хватает пары вещей.

### Чем отличается Lisp

Когда Lisp был впервые разработан, он воплощал в себе 9 новых принципов. Сегодня некоторые из них мы воспринимаем как само собой разумеющееся, другие можно увидеть только в более продвинутых языках, а два все еще остаются прерогативой Lisp. Эти 9 принципов перечислены ниже в порядке их применения в основном IT-течении.


**1 Условные высказывания (Conditionals)**. Условное высказывание представляет собой конструкцию *if-then-else*. Сегодня для нас это стандарт, но вот в Fortran I они отсутствовали. Там был только условный переход goto, на основе низлежащей машинной инструкции.

**2 Функциональный тип данных (A function type)**. В Lisp функции – это такой же тип данных, как integer или string. Они имеют буквенное представление, могут быть присвоены переменным, могут передаваться в качестве аргументов, и т.д.

**3 Рекурсия (Recursion)**. Lisp был первым языком программирования, который ее поддерживал.

**4 Динамическое типизирование (Dynamic typing)**. В Lisp все переменные, в сущности своей, являются указателями. Значения – вот что имеет тип, а не переменные, и присвоение или связывание переменных означает копирование указателей, а не того, на что они указывают.

**5 Сборка мусора (Garbage-collection)**.

**6 Программы, составленные из выражений (Programs composed of expressions)**. Программы на Lisp представлены в виде деревьев выражений, каждое из которых возвращает значение. Это как противопоставление Fortran и большинству последующих языков, которое различает понятия «выражения» и «операторы».

Для Fortran I это различие было естественным, потому что операторы не могли быть вложенными. И таким образом, пока для работы нужны были математические выражения, не было смысла в создании чего-то такого, что возвращало бы значение, т.к. это значение никуда не могло быть сохранено.

Такое ограничение ушло в прошлое с появлением языков с блочной структурой, но к тому моменту было уже слишком поздно. Различие между выражениями и операторами сильно укоренилось и распространилось с Fortran на Algol, а затем и на всех их потомков.

**7 Символьный тип (symbol type)**. Символы по факту являются указателями на строки, сохраненные в хеш-таблицах. Таким образом, проверять равенство можно путем сравнения указателей, а не каждого символа.

**8 Нотации для кода**, использующего деревья символов и констант.

**9 Постоянная целостность языка**. В действительности различия между временем чтения кода, временем компиляции и временем выполнения нет. Можно компилировать или запускать код во время чтения, читать или запускать код во время компиляции, и читать или компилировать код во время его выполнения.

*Запуск кода во время чтения* позволяет пользователям перепрограммировать синтаксис Lisp. *Запуск кода во время компиляции* – это базовый принцип макроса. *Компиляция во время выполнения* – это принцип использования Lisp в качестве языка расширения в программах подобных Emacs. А *чтение во время выполнения* позволяет программам общаться посредством S-выражений, что не так давно было заново изобретено как XML.

Когда Lisp впервые появился, эти принципы были далеко за пределами обычной практики программирования, что, в основном, было продиктовано аппаратурой, появившейся в конце 1950-ых годов. Со временем, базовый язык, воплощенный в последователях популярных языков, постепенно эволюционировал в Lisp. Принципы **1-5** сейчас широко распространены. Принцип под номером **6** еще только начинает проявляться в мейнстриме. Python находится на **7** стадии, хотя, кажется, для этого принципа отсутствуют какие-либо синтаксические правила.

Что касается пункта **8**, то он, возможно, является одним из самых интересных. Принципы **8 и 9** стали частью Lisp случайно, потому что Стив Рассел внедрил то, что Маккарти никогда и не собирался делать. И все же, эти принципы оказались лежащими в основе как странного появления Lisp, так и его наиболее отличительных черт. Lisp выглядит настолько странно не потому что у него своеобразный синтаксис, а потому что у него нет синтаксиса как такового. Вы пишете программы прямо в деревьях грамматического разбора, которые строятся за кулисами во время парсинга в других языках программирования, и эти деревья состоят из списков, которые являются структурами данных в Lisp.

Выражение языка в его собственных структурах данных оказывается довольно мощным свойством. Принципы **8 и 9** в совокупности означают, что можно написать программы, которые пишут программы. Это, возможно, звучит как бред, но в Lisp это обычное дело. Наиболее распространенным способом для осуществления этого является макрос.

Макрос (в контексте Lisp) все еще, насколько мне известно, редкость для языка Lisp. Частично это потому, что, чтобы написать макрос, Вам, вероятно, придется создать синтаксис Вашего языка программирования таким же странным как и у Lisp. Это также может быть потому, что если Вы внедрите этот финальный штрих, то больше нечего и ожидать разработок нового языка, а только нового диалекта Lisp.

В основном, я это все преподношу как шутку, но в ней есть доля правды. Если определить язык, в котором есть car, cdr, cons, quote, cond, atom, eq и нотация для функций, выраженных в виде списков, тогда из всего этого можно построить все остальное нутро Lisp. Это, на самом деле, и есть определяющее качество Lisp: все было организовано так, чтобы Маккарти придал Lisp ту форму, которую он имеет сейчас.

### Где языки имеют значение

Итак, предположим, Lisp представляет некоторое ограничение, к которому асимптотически приближаются популярные языки. Означает ли это, что следует использовать этот язык для написания программного обеспечения? Сколько Вы теряете на использовании менее мощного языка? Не лучше ли, иногда, оставаться в стороне от передовых инноваций? И разве популярность до некоторой степени не является своим собственным обоснованием? Разве невежественный начальник не прав, например, в том, чтобы использовать язык, для которого он сможет легко нанять программистов?

Конечно, существуют проекты, где выбор языка программирования не имеет значения. Как правило, чем требовательнее приложение, тем больший выигрыш Вы получаете от использования мощного языка. Но множество проектов не настолько требовательные. Большая часть процесса программирования состоит из написания небольших программ-посредников, где можно использовать любой язык, с которым Вы уже знакомы, и у которого есть хороший набор библиотек для любых Ваших целей. Если Вам нужно только передать данные из одной Windows программы в другую, конечно же, используйте Visual Basic.

Вы можете также писать программы-посредники и на Lisp (я его использую как настольный калькулятор), но наибольшая выгода от использования языков подобных Lisp в другом спектре применения, где Вам нужно написать сложные программы для решения сложных задач в условиях жесткой конкуренции. Хорошим примером является программа поиска цен на авиаперелеты, право на использование которой ITA Software предоставила компании Orbitz. Эти ребята вошли на рынок, где уже доминировали два крупных сильных противника, Travelocity и Expedia, и, казалось, просто подавили их с технологической точки зрения.

Ядро приложения ITA составляют 200 000 строк программы на Common Lisp, которая ищет на порядок больше возможностей, чем их конкуренты, все еще, по-видимому, использующие технологии эпохи программирования мейнфреймов. (Хотя ITA также в некотором смысле использует язык программирования эпохи мейнфреймов). Я ни разу не видел ни строчки кода из программы ITA, но, согласно одному из их лучших специалистов, они используют много макросов, чему я нисколько не удивляюсь.

### Центростремительные силы

Я и не утверждаю, что при использовании нестандартных технологий не требуется никаких затрат. Не такими уж беспочвенными оказались опасения нашего начальника-профана. Но без осознания всех рисков он склонен к их преувеличению.

Мне на ум приходят три проблемы, которые могут возникнуть при использовании менее популярных языков программирования. Ваши программы могут некорректно работать с программами, написанными на других языках. В вашем распоряжении может быть гораздо меньше различных библиотек. Вы также столкнетесь с трудностями при найме программистов.

Насколько страшна каждая из перечисленных проблем? Важность первой варьируется в зависимости от того, есть ли у вас контроль над всей системой. Если вы создаете ПО, которое будет запускаться на удаленной пользовательской машине, управляющей кадиллаком, на закрытой операционной системе (не буду приводить названия), то, возможно, есть преимущества в том, чтобы писать свое приложение на том же языке, на котором написана сама ОС. Но, если вы держите под контролем всю систему и владеете исходными кодами всех ее частей, как, вероятно, в случае с ITA, то вы можете использовать любой язык, какой захотите. При возникновении несовместимости, вы можете самостоятельно это исправить.

В серверных приложениях вы можете выйти из положения посредством использования передовых технологий, и я думаю, что это главная причина того, что Джонатан Эриксон называет «возрождением языка программирования». Вот почему мы узнаем о новых языках, таких как Perl и Python. Мы знаем про эти языки не потому, что люди используют их для написания Windows приложений, а потому, что люди используют их на серверах. И, поскольку ПО переходит с десктопов на серверную платформу (будущее, с которым даже Microsoft, кажется, смирился), вынужденная необходимость использования попсовых технологий со временем сойдет на нет.

Что касается библиотек, то их важность также зависит от самого приложения. Для менее требовательных задач наличие библиотек может перевесить подлинную мощь языка. Так где же эта точка безубыточности? Это непросто точно сформулировать, но где бы она ни находилась, в ней будет наблюдаться нехватка всего того, под чем подразумевается приложение. Если фирма решилась выйти на рынок ПО, и в ней люди занимаются созданием приложения, которое будет позиционироваться как один из ее продуктов, тогда эта компания, вероятнее всего, вовлечет в работу нескольких опытных специалистов, и ей потребуется минимум 6 месяцев, чтобы создать его. В проектах таких масштабов мощные языки программирования начинают перевешивать удобство наличия библиотек.

Третья причина беспокойства начальства, трудность в найме программистов, является ложным опасением. В конце концов, сколько специалистов вам нужно нанять? Конечно, сейчас нам всем известно, что лучше всего ПО разрабатывается командами до десяти человек. И у вас не должно возникнуть проблем при найме сотрудников в таком масштабе для любого языка программирования, включая тот, о котором некоторые едва ли слышали. Если вы не можете найти десять Lisp программистов, тогда ваша фирма, вероятнее всего, расположена не в том городе, чтобы заниматься там разработкой ПО.

На самом деле, выбор более мощного языка программирования немного снизит разрмер необходимой вам команды, потому что (а) если вы используете более мощный язык, то вам, вероятно, не понадобится так много специалистов, а также (б) программисты, работающие с более продвинутыми языками, являются более умными.

Я не утверждаю, что вы не будете вынуждены использовать то, под чем понимают «стандартные» технологии. В Viaweb (ныне Yahoo Store) мы вызвали всеобщее недоумение среди венчурных капиталистов и потенциальных покупателей фирмы самим фактом использования Lisp. Но мы также всех удивили использованием в качестве серверов универсальных коробочных сборок Intel вместо серверов «профессионального уровня» таких фирм как Sun, эксплуатацией, в те времена непонятного, опенсорсного варианта Unix-подобной системы FreeBSD вместо настоящих коммерческих решений наподобие Windows NT, игнорированием предполагаемого стандарта электронной коммерции SET, который сейчас никто даже и не вспомнит, и прочими вещами.

Нельзя позволять управленцам принимать технические решения за вас. Встревожило ли некоторых потенциальных покупателей фирмы то, что мы использовали Lisp? Некоторых да, слегка. Но если бы мы не работали с Lisp, мы бы не смогли создать ПО, которое бы пробудило в них желание нас купить. То, что казалось для них аномальным, было, на самом деле, причиной и следствием.

Если вы начинаете startup, то не проектируйте свой продукт таким образом, чтобы понравиться инвесторам или потенциальным покупателям. Разрабатывайте свой продукт так, чтобы понравиться пользователям. Если вы завоюете пользователей, то все остальное приложится. А если этого сделать не удастся, то никому не будет и дела до того, насколько угодно правоверными были ваши технологические решения.

### Цена посредственности

Сколько вы теряете при использовании менее мощного языка программирования? На этот счет существуют некоторые данные.

Самой удобной для измерения мерой является, скорее всего, размер кода. Цель высокоуровневых языков состоит в том, чтобы предоставить вам большее число абстракций, более крупные кирпичики, так сказать, чтобы вы обходились без их огромного количества в ходе построения стены определенных размеров. Поэтому, чем мощнее язык, тем короче программа (не только по количеству символов, конечно, но и по числу отдельных элементов).

Как же более мощный язык программирования позволяет писать более короткие программы? Одним из подходов, которым вы можете воспользоваться, если язык позволит, является восходящее программирование. Вместо того, чтобы просто писать ваше приложение на базовом языке, вы поверх базового языка конструируете язык для создания программ подобно вашей, а затем уже на нем пишете вашу программу. Скомпонованный таким образом код может быть гораздо короче, чем если бы вы писали всю вашу программу на базовом языке. На самом деле именно так и работают большинство алгоритмов сжатия. Такую программу будет легче модифицировать, т.к. в большинстве случаев языковой слой вообще не придется изменять.

Объем кода важен, т.к. время на написание программы зависит в основном от длины кода. Если бы ваша программа была в три раза длиннее на другом языке программирования, то вам бы потребовалось написать в три раза больше исходных текстов. И с этим не справиться с помощью найма большего числа людей, потому что по достижению определенного размера дополнительный найм рабочей силы превратится в чистый убыток. Фред Брукс описал этот феномен в своей известной книге «Мифический человеко-месяц», и все, что я видел, лишь подтверждает его слова.

Так на сколько же короче будут ваши программы, если вы будете писать их на Lisp? Чаще всего при сравнении Lisp с С, например, отмечают примерно семи-десятикратное уменьшение. Но в недавней заметке про ITA в журнале New Architect указано, что «одна строка на Lisp может заменить 20 строк на С», а поскольку эта статья сплошь состоит из цитат президента фирмы ITA, я допускаю, что они это число узнали от самой ITA. Если это так, тогда этому утверждению можно доверять. ITA приложения включают в себя много кода на С и С++, так же как и на Lisp, следовательно, они опираются на свой опыт.

Смею предположить, что эти численные показатели даже не являются постоянными. Думаю, они возрастают, когда вы сталкиваетесь с проблемами посерьезнее, а также когда у вас работают более умные программисты. Из лучших инструментов настроящий специалист может выжать больше.

В крайнем случае, если бы вы конкурировали с ITA и решили бы писать программы на С, они бы смогли разработать ПО в 20 раз быстрее вас. Если бы вы потратили целый год на новую функцию, они бы умудрились продублировать ее менее чем за три недели. Тогда как если бы они провели всего три месяца за разработкой чего-то нового, то прошло бы пять лет, прежде чем вам бы удалось это реализовать.

И знаете что? Это только в лучшем случае. Когда мы обсуждаем размеры кода, вы неявно допускаете, что можно писать программы, как ни странно, на менее эффективных языках программирования. Но в действительности существуют пределы возможностей программистов. Если вы пытаетесь решить сложную задачу с помощью слишком низкоуровневого языка, то вы достигнете той точки, когда возникнет чрезвычайно много вещей, которые нужно одновременно удерживать в голове.

Поэтому, когда я говорю, что вооброжаемому конкуренту ITA потребовалось бы пять лет на дублирование того, что в самой ITA могли бы написать на Lisp за три недели, я имею в виду такие пять лет, когда все идет по плану и без единой ошибки. На самом деле, в большинстве компаний это работает так: любой разрабатываемый проект, требующий пяти лет работы, возможно, вообще никогда не будет закончен.

Признаю, это крайний случай. Специалисты из ITA кажутся необычайно смекалистыми, а С – довольно низкоуровневым языком. Но на конкурирующем рынке, даже разница два или три к одному была бы гарантией того, что вы всегда будете позади.

### Самый верный способ

Существует некоторая вероятность, что наш невежественный начальник даже не захочет и время тратить на раздумья обо всем вышеперечисленном. Как большинство из них и делает. А все потому, что, знаете ли, когда до этого дойдет дело, невежественному начальству все равно, отвесит ли люлей за это его фирма или нет, пока невозможно доказать его вину. Самый безопасный лично для него план состоит в том, чтобы держаться поближе к центру стада.

В крупных организациях, чтобы описать такой подход, используют фразу «лучшие отраслевые практики». Ее целью является оградить невежественного начальника от ответственности: если он что-то решил в соответствии с «лучшими отраслевыми практиками», а фирма понесла убытки, то его нельзя в этом винить. Не он принял такое решение, а отрасль.

Я считаю, что данное понятие было изначально придумано для описания бухгалтерского учета и т.п. Грубо говоря, его смысл в том, чтобы не делать ничего странного. А для бухгалтерии, вероятно, это очень даже хорошая идея. Термины «передовой» и «бухгалтерия» не очень хорошо смотрятся вместе. Но когда вы вносите данный критерий в решения относительно используемых технологий, вы начинаете получать неверные ответы.

Технологии часто должны быть передовыми. В языках программирования, как указал Эранн Гет (Erann Gat), то, что на самом деле дают вам «лучшие отраслевые практики» не является наилучшим, а всего лишь относится к среднему уровню. Когда решение вынуждает вас разрабатывать ПО в темпе более агрессивных конкурентов, то «лучшие практики» это ошибочное использование термина.

Итак, перед нами два факта, которые я считаю очень ценными. На самом деле, я знаю это из своего собственного опыта. Первый факт: языки программирования различны по своим возможностям. Второй факт: большинство менеджеров намеренно это игнорируют. Эти сведения в буквальном смысле рассматриваются как самый верный способ зарабатывания денег. Организация ITA – пример этого способа в действии. Если вы хотите одержать победу в сфере разработки ПО, просто сформулируйте самую сложную проблему, какую только можете, используйте самый мощный язык программирования, который только найдете, и ждите, когда невежественное начальство ваших конкурентов приведет свои фирмы к тому, что те упадут в цене.

### Приложение: мощь языков программирования

Чтобы проиллюстрировать то, что я подразумеваю под сравнительной мощью языков программирования, представьте следующую задачу. Мы хотим написать функцию, генерирующую накапливающие элементы – функцию, которая берет число *n* и возвращает функцию, которая использует другое число *i* для возврата *n*, увеличенного на *i*. (Это приращение с шагом, а не просто сложение. Накапливающий параметр должен накапливать).

В Common Lisp это будет

```cl
(defun foo (n)
  (lambda (i) (incf n i)))
```

а в Perl 5

```perl
sub foo {  
  my ($n) = @_;
  sub {$n += shift}
}
```

что включает больше элементов, чем в версии на Lisp, т.к. в Perl вам придется извлекать параметры вручную.

В Smalltalk код немного длиннее, чем на Lisp

```smalltalk
foo: n
  |s|
  s := n.
  ^[:i| s := s+i. ] 
```

потому что, хоть, в общем и целом, лексические переменные работают, к параметру нельзя применять присваивание, поэтому и приходится создавать новую переменную *s*.

В Javascript пример, опять же, немного длиннее, т.к. в Javascript сохраняется различие между операторами и выражениями, поэтому для возврата значений нужен явный оператор return:

```js
function foo(n) { 
  return function (i) { 
           return n += i } }
```

(если честно, Perl также сохраняет это различие, но обрабатывает это в типичной для Perl манере, позволяя опускать операторы возврата return).

Если попытаться перевести Lisp/Perl/Smalltalk/Javascript код на Python, то вы столкнетесь с некоторыми ограничениями. Т.к. Python не поддерживает полностью лексические переменные, вам придется создавать структуру данных для хранения значения *n*. И, хоть в Python и есть функциональный тип данных, точного представления для него нет (если тело функции не представляет из себя одно единственное выражение), поэтому вам нужно создать именованную функцию для возрвата. Вот к чему вы, в итоге, придете:

```python
def foo(n):
  s = [n]
  def bar(i):
    s[0] += i
    return s[0] 
  return bar
```

Пользователи Python могли бы вполне обоснованно задать вопрос: почему они не могут просто написать

```python
def foo(n):
  return lambda i: return n += i
```

или даже

```python
def foo(n):
  lambda i: n += i
```

И я предполагаю, что так когда-нибудь и случится. (Но если они не захотят ждать, пока Python эволюционирует в Lisp, они всегда могут просто...)

В объектно-ориентированных языках, можно, до определенной степени, сымулировать замыкание (функцию, которая ссылается на переменные, определенные вне тела этой функции) посредством определения класса с одним методом и полем для замены каждой переменной из объемлющего контекста. Это вынуждает программиста проводить некоторого рода анализ кода, который мог бы быть сделан компилятором в языке с полной поддержкой контекста лексического анализа. И это не сработает, если к одной и той же переменной идет обращение из более чем одной функции, но этого достаточно в простых ситуациях, похожих на эту.

Эксперты по Python, похоже, согласны с тем, что для решения задач на Python предпочтительнее способ, при котором нужно писать либо

```python
def foo(n):
  class acc:
    def __init__(self, s):
        self.s = s
    def inc(self, i):
        self.s += i
        return self.s
  return acc(n).inc
```

либо

```python
class foo:
  def __init__(self, n):
      self.n = n
  def __call__(self, i):
      self.n += i
      return self.n
```

Я привожу эти примеры потому, что мне бы не хотелось, чтобы защитники Python говорили потом, что я исказил язык, а потому, что оба эти примера, как мне кажется, сложнее первой версии кода. Вы же делаете то же самое, когда устанавливаете отдельное место для хранения накапливающего параметра; это просто поле в объекте, вместо первого элемента списка. А использование этих специальных, зарезервированных имен полей, особенно таких как `__call__`, кажется немного грубоватым способом.

В соперничестве между Perl и Python заявлением со стороны Python специалистов, по-видимому, выступает то, что Python – более простая альтернатива Perl, но данная ситуация показывает, что мощь языка содержится в максимальной простоте: программа на Perl проще (меньше элементов), даже если синтаксис немного убогий.

А что насчет других языков? В других упомянутых в данном разговоре языках – Fortran, C, C++, Java и Visual Basic – неясно, можно ли на самом деле решить эту задачу. Кен Андерсон говорит, что следующий код также близок к тому, что можно получить на Java:

```java
public interface Inttoint {
  public int call(int i);
}

public static Inttoint foo(final int n) {
  return new Inttoint() {
    int s = n;
    public int call(int i) {
    s = s + i;
    return s;
    }};
}
```


Этот код не соответствует нашему описанию задачи, т.к. он работает только с целыми числами. После обмена множеством электронных писем с Java специалистами, я бы сказал, что факт создания полностью полиморфной версии кода, которая работает также как и предыдущие примеры, находится где-то между чертовски сложным и невозможным. Если кому-то захочется написать такой код, мне было бы очень любопытно на него посмотреть, но лично я взял перерыв в этом деле.

Конечно, то, что вы не можете решить эту проблему на других языках программирования, не является истиной в буквальном смысле. Тот факт, что все эти языки эквивалентны по Тьюрингу означает, что, строго говоря, можно написать любую программу на любом из них. Так как бы вы это сделали? В этом ограниченном случае посредством написания Lisp интерпретатора на менее мощном языке.

Это похоже на шутку, но это так часто происходит в той или иной степени в крупных программных проектах, что данный феномен назвали десятым правилом Гринспена: любая достаточно сложная программа на С или Fortran содержит заново написанную, неспецифицированную, глючную и медленную реализацию половины языка Common Lisp.

Если вы попытаетесь решать сложную задачу, вопрос будет состоять не в том, будете ли вы использовать достаточно мощный язык, а в том, *(а)* будете ли вы использовать мощный язык, *(б)* напишете ли реальный интерпретатор для одного такого, или *(в)* станете ли сами компилятором в человеческом обличии для одного из таких языков. Мы уже видим, как это начинает происходить на примере для Python, где мы имитируем код, который сгенерировал бы сам компилятор для реализации лексической переменной.

Такая практика не только является общей тенденцией, но и превратилась в институционализированную деятельность. Например, в ОО мире вы много слышите о «шаблонах». Интересно, не являются ли эти шаблоны воплощением случая *(в)*, о человеке-компиляторе, в действии. Когда я в своих программах вижу шаблоны, я рассматриваю это как сигнал тревоги. Модель программы должна отражать только ту проблему, которую ей нужно решить. Любая другая закономерность в коде, по крайней мере для меня, является признаком того, что я использую не достаточно мощные абстракции, а часто и то, что я вручную порождаю детализацию некоторого макроса, который мне нужно написать.

**Замечания**

— Процессор IBM 704 был размером с холодильник, но намного тяжелее. Процессор весил 3150 фунтов (около 1428 кг – прим. пер.), а ОЗУ объемом 4K располагалось в отдельной коробке, которая дополнительно весила еще 4000 фунтов (около 1814 кг – прим. пер.). Один из крупнейших холодильников для домашнего использования Sub-Zero 690 весил 656 фунтов (около 298 кг – прим. пер.).

— Стив Рассел также написал первую (цифровую) компьютерную игру Spacewar в 1962 году [^spacewar].

[^spacewar]: <https://ru.wikipedia.org/wiki/Spacewar!>. Эмулятор на JavaScript: <http://spacewar.oversigma.com/>.

— Если вы хотите обмануть невежественного начальника так, чтобы он вам позволил писать ПО на Lisp, то можно попробовать сказать ему, что это всего лишь XML.

— Ниже представлен генератор сумм на других диалектах Lisp:

```scheme
Scheme: (define (foo n)
            (lambda (i) (set! n (+ n i)) n))

Goo: (df foo (n) (op incf n _)))

Arc: (def foo (n) [++ n _])
```

— Печальный рассказ Эрана Гата о «лучших отраслевых практиках» на JPL вдохновил меня на использование этой неверно используемой повсеместно фразы.

— Питер Норвиг выяснил, что 16 из 23 шаблонов в Шаблонах проектирования были «скрыты или проще» в реализации на Lisp.

Выражаю благодарность многим людям, которые ответили на мои вопросы о различных языках программирования и/или прочли наброски этой статьи, включая Кена Андерсона (Ken Anderson), Тревора Блеквелла (Trevor Blackwell), Эранна Гета (Erann Gat), Дена Гиффина (Dan Giffin), Сару Харлин (Sarah Harlin), Джереми Хилтона (Jeremy Hylton), Роберта Морриса (Robert Morris), Питера Норвига (Peter Norvig), Гая Стила (Guy Steele), и Антона ван Штратена (Anton van Straaten). Никто из них не несет ответственности за выраженные здесь мнения.

Дополнительно:

Многие люди откликнулись на эту беседу, поэтому я открыл дополнительную страницу, чтобы иметь возможность рассматривать сложности, с которыми они столкнулись: Re: Revenge of the Nerds.

Эта статья также повлекла за собой всесторонние и часто полезные обсуждения в списке адресатов LL1. См. в частности письмо Антона ванн Штратена по семантическому сжатию.

Некоторые из писем на LL1 побудили меня глубже копнуть в области способностей языков программирования в Succinctness is Power.

Расширенный набор канонических реализаций эталона генератора накопительного параметра представлен на отдельной странице.






## Быть Популярным

(Эта статья была написана в качестве некоего бизнес-плана для нового языка. )


Один мой друг однажды сказал одному выдающемуся эксперту по операционным системам, что он хочет разработать действительно хороший язык программирования. Эксперт сказал, что это будет пустой тратой времени, так как языки программирования не становятся популярными или непопулярными из-за своих достоинств, и поэтому не важно насколько хорош будет язык -- никто не будет его использовать. По крайней мере, именно это произошло с языками программирования, которые *он* разработал.

Что делает язык популярным? Заслуживают ли популярные языки свою популярность? Стоит ли пытаться определить хороший язык программирования? Как бы ты это сделал?

Я думаю, что ответы на эти вопросы можно найти, глядя на хакеров, и узнавая, чего они хотят. Языки программирования существуют *для* хакеров, и язык программирования хорош как язык программирования (а не, скажем, упражнение по денотационной семантике или разработке компиляторов) если, и только если, хакеры любят его.

### Механика Популярности

Несомненно, большинство людей не выбирают язык программирования просто основываясь на его достоинствах. Большинству программистов кто-то говорит какой язык программирования использовать. Но я всё-же считаю, что воздействие таких внешних факторов на популярность языка программирования не так велико, как это инога считается. Я считаю, что главная трудность заключается в том, что представление хакеров о хорошем языке программирования отличается от представления разработчиков языков.

Из этих двух, мнение хакеров единственное, которое имеет значение. Языки программирования не теоремы. Они инструменты, разработанные для людей, и они должны быть разработаны так, чтобы соответствовать сильным и слабым сторонам человека, также как обувь должна подходить ноге. Если обувь жмёт, когда вы надеваете её, то это плохая обувь, независимо от того, насколько она изящна как скульптура.

Возможно, что большинство программистов не способны отличить хороший язык программирования от плохого. Но с другими инструментами тоже самое. Это не значит, что попытка разработать хороший язык программирования является пустой тратой времени. Хакеры-эксперты могут узнать хороший язык программирования, посмотрев на него, они будут использовать его. Хакеры-эксперты -- это, по общему признанию, крошечное меньшинство, но это крошечное меньшинство пишет всё хорошее ПО, и их влияние настолько велико, что остальные программисты будут стремиться использовать тот язык программирования, который будет использоваться этими хакерами. Часто, indeed, это не просто влияние, но команда: часто хакеры-эксперты являются именно теми людьми (начальники или faculty advisors), которые говорят другим программистам какой язык программирования использовать.

Мнения хакеров-экспертов не единственная сила, которая определяет относительную популярность языка программирования -- унаследованное ПО (Cobol) и шумиха (Ada, Java) также играют определённую роль -- но, по моему мнению, это самая влиятельная сила. Имея первоначальную критическую массу и достаточно времени, язык программирования вероятно сможет стать настолько популярным, насколько он этого заслуживает. И популярность будет отделять плохие языки от хороших, потому что обратная связь с настоящими живыми пользователями всегда ведёт к улучшениям. Посмотрите насколько сильно меняются все популярные языки в течении их жизни. Perl и Fortran -- крайние случаи, но даже Lisp изменился более чем сильно. Например, в Lisp 1.5 не было макросов; они появились намного позже, после того как хакеры из MIT потратили пару лет на использование Lisp для написания настоящих программ. [1]

Должен ли язык быть хорошим для того чтобы быть популярным или нет, я думаю, что язык должен быть популярным для того, чтобы быть хорошим. И он должен оставаться популярным для того, чтобы оставаться хорошим. Уровень искусства разработки языков программирования не стоит на месте. И Lisp сегодняшнего дня до сих пор очень похож на Lisp из MIT, каким он был в середине 80, из-за того, что именно тогда у него была достаточно большая пользовательская база.

Конечно, хакеры должны знать о языке до того, как они смогут им воспользоваться. Как они могут узнать о нём? От других хакеров. Однако, должна существовать определённая группа хакеров использующая этот язык до того, как другие узнают о нём. Меня интересует насколько большой должна быть эта группа; какое количество пользователей составляют критическую массу? Из головы, я могу сказать, что двадцать. Если у языка есть двадцать отдельных пользователей, то есть таких пользователей, которые по своей воле решили использовать этот язык, то этого может быть достаточно.

Достижение этого уровня не может быть простым. Я не удивлюсь, если окажется, что труднее подняться от нуля до двадцати пользователей, чем от двадцати до тысячи. Использование троянского коня может быть лучшим способом заполучить первые двадцать пользователей: дать людям приложение, которое они хотят, которое будет написано на новом языке.

### Внешние Факторы

Давайте начнём с того, что признаем тот факт, что один внешний фактор влияет на популярность языка программирования. Чтобы стать популярным, ЯП должен быть скриптовым языком популярной системы. Fortran и Cobol были языками скриптов на ранних мэйнфреймах от IBM. C был языком скриптов в Unix, и так далее. Tcl был языком скриптов в Tk. Предназначение Java и Javascript быть языком скриптов в веб браузерах.

Lisp не является массово популярным языком по причине того, что он не является языком скриптов массово популярной системы. Остаточная полярностья Lisp относится к 60-70 годам двадцатого века, когда он был языком скриптов в MIT. Множество великих программистов того времени были так или иначе связаны с MIT. И в ранних 70-ых, до C, диалект Lisp из MIT, называемый MacLisp, был одним из тех языков программирования, который стали бы использовать серьёзные хакеры.

Сегодня Lisp является языком скриптов двух умеренно популярных систем -- Emacs и Autocad, и именно поэтому я считаю, что большая часть программирования на Lisp имеет место в Emacs Lisp или AutoLisp.

ЯП не существуют в полной изоляции. Хакать -- это переходный глагол -- хакеры обычно хакают что-либо, и на практике языки оцениваются по тому, насколько они приспособлены для хака. Так что, если вы хотите разработать популярный язык, вам нужно, или предложить больше чем язык, или же, вы должны так спроектировать язык, что он заменил бы язык скриптов какой-либо существующей системы.

Common Lisp непопулярен частично из-за того, что он сирота. В самом начале он поставлялся вместе с компьютером, который можно было хакнуть: Lisp Machine. Но Lisp Machine (вместе с параллельными компьютерами) были раздавлены возрастающей мощью процессоров общего назначения в 1980-ых. Common Lisp мог бы остаться популярным, если бы он был хорошим скриптовым языком для Unix. Но, увы, он ужасно плох.

Можно сказать, что языки оцениваются не с точки зрения своих достоинств. А можно сказать, что ЯП не является языком программирования если он не является скриптовым языком для чего-либо. Это только с первого взгляда кажется нечестным. Я считаю, что это не более нечестно, чем ожидать от языка того, что у него будет, скажем, реализация. Это только часть того, чем является ЯП.

ЯП нуждается в реализации, конечно же, и она должна быть свободной. Компании заплатят за ПО, но хакеры нет, а вам нужно привлечь именно хакеров.

Также языку требуется книга об этом языке. Книга должна быть толстой, хорошо написанной, и полной отличных примеров. K&R является идеалом. На данный момент, я почти готов сказать, что книга должна быть опубликована O'Reilly. Это становится определённым тестом для хакеров.

Также требуется online-документация. На самом деле, книга может начаться как online-документация. Но я не думаю, что материальные книги уже вышли из моды. Их формат удобен, и цензура, фактически навязываемая издателями, является полезным, хотя и несовершенным фильтром. Книжные магазины являются самым важным местом где можно узнать о новых языках.

### Краткость

Если ты можешь обеспечить три вещи, в которых нуждается любой язык -- свободную реализацию, книгу, и что-нибудь хакнуть -- как ты сделаешь так, чтобы язык понравился хакерам?

Хакеры любят краткость. Хакеры ленивы, так же как ленивы математики и архитекторы-модернисты: они ненавидят всё лишнее. Я не отойду далеко от истины, сказав, что хакер, собирающийся написать программу, решая какой язык выбрать, по крайней мере подсознательно, основывается на количестве символов, которые ему придётся напечатать. Даже если хакеры не думают именно таким образом, то создатель языка должен действовать так, как будто это было так.

Будет ошибкой сюсюкать с пользователем, заставляя его печатать многословные выражения, напоминающие английский. Cobol был печально известен этим недостатком. Если вы попросите хакера напечатать

    add x to y giving z

вместо

    z = x+y

, то хакер воспримет это как нечто среднее между оскорблением его ума и грехом против Бога.

Иногда говорят, что в Lisp стоило использовать first и rest вместо car и cdr, поскольку это сделало бы программы более простыми для чтения. Может быть в течение первой пары часов. Но хакеры могут выучить достаточно быстро, что car указывает на первый элемент списка, а cdr -- на остальное. Использование first и rest обозначало бы, что пришлось бы печатать на 50% больше символов. И у них разные длины, что означает, что аргументы не будут выравнены, так как car и cdr очень часто встречаются в последовательных строках текста. Я обнаружил, что то как строки выравнены на странице, имеет определённое значение. Я с трудом могу читать Lisp-код, когда он набран шрифтом с переменной шириной символов, и друзья говорят, что это правдиво и для других языков.

Краткость это, то в чём языки с strong типизацией проигрывают. Если все прочие условия равны, никто не захочет начинать программу с кучи объявлений. Всё что может быть сделано неявно, именно так и должно делаться.

Каждый отдельный символ должен быть коротким. Perl и Common Lisp занимают противоположные позиции по этому вопросу. Код Perl может быть настолько плотным, что его можно перепутать со шифром, тогда как имена встроенных в Common Lisp операторов до смешного длинны. Создатели Common Lisp, видимо, полагали, что у пользователей будет текстовый редактор, который будет набирать эти имена для них. Но затраты на длинные имена заключается не только в затратах на то, чтобы их напечатать, но и в затратах на их чтение, и в затратах на место, которое они занимают на вашем экране.

### Hackability

Одна вещь для хакеров важней даже краткости: возможность делать то, что ты хочешь. Поразительное количество усилий было приложено в течении истории языков программирования для того, чтобы не дать программистам делать то, что считается неправильным. Это опасно самонадеянное намеренье. Как разработчик языка программирования может знать, что потребуется программисту? Я считаю, что разработчикам языка стоит полагать, что целевой пользователь будет гением, которому придётся делать вещи, которые они не могли предугадать, а не ламер, которого нужно защищать от самого себя. Ламер, так или иначе, но прострелит себе ногу. Ты можешь спасти его от обращения к переменной в другом пакете, но ты не сможешь спасти его от написания плохо продуманной программы, решающей неправильную задачу, и требующей вечности на реализацию.

Хорошему программисту иногда хочется делать опасные и невкусные вещи. Под невкусными я понимаю вещи, которые заходят за семантические фасады, которые язык пытается представить: например, попытки прямого доступа к внутренним представлениям неких высоко-уровневых абстракций. Хакеры любят хакать, а хаканье означает залезание внутрь вещей и использование их для неочевидных целей.

Далай возможным использование для неочевидных целей. Когда ты создаёшь некий инструмент, люди используют не предусмотренными тобой способами, и это особенно верно в случае с высоко articulated инструментами как язык программирования. Многие хакеры захотят изогнуть твою семантическую модель так, как ты не мог даже представить. Я говорю, позволь им; предоставляй программистам доступ к как можно большему количеству внутренних вещей, пока ты можешь делать это не подвергая опасности такие подсистемы времени исполнения как сборщик мусора.

В Common Lisp мне часто хотелось пройтись по всем полям структуры -- для того, чтобы вычистит ссылки на удалённый объект, например, или найти не инициированное поле. Я знаю, что под поверхностью структуры это просто векторы. Но, несмотря на это, я не могу написать общую функцию, которой я бы мог скормить любую структуру. Я могу получить доступ к полям только по имени, потому что это именно то для чего структуры и предназначены.

Хакеру может захотеться изменить задуманную модель раз или два в большой программе. Но возможность сделать это меняет многое. И это может быть больше чем просто вопросом решения задачи. Здесь также присутствует и некоторое удовольствие. Хакеры разделяют тайное удовольствие хирургов от копания во внутренностях, тайное удовольствие тинейджеров от выдавливания прыщей. [2] Для мальчиков, по крайней мере, некоторые виды ужасного увлекательны. Журнал Maxim публикует ежегодный том фотографий, содержащий смесь pin-up и жутких пришествий. Они знают свою аудиторию.

Исторически, Lisp давал хакерам отличную возможность делать вещи так, как им того хотелось. Политкорректность Common Lisp -- это ошибочный путь развития. Ранние Lisp'ы давали тебе возможность прикасаться ко всему. Большая часть этого духа, к счастью, сохранилась в макросах. Какая восхитительная возможность произвольно изменять исходный код.

Классические макросы являются настоящими инструментами для хакера -- простые, мощные и опасные. Так просто понять, что они делают: ты вызываешь функцию !!с аргументами макроса, и чтобы это не возвращало, это вставляется на место вызова макроса!!(что-то я не понял этот пассаж -- you call a function on the macro's arguments, and whatever it returns gets inserted in place of the macro call). Макросы на основе шаблонов синтаксического преобразования с «соблюдением гигиены» (hygienic macro) воплощают противоположный подход. Они пытаются защитить тебя от понимания того, что они делают. Я никогда не слышал, чтобы макросы с «соблюдением гигиены» объяснялись одним предложением. И они являются классическим примером попыток определения того, что программистам позволено хотеть. Макросы с «соблюдением гигиены» предназначены для того, чтобы, помимо других вещей, уберечь меня от !!захвата переменных!! (variable capture), но захват переменных -- это именно то, что мне нужно в некоторых макросах.

Действительно хороший язык должен быть как чистым, так и грязным: чисто спроектированным, с маленьким ядром легко-понятных и крайне ортодоксальных операторов, но грязным в том смысле, что он позволяет хакерам делать вещи тем способом, который им нравится. C именно такой язык. Именно такими были ранние Lisp. У языка для настоящих хакеров всегда будет слегка разгульный характер.

Хороший яп должен обладать чертами, которые заставят людей, использующих фразы типа "программная инженерия" (software engineering), не одобряюще качать головами. На другом конце континиума находятся языки, наподобие Ada или Pascal, примеры пристойности, пригодной для обучения, но ни для ничего больше.

### Одноразовые Программы

Для того, чтобы быть привлекательным для хакеров, язык должен хорошо подходить для написания программ, которые они хотят писать. И это означает, может быть это покажется удивительным, что он должен хорошо подходить для написания одноразовых программ.

Одноразовая программа -- это программа, которую ты быстро пишешь для некоторых ограниченных задач: программа для автоматизации задач по системному администрированию, или генерации тестовых данных для симуляции, или конвертирования данных из одного формата в другой. Удивляет в одноразовых программах то, что как же как и так многие "временные" здания построенные во многих американских университетах во время второй мировой войны, их не выбрасывают. Многие эволюционировали в настоящие программы, с настоящими возможностями и настоящими пользователями.

Мне кажется, что лучшие из больших программ начали свою жизнь именно так, а не проектировались с самого начала, как Hoover Dam. Страшно строить что-то большое с нуля. Когда люди берутся за проект, который слишком велик, они не могут справится. Проект либо захлёбывается, либо результат получается стерильным и деревянным: торговая улица, а не настоящий деловой центр, Бразилия, а не Рим, Ada, а не C.

Другим способом получить большую программу -- это начать с одноразовой программы и улучшать её. Этот подход менее пугающий, и дизайн программы выигрывает от эволюции. Я думаю, что если кто-нибудь посмотрит, то выяснится, что это именно тот способ, каким большинство больших программ были разработаны. И программы, развивавшиеся таким образом, вероятно, до сих пор написаны на том языке, на котором они были первоначально написаны, так как портирование программ -- редкий случай, за исключением тех случаев, когда это делается по политическим причинам. Пародоксально, но факт, если вы хотите создать язык, который будет использоваться для больших систем, тебе следует создавать язык для написания одноразовых программ, потому что именно из таких программ большие системы берут своё начало.

Перл является поразительным примером такого развития событий. Он не только был разработан для написания одноразовых программ, но и сам, в значительной степени, был одноразовой программой. Перл начал свою жизнь как коллекция утилит для генерации отчётов, и эволюционировал в язык программирования только тогда, когда одноразовые программы, которые люди писали на нём, стали больше. Только после Перл 5 (если не позже) язык стал пригодным для написания серьёзных программ, но уже тогда он был популярен в массах.

Что делает язык подходящим для написания одноразовых программ? Для начала он должен быть уже доступным. Одноразовые программы это что-то, что по вашему мнению, вы напишите за час. Так что, язык уже должен быть установлен на вашем компьютере. Это не должно быть что-то, что нужно устанавливать перед использованием. Оно уже должно быть здесь. C поставлялся вместе с операционной системой. Перл первоначально являлся инструментом для системного администрирования, и вы уже установили его.

Быть доступным означает большее чем просто быть установленным. Интерактивный язык, с интерфейсом командной строки, более доступен чем, тот язык, с которым приходится компилировать и запускать программы раздельно. Популярный язык программирования должен быть интерактивным и быстро запускаться.

Другой вещью, которую вам хочется иметь в одноразовых программах -- это краткость. Краткость всегда привлекательна для хакеров, и в наибольшей степени в программах, которые они собираются написать за час.


//*********************************************

Примечания

[1] Макросы, очень похожие на современное представление о них, были предложены Тимоти Хартом (Timothy Hart) в 1964 году, через два года после того как Lisp 1.5 был выпущен. Изначально, недоставало способов избежать variable capture и multiple evaluation; Hart's examples are subject to both.

[2] В "When the Air Hits Your Brain", нейрохирург Франк Вертосик (Frank Vertosick) приводит разговор в котором его chief resident, Гари, говорит о различие между хирургами и терапевтами ("вшами"):

Гари и я заказали большую пиццу и нашли открытую кабинку. Главный зажёг сигарету. "Посмотри на этих проклятых вшей, тараторят о каких-то болезнях, которые они повстречают раз в жизни. Вот в чём проблема со вшами, им нравится исключительно странные вещи. Они ненавидят то, чем они зарабатывают себе на хлеб и масло. Вот в чём разница между нами и трахаными вшами. Видишь, мы любим большие сочные грыжы межпозвонкового диска, а они ненавидят гипертонию..."

Мне Трудно думать о грыжах межпозвонкового диска как о чём-то сочном (кроме как буквально). Но всё же, я думаю, что знаю, что они имеют в виду. Мне часто приходилось ловить больших сочных жуков(bug -- жук). Непрограммисту может быть трудно представить, что можно получать удовольствие от работы с жуками. Конечно, было бы лучше, если всё просто работало. И это так, с одной стороны. И всё же, в выслеживании определённых типов жуков присутствует мрачное удовлетворение.

### Библиотеки

Конечно, крайностью в краткости это иметь уже написанную программу и просто вызвать её. И это подводит нас к тому, что, по моему мнению, будет становиться всё более и более важной чертой ЯП: библиотечные функции. Перл выигрывает потому что он обладает большой библиотекой функций для работы со строками. Этот класс библиотечных функций наиболее важен для одноразовых программ, которые пишутся для преобразования или извлечения данных. Вероятно, многие программы, написанные на Перле, начинались как пара библиотечных вызовов сведённых вместе.

Я думаю, что большая часть прорывов, которые произойдут в сфере ЯП будут иметь отношение к библиотечным функциям. Я думаю, что ЯП будущего будут располагать библиотеками, разработанными также тщательно, как и сам язык. Проектирование ЯП не будет сводится к только к тому, сделать ли твой ЯП строго или слабо типизированным, объектноориентированным или функциональным, или что там ещё, но прежде всего к тому как спроектировать великие библиотеки. Разработчики языков, любящие подумать о том как разработать систему типов, могут содрогнуться при мысли об этом. Это почти тоже самое как писать приложения! Слишком плохо. Языки для программистов, а библиотеки это то, в чём программисты нуждаются.

Очень трудно разработать хорошие библиотеки. Дело не только в написание кучи кода. Как только библиотека становится слишком большой, то для написания нужной функции самому иногда требует меньшего времени чем на её поиски. Библиотеки должны быть разработаны, используя маленький набор ортодоксальных операторов, так же как и сам язык. Программист должен быть способен догадаться какой библиотечный вызов сделает то, что ему требуется.

Библиотеки это то, в чём Common Lisp испытывает сильный недостаток. Имеются только рудиментарные библиотеки для манипуляции строками, и практически ничего для общения с операционной системой. Исторически, Common Lisp пытался делать вид, что операционных систем не существовует. А из-за того, что ты не можешь разговаривать с операционной системой, ты навряд ли будешь способен написать серьёзную программу, используя только встроенные в Common Lisp операторы. Тебе нужно применять некоторые хаки, специфичные для реализации языка, а на практике это обычно не даёт всего того, что тебе надо. Хакеры бы были гораздо лучшего мнения о Lisp, если бы Common Lisp обладал мощными библиотеками для обработки строк и лучшей поддержкой ОС.

### Синтаксис

Может ли язык с синтаксисом Lisp, или более точно, отсутствием синтаксиса стать популярным? Я не знаю ответа на этот вопрос. Я *думаю*, что синтаксис не является главной причиной почему Lisp не популярен на данный момент не является популярным. У CL есть проблемы серьёзнее чем незнакомый синтаксис. Я знаю некоторых программистов, которые комфортно себя чувствуют с префиксным синтаксисом, но всё равно используют по умолчанию Перл, потому что он обладает мощными библиотеками обработки строк и может говорить с ОС.

Существуют две возможные проблемы с префиксной нотацией: то, что программисты не знакомы с ней и то, что она недостаточно насыщена. В мире Lisp принято считать, что первая проблема является настоящей. Я не так уверен. Да, префиксная нотация заставляет обычного программиста паниковать. Но я не думаю, что мнение обычного программиста имеет значение. Языки становятся популярными или непопулярными в связи с тем, что хакеры-эксперты думают на этот счёт, и я думаю, что хакеры-эксперты способны иметь дело с префиксной нотацией. Синтаксис Перл может быть очень непонятным, но это не встало на пути у популярности Перл. Это, как ничто другое способствовало развитию культа Перл.

Размытость префиксной нотации является более серьёзной проблемой. Для хакера эксперта это действительно проблема. Никто не хочет писать `(aref a x y)` когда можно написать `a[x,y]`.



### Эффективность

Каждый это знает, что хороший язык, должен генерировать быстрый код. Однако, я не думаю, что на практике скорость кода зависит главным образом от дизайна языка. Давным-давно Кнут отметил, что скорость имеет значение только в случае с некоторыми из критических бутылочных горлышек. И с тех пор многие программисты заметили, что эти бутылочные горлышки находятся не там, где ты думаешь.

Так что, на практике, использование хорошего профайлера является единственным способом получить быстрый код, а не, скажем, сделать язык строго-типизированным. Тебе не требуется знать тип каждого аргумента каждого вызова в программе. Что тебе нужно, так это иметь возможность указывать тип аргументов в этих бутылочных горлышках. Но главное, ты должен быть способным находить где эти бутылочные горлышки находятся.

Люди часто жалуются, что с Lisp трудно определить что именно является затратным. Это может быть правдой. Это также может быть неизбежным, если вы желаете получить очень абстрактный язык. И в любом случае я думаю, что хорошее профилирование сделает многое для решения этой проблемы: вы очень быстро узнаете, что было затратной частью.

Частью этой проблемы является социальная составляющая. Разработчики языков любят писать быстрые компиляторы. Это то, как они измеряют свои способности. Они считают профайлер неким дополнением, в лучшем случае. Но на практике, хороших профайлер может сделать больше для того, чтобы улучшить быстродействие реальных программ написанных на этом языке, чем компилятор, который генерирует быстрый код. Опять же, в данном случае разработчики языков не соприкасаются со своими пользователями. Они делают действительно хорошую работу решая немного неправильную задачу.

Активный профайлер может быть хорошей идеей -- всучить данные по быстродействию программисту вместо того, чтобы ждать пока он сам придёт и спросит. Например, редактор может подсвечивать бутылочные горлышки красным, когда программист редактирует исходный код. Другим подходом будет представление каким-нибудь образом того, что происходит в исполняющихся программах. Это будет действительно большой победой для серверных приложений, где есть множество проблем, за которыми тебе нужно следить. Активных профайлер мог бы графически показывать, что происходит в памяти в то время как программа исполняется, или даже издавать звуки для того, чтобы сообщить о том, что что-то произошло.

Звук может быть хорошим решением проблемы. В одном месте, где я работал, у нас была большая панель с цифирблатами, которые показывали, что происходило с нашими веб-серверами. Стрелки двигались маленькими сервомоторами, производящими лёгкий шум, когда они крутились. Я не мог видеть доску из-за своего стола, но я обнаружил, что я мог по звуку сразу же сказать, когда на сервере возникала проблема.

Создание профайлера, который будет автоматически определять неэффективные алгоритмы, может быть вполне возможным. Я не удивлюсь, что определённые шаблоны доступа к памяти окажутся признаком плохих алгоритмов. Если бы существовал маленький парень, бегающий внутри компьютера, исполняя наши программы, то его история была бы такой же длинной и жалобной, как и у служащего федерального правительства. У меня часто возникает ощущение, что я заставляю процессор бегать по кругу, но у меня не было хорошего способа посмотреть на то, что происходит.

Несколько лиспов сейчас компилируются в байт код, который затем исполняется интерпретатором. Это обычно делается для того, чтобы упростить портирование реализации языка, но это может быть удобной особенностью языка. Сделать байт код официальной частью языка, и позволить программисту использовать inline байт код в бутылочных горлышках. Тогда такая оптимизация так же будет пригодной к портированию.

Природа скорости, как она воспринимается конечным пользователем, может меняться. С увеличением числа серверных приложений, может оказаться, что всё большее число программ являются зависимыми от ввода-вывода. Быстрый ввод-вывод может окупить себя. Язык может помочь простыми, прямыми мерами на подобии простых, быстрых, форматированных функций вывода, а так же глубокими структурными изменениями наподобие кэширования и постоянных (persistent) объектов.

Пользователи заинтересованы во времени отклика. Но другим тип эффективности становится всё более и более важным: количество пользователей на один процессор, которое вы можете одновременно поддерживать. Многие интересные приложения, которые будут написаны в ближайшем будущем, будут серверными, и количество пользователей на один сервер является критическим вопросом для каждого, кто размещает подобные приложения. In the capital cost of a business offering a server-based application, this is the divisor.

В течение лет, эффективность значила не много в большинстве приложений для конечного пользователя. Разработчики могли предположить, что на столах пользователей будет находиться процессор всё более возрастающей мощности. И, в соответствие с законом Паркинсона, ПО потребляло все имеющиеся ресурсы. Это изменится с приходом серверных приложений. В этом мире ПО и будет поставляться вместе с оборудованием. Для компаний, которые предлагают серверные приложения, будет очень важно то, сколько пользователей может обслужит один сервер.

В некоторых приложениях, процессор будет ограничивающим фактором, а скорость выполнения будет иметь наибольшее значение с точки зрения оптимизации. Но часто ограничением будет объём памяти: количество пользователей будет определяться количеством памяти, которое требуется для данных каждого пользователя. Язык может помочь и в этом случае. Хорошая поддержка потоков позволит пользователям разделять одну кучу. Большим подспорьем будут постоянные (persistent) объекты, а также поддержка "ленивой загрузки" на уровне языка.

### Время

Последний ингредиент в котором нуждается популярный язык -- это время. Никто не захочет писать программы на языке, который может исчезнуть, как многие ЯП. Так что многие хакеры предпочтут подождать пару лет перед тем, как даже начинать думать о том, стоит ли его использовать.

Изобретатели удивительных новых вещей очень часто бывают удивлены, когда узнают об этом, но тебе требуется время для того, чтобы донести сообщение!! до людей. Один мой друг редко делает то, о чём его попросили в первый раз. Он знает, что люди иногда просят о вещах, которые им не нужны. Для того, чтобы исключить потерю его времени, он ждёт, чтобы его попросили сделать это в третий или четвёртый раз; к этому времени, те, кто просят, могут быть весьма раздражёнными, но, по крайней мере, они действительно хотят то, о чём они просят.

Большинство людей научились применять подобный фильтр по отношению к новшествам, о которых они слышали. Они даже не начинают уделять этому внимание до тех пор пока не услышат об этом в десятый раз. У них есть прекрасное оправдание: большинство горячего и нового чего-бы-то-ни-было оказывается простой потерей времени, и в конце концов пропадает. Отложив изучение VRML, я вообще избежал его изучения.

Так что, любой человек изобретающий что-то новое должен быть готов к тому, что ему придётся повторять своё сообщение в течение многих лет, до тех пор, пока люди не начнут воспринимать его. Мы написали то, что, насколько я знаю, оказалось первым веб-приложением и у нас ушли годы на то, что донести до людей то, что им не надо его загружать. Это не говорит о том, что они глупые. Они просто заставляли нас крутиться.

Хорошая новость заключается в том, что повторение решает эту проблему. Всё что вам нужно -- это продолжать повторять свою историю и, в конце концов, люди начнут слышать. Дело не в том, что люди замечают, что вы здесь и обращают на вас внимание, а в том, что они замечают то, что вы ещё здесь.

Правдой является и то, что много времени занимает набор критической массы. Большинство технологий эволюционируют в течение длительного времени, даже после того, как они были запущены -- ЯП в особенности. Ничего не может быть лучше для технологии, чем несколько лет использования только небольшим количеством early adopters. Early adopters являются изощрёнными и требовательными, и быстро выявляют оставшиеся недостатки в твоей технологии. Когда у тебя всего несколько пользователей, ты можешь быть в тесном контакте со всеми ними. И early adopters прощают тебя, когда ты улутшаешь твою систему, даже если это и вызывает некоторые сбои.

Существуют два способа представить новые технологии: метод органического роста, и метод большого взрыва. Примерами метода органического роста являются "выросшие из коротких штанишек" (seat-of-the-pants) недофинансированные гаражные стартапы. Пара парней, работающих в темноте, разрабатывает некую новую технологию. Они запускают её безо всякого маркетинга и, в начале, у них есть только несколько (фантастически преданных) пользователей. Они продолжают улучшать технологию, а в это время количество пользователей прирастает благодаря сплетням и слухам. И они уже большие ещё до того как они узнают об этом.

Примером другого подхода, метода большого взрыва, может служить поддерживаемые венчурным капиталом (VC), стартапы. Они бросаются разрабатывать продукт, запускают его с огромной рекламной кампанией, и сразуже (они надеются) заполучают большую пользовательскую базу.

В основном, гаражные ребята завидуют ребятам Большого Взрыва. Ребята Большого Взрыва гладкие, уверенные и VC уважает их. Они могут позволить всё самое лучшее, а ПР кампании, окружающие запуск, делают их знаменитостями, в качестве побочного эффекта. Ребята Органического роста, сидя в своих гаражах, чувствуют себя бедными и ни кем не любимыми. Но всё же, я думаю, что они часто ошибаются жалея себя. Кажется, что Органический Рост порождает лучшие технологии и более богатых основателей, чем метод Большого Взрыва. Если вы посмотрите на доминирующие сегодня технологии, то вы увидите, что большинство из них развивались органически.

Этот шаблон применим не только к компаниям. Ты также обнаружишь его и в спонсируемых исследованиях. Multics и Common Lisp были проектами Большого Взрыва, а Unix и MacLisp были проектами Органического Роста.

### Перепланировка

"Лучший способ писать -- это переписывать", написал E. B. White. Каждый хороший писатель знает это, и это хорошо для ПО. Наиболее важная часть планирования -- это перепланировка. ЯП, в особенности, перепланируются не достаточно.

Для того, чтобы писать хорошее ПО, ты должен держать в голове две противоположные идеи. Тебе требуется наивная вера молодого хакера в твои способности, и в тоже время, скептицизм ветерана. Ты должен быть способен думать о том, насколько это может быть сложно (http://www.trevorblackwell.com/) одной частью твоего мозга, пока другая думает, что это никогда не заработает (http://www.pdos.lcs.mit.edu/~rtm/).

Хитрость заключается в том, чтобы осознать, что здесь нет никакого противоречия. Ты желаешь быть настроенным оптимистически и пессимистически по отношению к двум совершенно разным вещам. Ты должен быть оптимистом касательно возможности решения задачи, но скептиком касательно ценности какого бы то ни было решения, которое у тебя есть.

Люди делающие хорошую работу часто думают, что всё над чем они работают -- отстой. Другие видят, что то, что они делают полно изумительных вещей, но создатель полон беспокойства. Это не совпадение: именно беспокойство делает работу стоящей.

Если ты сможешь сохранять равновесие между надеждой и беспокойством, то они будут тянуть твой проект вперёд, так же как две твои ноги заставляют велосипед двигаться вперёд. Во время первой фазы работы двух-фазового инновационного двигателя, ты неистово работаешь над некой проблемой, вдохновлённый твоей уверенностью в том, что ты сможешь разрешить её. Во время второй фазы, ты смотришь на то, что ты сделал под холодным утренним светом, и ясно видишь все недостатки. Но пока твой критический настрой не перевесит твою надежду, ты будешь способен смотреть на твою возможно незавершенную систему, и думать о том, насколько трудно будет одолеть остаток пути, тем самым продолжая цикл.

Сохранять эти две силы в равновесии может быть непростой задачей. В молодых хакерах оптимизм преобладает. Они делают нечто, что, по их мнению, -- супер, и никогда не улучшают этого. В старых хакерах скептицизм преобладает, и они даже не осмелятся взяться за амбициозные проекты.

Хорошо всё то, что помогает вам поддерживать цикл перепланировки. Можно снова и снова переписывать прозу, пока ты не будешь счастлив от того, что у тебя получилось. Но ПО, как правило, не перепланируется в достаточной степени. У прозы есть читатели, а у ПО -- *пользователи*. Если писатель перепишет очерк, то люди, читавшие его старую версию, вряд ли будут жаловаться на то, что ход их мыслей был нарушен вновь введёными несовместимостями.

Пользователи похожи на обоюдоострый клинок. Они могут помочь тебе улучшить твой язык, но они также могут удерживать тебя от его улучшения. Так что тщательно выбирай своих пользователей, и медленно наращивай их количество. Пользователи подобны оптимизации: промедление будет мудрым курсом. Как правило, внося изменения, ты можешь зайти дальше чем ты думаешь. Введение изменений подобно снятию повязки: боль превращается в память практически в тот же самый момент, когда ты её ощутил.

Всем известно, что разработка языка комитетом не является хорошей идеей. Комитеты порождают плохой дизайн. Но я думаю, что главная опасность исходящая от комитетов заключается в том, что они вмешиваются в перепланировку. Требуется так много работы для внесения изменений, что никто не хочет этим заниматься. Существует тенденция заключающаяся в том, что всё то, что порождается комитетом остаётся неизменным, даже если большинству членов это не нравится.

Это происходит даже в случае если комитет состоит из двух человек. Особенно часто это происходит в случае с интерфейсами между частями ПО, написанными двумя различными людьми. Для того, чтобы изменить интерфейс сразу оба должны согласиться изменить его. И поэтому интерфейсы обычно вообще не меняются, что является проблемой, так как интерфейсы -- это наиболее ad hoc части любой системы.

One solution here might be to design systems so that interfaces are horizontal instead of vertical-- so that modules are always vertically stacked strata of abstraction. Then the interface will tend to be owned by one of them. The lower of two levels will either be a language in which the upper is written, in which case the lower level will own the interface, or it will be a slave, in which case the interface can be dictated by the upper level.

### Lisp

Всё это ведёт к тому, что для нового Lisp'а надежда есть. Есть надежда для любого языка, который даёт хакерам то, что они хотят, включая Lisp. Я думаю, что мы сделали ошибку думая, что хакеры отвернулись от Lisp'а из-за его необычности. Эта успокаивающая иллюзия может не дать нам увидеть настоящую проблему с Lisp, или, по крайней мере, Common Lisp, заключающуюся в том, что его обламывает делать то, что хакеры хотят делать. Языку хакеров требуются мощные библиотеки и что-нибудь, что можно хакнуть. У CL нет ни того, ни другого. Язык хакеров краток и пригоден к хаку. А CL нет.

Хорошая новость заключается в том, что Lisp сам по себе не отстой, а CL -- отстой. Если мы сможем разработать новый Lisp, который будет настоящим хакерским языком, то, как мне кажется, хакеры будут его использовать. Они будут использовать любой язык, который делает своё дело. Всё что мы должны сделать -- это обеспечить Lisp делает какуюнибудь важную работу лучше чем другие языки.

История предлагает воодушевляющие примеры. С течением времени, успешные новые языки заимствуют всё больше и больше особенностей Lisp. Осталось не так много того, что вы можете скопировать, до того как язык который вы создали превратится в Lisp. Последний горячий язык, Питон, разбавил Lisp инфиксным синтаксисом и отсутствием макросов. Новый Lisp будет естественным шагом в этом направлении.

Иногда я думаю, что называть его улучшенной версией Питона будет хорошим маркетинговым трюком. Это звучит клёвее чем Lisp. Для многих людей, Lisp -- это медленный язык для ИИ с большим количеством скобок. Официальная биография Fritz Kunze старательно избегает употребления L-слова. Однако я считаю, что мы не должны бояться называть новый Lisp Lisp'ом. У многих из лучших хакеров всё ещё осталось скрытое уважение к Lisp -- например у тех, кто видит 6.001 и понимает. А они являются именно теми пользователями, которых тебе нужно завоевать.

В "Как стать хакером" Эрик Реймонд ("How to Become a Hacker," Eric Raymond) описывает Lisp как что-то подобное Латыни или Греческому -- язык, который тебе следует выучить в качестве упражнения для интеллекта, даже если ты не будешь его использовать:

Lisp стоит изучения ради того опыта глубокого просветления, который ты приобретёшь, когда выучишь его; этот опыт сделает тебя лучшим программистом до конца твоих дней, даже если ты не будешь использовать Lisp в больших количествах.

Если бы я не знал Lisp, чтение этого отрывка заставило бы меня задаться некоторыми вопросами. Язык, который сделает меня лучшим программистом, если это означает хоть что-то, то это означает, что этот язык должен лучше подходить для программирования. И это именно то, что говорит Эрик.

Я думаю, что пока эта идея крутится по близости, хакеры будут достаточно восприимчивы к новому Lisp'у, даже если он будет называться Lisp'ом. Но этот Lisp должен быть хакерским языком, как классические Lisp'ы 1970-ых. Он должен быть насыщенным, простым и пригодным к хаку. И он должен обладать мощными библиотеками позволяющими хакерам делать то, что они хотят делать.

Говоря о библиотеках, то, по моему мнению, нам есть где развернуться для того, чтобы побить Перл и Питон на их собственной территории. Многие из новых приложений которые должны быть написаны в ближайшие годы будут серверными приложениями. Нет причин по которым Lisp не должен обладать такими же хорошими библиотеками по обработке строк как Перл, и если этот новый Lisp будет обладать мощными библиотеками для серверных приложений, он сможет стать очень популярным. Хорошие хакеры не отворачивают носы от нового инструмента, который позволит им решать трудные проблемы несколькими вызовами библиотечных функций. Помни, хакеры ленивы.

Поддержка серверных приложений на уровне языка стала бы ещё большей победой. Например, явная поддержка многопользовательских программ, или обозначение принадлежности данных с помощью тегов.

Серверные приложения также дают ответ на вопрос о том, что именно будет хакаться с использованием этого нового Lisp'а. Не повредит сделать Lisp более подходящим в качестве языка скриптов для Unix. (Сложно будет сделать его ещё менее подходящим.) Но я думаю, что лучше всего будет следовать примеру Tcl, и поставлять этот Lisp вместе с готовой системой для поддержки серверных приложений. Lisp, из-за своей природы естественно подходит для серверных приложений. Lexical closures provide a way to get the effect of subroutines when the ui is just a series of web pages. S-выражения легко вписываются в html, а макросы хороши для его генерации. Есть потребность в лучших инструментах для написания серверных приложений, и есть потребность в новом Lisp'е, и они будут прекрасно работать сообща/вместе.

### Язык-Мечта

Подводя итог, опишем язык мечты для хакеров. Язык-мечта прекрасен, чист и краток. Он обладает интерактивным интерфейсом, который быстро загружается. Ты можешь писать программы для решения обычных задач используя очень мало кода. Практически весь код, который ты пишешь, является специфическим для твоего приложения. Всё остальное должно быть уже сделано за тебя.

Синтаксис языка должен быть как можно более кратким. Тебе не должно требоваться печатать ненужный символ, или даже часто использовать клавишу Шифт.

Используя большие абстракции ты можешь написать первую версию программы очень быстро. Позже, когда тебе захочется оптимизировать, у тебя под рукой будет хороший профайлер, который укажет тебе на чём тебе нужно сфокусировать внимание. Ты можешь сделать внутренние циклы ослепительно быстрыми, используя inline байт код, если тебе это потребуется.

Имеется большое количество хороших примеров на которых можно учиться, и язык до такой степени интуитивно понятен, что ты можешь научиться использовать его за пару минут читая примеры. Тебе не потребуется часто заглядывать в руководство. Руководство тонкое и в нём мало предупреждений и оговорок.

Язык обладает маленьким ядром, и мощными, крайне ортодоксальными библиотеками, разработанные с такой же тщательностью, что и ядро языка. Все библиотеки хорошо работают вместе; всё в языке подходит как части в сложной фото-камере. Ничего не объявлено устаревшим или оставленно для совместимости. Исходный код всех библиотек доступен сразу. Легко общаться с ОС и приложениями написанными на других языках.

Язык состоит из нескольких слоёв. Высоко-уровневые абстракции прозрачно строятся из низко-уровневых абстракций, к которым ты можешь получить доступ, если захочешь.

От тебя ничто не спрятано из того, что не должно быть спрятанным. Язык предлагает абстракции только в качестве способа сэкономить твоё время, а не в качестве способа указывать тебе, что ты должен делать. Фактически, язык убеждает тебя стать равным участником в его разработке. Ты можешь менять всё в нём, включая даже синтаксис, и всё, что ты пишешь, насколько это возможно, имеет тот же статус, что и то, что было предопределено.

//*********************************************

Примечания

[1] Макросы, очень похожие на современное представление о них, были предложены Тимоти Хартом (Timothy Hart) в 1964 году, через два года после того как Lisp 1.5 был выпущен. Изначально, недоставало способов избежать variable capture и multiple evaluation; Hart's examples are subject to both.

[2] В "When the Air Hits Your Brain", нейрохирург Франк Вертосик (Frank Vertosick) приводит разговор в котором его chief resident, Гари, говорит о различие между хирургами и терапевтами ("вшами"):

Гари и я заказали большую пиццу и нашли открытую кабинку. Главный зажёг сигарету. "Посмотри на этих проклятых вшей, тараторят о каких-то болезнях, которые они повстречают раз в жизни. Вот в чём проблема со вшами, им нравится исключительно странные вещи. Они ненавидят то, чем они зарабатывают себе на хлеб и масло. Вот в чём разница между нами и трахаными вшами. Видишь, мы любим большие сочные lumbar disc herniations, а они ненавидят гипертонию..."

Мне Трудно думать об lumbar disc herniations как о чём-то сочном (кроме как буквально). Но всё же, я думаю, что знаю, что они имеют в виду. Мне часто приходилось ловить больших сочных жуков(bug -- жук). Непрограммисту может быть трудно представить, что можно получать удовольствие от работы с жуками. Конечно, было бы лучше, если всё просто работало. И это так, с одной стороны. И всё же, в выслеживании определённых типов жуков присутствует мрачное удовлетворение.






## Проектирование и Исследование

(Эта статья в своей основе содержит программный доклад на NEPLS осенью 2002 года)

Приезжающих в Америку часто застаёт врасплох манера американцев начинать разговор с вопроса «Чем вы занимаетесь?» Я никогда не любил этот вопрос. Я очень редко слышал достойный ответ на него. Но сейчас думаю, что решил эту проблему. Теперь, если кто-нибудь спрашивает чем я занимаюсь, я смотрю ему прямо в глаза и говорю «Я проектирую новый диалект Lisp.» Этот ответ я рекомендую всем, кто не любит когда интересуются что они делают. Разговор тут же свернёт на другие темы.

Я не считаю, что занимаюсь исследованиями языков программирования. Я всего лишь проектирую один из них, как кто-нибудь может проектировать здание, или стул, или новый шрифт. Я не пытаюсь открыть что-то новое. Я только хочу создать язык, который будет хорош для программирования на нём. В какой-то мере, это делает жизнь намного проще.

Различия между проектированием и исследованием похожи на противопоставление нового и хорошего. Архитектурное решение не должно быть новым, но должно быть качественным. Результаты исследования не обязательно должны быть правильными, но обязаны обладать новизной. Думаю, что эти два пути сходятся на вершине: лучший дизайн превосходит своих предшественников на основе использования новых идей, а лучшее исследование решает задачи, которые не столько новые, сколько на самом деле заслуживающие решения. Так что, в конечном счёте, мы стремимся к одному, просто двигаемся с разных сторон.

Сегодня я хочу поговорить о том, на что похожа ваша цель с другой стороны. Что вы делаете по-другому, когда рассматриваете язык программирования как объект проектирования, а не как тему для исследования?

Наибольшее отличие состоит в том, что вы больше сосредотачиваетесь на пользователе. Проектирование начинается с вопросов: для кого это делается и что от этого им нужно? В частности, хороший архитектор начинает не с создания решения, которое потом принудительно вешается на пользователей, но с изучения вероятных пользователей и оценки их потребностей.

Обратите внимание, я сказал «их потребностей», а не «их пожеланий». Я не намерен создать впечатление, что работа проектировщика означает работу наподобие быстрого выпекания на скорую руку всего, чего только клиент не пожелает.

«Покупатель всегда прав» имеет тот смысл, что дизайн хорош настолько, насколько хорошо он для пользователя работает. Если вы написали роман, который на всех нагоняет скуку, или сделали ужасно неудобный стул, вы отработали плохо, точка. Вас нисколько не извиняет то, что роман или стул спроектирован с учётом передовейших теоретических принципов.

И всё же разработка того, что подходит пользователю, совсем не означает делать то, что он вам говорит. Пользователи не знают всех возможностей, и часто заблуждаются чего они хотят на самом деле.

Решение этого парадокса, по моему мнению, в том, что вы должны проектировать именно для пользователя, но проектировать то, что ему нужно, а не те хотелки, о которых он говорит. Это очень похоже на лечение. Вы не можете лечить пациенту только симптомы. Когда пациент рассказывает вам о своих симптомах, вы должны разгадать что у него не так на самом деле, и вылечить это.

Сосредоточение на требованиях пользователя является одним из принципов, на котором основано большинство приёмов правильного проектирования, и вокруг которого сосредоточено большинство проблем.

Если правильное решение должно удовлетворять требованиям пользователя, то кто же он, этот пользователь? Когда я говорю, что проектирование должно быть для пользователей, это не означает, что качественный проект нацелен на наименьший общий знаменатель. Вы можете выбрать любую группу пользователей, какую захотите. Если вы разрабатываете, к примеру, инструмент, вы можете проектировать его для кого угодно, от начинающих до экспертов, и что будет хорошим решением для одной группы, может быть неприемлемым для другой. Суть в том, что вы должны выбрать определённую группу пользователей. Думаю, что вы даже не имеете права оценивать плох дизайн или хорош, кроме как по отношению к некоторому гипотетическому пользователю.

Вероятнее всего, вы добьётесь хорошего решения, когда в группу целевых пользователей будет входить и сам проектировщик. Когда вы разрабатываете что-то для группы, к которой сами отношения не имеете, обычно получается, что вы рассматриваете этих людей упрощёнными по сравнению с собой.

Это сложная ситуация, потому что, глядя на своего пользователя свысока, пусть и благожелательно, дизайнер неминуемо развращается. Подозреваю, что очень мало проектов жилых зданий в США было разработано архитекторами, кто собирался потом в них жить. То же самое вы можете обнаружить и для языков программирования. C, Lisp и Smalltalk были созданы для себя. Cobol, Ada и Java были созданы для применения другими людьми.

Если вы думаете, что вы проектируете для идиотов, не велики шансы, что вы создадите что-то хорошее, пусть даже для идиотов.

И всё же, даже если проектируете что-то для наиболее квалифицированных пользователей, вы делаете это для людей. Другое положение вещей в исследовательской сфере. В математике вы не выбираете абстракции так, чтобы людям их было легко понимать; вы выбираете такие, которые сделают доказательство короче. Думаю, что это верно для всех основных научных дисциплин. Научные выкладки не обязаны быть эргономичными.

В искусстве всё по-другому. Проектирование целиком для людей. Человеческое тело — это причудливая конструкция, но когда вы конструируете стул, оно является именно тем, для чего вы всё делаете, и ни для чего другого. Все формы искусства должны угождать пожеланиям человека и его недостаткам. Например, для живописи при прочем одинаковом содержании картина с людьми будет более интересна, чем такая же без людей. И это не просто историческая случайность, что великие полотна Возрождения наполнены образами людей. Если бы было не так, живопись как форма искусства не была бы так популярна.

Нравится вам это или нет, но языки программирования так же предназначены людям, и я предполагаю, что человеческий разум такой же неуклюжий и своеобразный, как и человеческое тело. Какие-то идеи ухватываются людьми легко, а какие-то нет. Например, похоже, что у нас очень ограниченные возможности для работы с отдельными элементами. Это то, что в первую очередь делает языки программирования полезным изобретением; если бы мы могли держать в голове множество элементов, мы просто программировали бы в машинных кодах.

Также обратите внимание, что языки, как правило, являются не средством для написания готовых программ, а тем при помощи чего программы должны разрабатываться. Любой человек искусства может вам сказать, что в разных ситуациях вам могут понадобиться разные материалы.

Например, мрамор — это красивый и надежный материал для оформления готовых идей, но он безнадёжно не подходит для отработки новых.

Программа, как и доказательство, является деревом, которое начинает неправильно ветвиться и плохие ветки обрезаются. Так что проверкой качества языка будет не то, как красиво выглядит на нём готовая программа, но насколько прост был путь к этой готовой программе. Вариант, который обеспечит вам элегантность готовых программ, не обязательно обеспечит элегантный процесс разработки. Например, как-то раз я написал несколько макросов с макроопределениями, полных вложенных обратных кавычек, которые выглядят как маленькие бриллианты, но их написание заняло часы отвратительного кодирования методом проб и ошибок, и, честно говоря, я до конца не уверен, что они полностью безошибочны.

Мы часто поступаем, используя для оценки языка внешний вид законченной программы. Это выглядит очень правдоподобно, если рассматриваются решения задачи, написанные на двух разных языках, и при этом одна из версий программы получилась намного короче другой. Но если вы подойдёте к этой проблеме с точки зрения искусства, то, скорее всего, меньше будете полагаться на тестирование таким способом. Вряд ли вы захотите, в конце концов, получить язык программирования наподобие мрамора.

К примеру, громадным прорывом в разработке программного обеспечения является интерактивная среда верхнего уровня, которая в Lisp называется REPL-среда или цикл «читай-вычисляй-печатай» (read-eval-print loop). И когда такая среда реализуется, она оказывает реальный эффект на дизайн языка. Например, она не будет хорошо работать в языках, где вы обязаны перед использованием объявить переменные. Когда вы просто набираете выражения в интерактивной среде, вы хотите присвоить x значение и начать его использовать. Вы не хотите, чтобы вас заставляли сначала объявить тип x. Вы можете оспорить каждое из этих предположений, но если удобным языком считается язык с реализованной средой верхнего уровня, а обязательные объявления типов не совместимы с этой средой, то ни один из языков, который делает объявления типов обязательными, не может быть удобным для программирования.

На практике, чтобы добиться хорошего дизайна вы должны стать близким другом для ваших пользователей и оставаться им. Вы должны непрерывно шлифовать свои идеи с реальными пользователями, особенно на первоначальных этапах. Одной из причин, почему романы Джейн Остин так хороши, является то, что она читала их вслух своей семье. Вот почему она никогда не потакала своим слабостям и не впадала в эстетствующие описания пейзажей или пафосное философствование. (Философия присутствовала, но была вплетена в повествование, а не приляпана поверх, как этикетка.) Если откроете среднестатистический образец «литературы» и представите, что вы читаете своим друзьям вслух, как будто написали это сами, то остро почувствуете, чего это стоит читающему.

В мире разработки ПО эта идея известна как «Чем хуже, тем лучше». На самом деле в этой концепции совмещаются несколько идей, об истинности которых люди до сих пор спорят. Но одна из главных составляющих этой концепции говорит, что если разрабатываете что-то новое, вы должны выложить прототип перед пользователями как можно раньше.

Противоположный подход может быть назван стратегией Хэйл Мэри («пас на удачу»). Вместо того, чтобы быстро выпустить прототип и потом постепенно совершенствовать его, вы можете попробовать создать сразу полный, законченный продукт как один длинный пас с тачдауном. Насколько мне известно, это рецепт катастрофы. Этот путь привёл к саморазрушению бесчисленное множество стартапов во время пузыря доткомов. Я не слышал ни об одном случае, когда такой подход сработал.

За пределами мира программирования люди могут не представлять, что принцип «Чем хуже, тем лучше» можно отыскать в искусстве повсюду. К примеру, в изобразительном искусстве эта идея была открыта во время Возрождения. Сейчас практически каждый преподаватель рисования будет рассказывать вам, что единственной правильной техникой получить точное изображение будет не двигаться медленно по контуру объекта, так как неточности накапливаются, и вы, в конце концов, обнаружите, что линии не совпадают. Напротив, вы должны набросать несколько быстрых штрихов приблизительно в нужном месте, и потом постепенно совершенствовать этот начальный набросок.

Во многих областях искусства для создания прототипов с давних пор применяются другие материалы. Матрицы для шрифтов, которые вырезаются из металла, сначала рисуются кистью на бумаге. Статуи для отливки в бронзе предварительно вылепляют из воска. Орнаменты вышивки гобеленов рисуются на бумаге чернилами. Каменные здания проверяются в уменьшенном масштабе в виде деревянных моделей.

Что сделало рисование маслом таким перспективным, когда оно в пятнадцатом веке стало популярным — это возможность получить окончательный результат из прототипа. Если нужно, можно было сделать черновой рисунок, но вы не были привязаны к нему; вы могли уточнить все детали и сделать значительные изменения в процессе работы над ним.

С программным обеспечением вы можете проделывать то же самое. Прототип не обязан быть всего лишь макетом; вы можете дорабатывать его и получить окончательный продукт. Думаю, что так надо поступать во всех случаях, когда это возможно. Это позволит вам воспользоваться преимуществами от новых озарений, возникающих в процессе разработки. Но что, весьма вероятно, и даже более важно, прототипирование полезно для позитивного настроя.

Позитивный рабочий настрой является решающим фактором в проектировании. Я поражаюсь как мало люди обращают на это внимания. Один из моих первых учителей рисования говорил мне: если рисуешь и тебе скучно, твой рисунок получится скучным. К примеру, предположим, что вам нужно нарисовать здание, и вы решите прорисовать по отдельности каждый кирпичик. Если хочется, можете так сделать, но если на середине вам станет скучно, и вы начнёте механически лепить кирпичи вместо того, чтобы соблюдать качество каждого, рисунок будет выглядеть хуже, чем если бы вы их лишь обозначили.

Создавать что-то, постепенно улучшая прототип, полезно для настроя, потому что это поддерживает вас увлечённым. В разработке ПО у меня такое правило: код всегда должен быть работающим. Если пишете что-то, что может быть проверено в течение часа, у вас есть перспектива быстрого поощрения, которая мотивирует. То же справедливо и в искусстве, в частности, рисовании маслом. Большинство художников начинают с расплывчатого наброска и постепенно прорисовывают его. Если вы работаете в такой манере, вы по сути никогда не будете останавливаться вечером на чем-то, что выглядит незавершённым. И действительно, у художников даже есть поговорка: «Рисунок никогда нельзя закончить, можно только прекратить работать над ним». Эта мысль знакома любому, кто разрабатывал ПО.

Настрой — это ещё одна причина, из-за которой трудно что-то делать для неквалифицированного пользователя. Тяжело оставаться заинтересованным в чём-то, что не нравится вам самому. Создавая что-то хорошее, вы должны думать «ого, это на самом деле отлично», а не «ну что за хрень; ну ладно, этим дебилам понравится».

Проектирование имеет смысл как творчество для людей. Но здесь люди — это не только пользователи. Проектировщик тоже является человеком.

Заметьте, я всё время говорю о «проектировщике», как о конкретном индивиде. Для того, чтобы проектное решение получилось сколько-нибудь качественным, оно должно разрабатываться под контролем единственного специалиста. В то же время считается допустимым, если в одном исследовательском проекте совместно работает несколько человек. Для меня это представляется одним из самых интересных отличий между дизайном и исследовательской работой.

Известны случаи коллективной работы в искусстве, но большинство их выглядит как молекулярные соединения, а не как ядерное слияние. В оперном жанре часто бывает, когда один человек пишет либретто, а другой — музыку. В эпоху Возрождения подмастерья из северной Европы часто нанимались изображать пейзажи для задних планов картин итальянских мастеров. Но это не настоящее сотрудничество. Эти случаи больше напоминают фразу Роберта Фроста: «за хорошими заборами — соседи хорошие». Вы можете склеивать части хорошего дизайна вместе, но в каждой части должен быть один хозяин своего индивидуального проекта.

Я не имею в виду, что хороший проект требует, чтобы один человек продумывал всё. Ничего не может быть ценнее, чем совет специалиста, решениям которого вы доверяете. Но после того как обсуждение завершено, окончательный выбор остаётся за ответственным.

Почему исследования могут вестись совместно, а проектирование нет? Это интересный вопрос. И я не знаю ответа. Возможно, когда проектирование и исследование проводятся одновременно, лучший результат исследования становится хорошим дизайном, и в реальной жизни это не может быть сделано соавторами. Огромное количество самых известных учёных вероятно работали в одиночку. Но данных у меня недостаточно, чтобы сказать есть ли здесь закономерность. Может быть просто дело в том, что многие известные учёные работали в то время, когда коллективное творчество ещё не было популярно.

Но как бы это ни было в науке, в искусстве реальное коллективное творчество встречается исчезающе редко. Коллегиальные проектные решения являются синонимом плохих проектных решений. Почему это так? Есть ли какой-нибудь способ избежать этого?

Я склонен думать, что нет — хороший проект требует диктатора. Одной из причин является то, что хороший дизайн должен быть цельным, с одинаковым качеством всех составляющих. Если решения представляют собой идею, которая укладывается в голове одного человека, она может так же укладываться и в голове пользователя.
